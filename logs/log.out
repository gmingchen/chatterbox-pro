2024-05-24 05:29:37.854 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 527 millis. SELECT 1[]
2024-05-24 05:29:38.148 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 253 millis. SELECT 1[]
2024-05-24 05:29:38.422 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 250 millis. SELECT 1[]
2024-05-24 05:29:38.688 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 252 millis. SELECT 1[]
2024-05-24 06:31:41.564 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 101 millis. SELECT 1[]
2024-05-24 07:03:43.276 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 103 millis. SELECT 1[]
2024-05-24 08:25:47.089 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 141 millis. SELECT 1[]
2024-05-24 08:25:47.281 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 163 millis. SELECT 1[]
2024-05-24 08:47:48.770 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 382 millis. SELECT 1[]
2024-05-24 08:51:49.417 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 401 millis. SELECT 1[]
2024-05-24 08:51:49.629 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 212 millis. SELECT 1[]
2024-05-24 08:51:49.939 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 308 millis. SELECT 1[]
2024-05-24 08:57:26.819 DEBUG 21492 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:26.822 DEBUG 21492 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:26.834 DEBUG 21492 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:26.860 DEBUG 21492 --- [http-nio-8820-exec-6] c.s.m.g.mapper.GroupingMapper.queryList  : ==>  Preparing: SELECT g.id, g.name, g.fixed, f.id AS friend_id, f.remark, f.friend_id AS user_id, u.nickname, u.avatar, u.sex, u.online FROM `grouping` AS g LEFT JOIN friend AS f ON f.grouping_id = g.id LEFT JOIN user AS u ON u.id = f.friend_id WHERE g.deleted = 0 AND g.user_id = ? ORDER BY g.fixed DESC, u.nickname ASC, f.created_at DESC
2024-05-24 08:57:26.860 DEBUG 21492 --- [http-nio-8820-exec-6] c.s.m.g.mapper.GroupingMapper.queryList  : ==> Parameters: 1(Long)
2024-05-24 08:57:26.872 DEBUG 21492 --- [http-nio-8820-exec-6] c.s.m.g.mapper.GroupingMapper.queryList  : <==      Total: 2
2024-05-24 08:57:27.814 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:27.814 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:27.823 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:40.011 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectList  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE deleted=0 AND (email = ?) limit 1
2024-05-24 08:57:40.017 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectList  : ==> Parameters: 1240235512@qq.com(String)
2024-05-24 08:57:40.027 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectList  : <==      Total: 1
2024-05-24 08:57:40.222 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:40.223 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:40.232 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:40.416 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:40.416 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:40.427 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:40.446 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:57:40.448 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:57:40.459 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 08:57:45.461 DEBUG 21492 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:45.462 DEBUG 21492 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:45.469 DEBUG 21492 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:45.644 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:45.644 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:45.652 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:45.670 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:57:45.671 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:57:45.682 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 08:57:50.028 DEBUG 21492 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:50.028 DEBUG 21492 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:50.037 DEBUG 21492 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:50.390 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:50.390 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:50.399 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:50.417 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:57:50.418 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:57:50.428 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 08:58:54.094 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:58:54.094 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:58:54.105 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:58:54.112 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:58:54.113 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:58:54.121 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:58:54.125 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:58:54.125 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:58:54.135 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 08:58:54.139 ERROR 21492 --- [http-nio-8820-exec-17] com.slipper.handler.RunExceptionHandler  : 操作太频繁,请稍后重试！

com.slipper.exception.RunException: 操作太频繁,请稍后重试！
	at com.slipper.core.repeat.aspect.RepeatAspect.around(RepeatAspect.java:64)
	at sun.reflect.GeneratedMethodAccessor69.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.slipper.modules.conversation.controller.ConversationController$$EnhancerBySpringCGLIB$$6afad7c7.list(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-24 08:58:55.950 DEBUG 21492 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:58:55.950 DEBUG 21492 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:58:55.958 DEBUG 21492 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:58:56.275 DEBUG 21492 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:58:56.276 DEBUG 21492 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:58:56.286 DEBUG 21492 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:58:56.296 ERROR 21492 --- [http-nio-8820-exec-19] com.slipper.handler.RunExceptionHandler  : 操作太频繁,请稍后重试！

com.slipper.exception.RunException: 操作太频繁,请稍后重试！
	at com.slipper.core.repeat.aspect.RepeatAspect.around(RepeatAspect.java:64)
	at sun.reflect.GeneratedMethodAccessor69.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.slipper.modules.conversation.controller.ConversationController$$EnhancerBySpringCGLIB$$6afad7c7.list(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-24 08:59:02.261 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:02.262 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:02.270 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:02.615 DEBUG 21492 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:02.616 DEBUG 21492 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:02.623 DEBUG 21492 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:02.642 DEBUG 21492 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:59:02.643 DEBUG 21492 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:59:02.654 DEBUG 21492 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 08:59:35.633 DEBUG 21492 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:35.633 DEBUG 21492 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:35.641 DEBUG 21492 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:35.953 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:35.953 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:35.962 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:35.982 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:59:35.983 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:59:35.993 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 08:59:37.142 DEBUG 21492 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:37.143 DEBUG 21492 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:37.151 DEBUG 21492 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:37.293 DEBUG 21492 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:37.294 DEBUG 21492 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:37.302 DEBUG 21492 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:37.312 ERROR 21492 --- [http-nio-8820-exec-25] com.slipper.handler.RunExceptionHandler  : 操作太频繁,请稍后重试！

com.slipper.exception.RunException: 操作太频繁,请稍后重试！
	at com.slipper.core.repeat.aspect.RepeatAspect.around(RepeatAspect.java:64)
	at sun.reflect.GeneratedMethodAccessor69.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.slipper.modules.conversation.controller.ConversationController$$EnhancerBySpringCGLIB$$6afad7c7.list(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-24 08:59:38.902 DEBUG 21492 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:38.903 DEBUG 21492 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:38.912 DEBUG 21492 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:39.043 DEBUG 21492 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:39.043 DEBUG 21492 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:39.054 DEBUG 21492 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:39.072 DEBUG 21492 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:59:39.073 DEBUG 21492 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:59:39.082 DEBUG 21492 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 09:11:56.167 DEBUG 21492 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:11:56.168 DEBUG 21492 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:11:56.176 DEBUG 21492 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:11:56.514 DEBUG 21492 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:11:56.514 DEBUG 21492 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:11:56.525 DEBUG 21492 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:11:56.545 DEBUG 21492 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 09:11:56.546 DEBUG 21492 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 09:11:56.559 DEBUG 21492 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 09:11:58.851 DEBUG 21492 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:11:58.852 DEBUG 21492 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:11:58.861 DEBUG 21492 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:11:58.881 DEBUG 21492 --- [http-nio-8820-exec-30] c.s.m.g.mapper.GroupingMapper.queryList  : ==>  Preparing: SELECT g.id, g.name, g.fixed, f.id AS friend_id, f.remark, f.friend_id AS user_id, u.nickname, u.avatar, u.sex, u.online FROM `grouping` AS g LEFT JOIN friend AS f ON f.grouping_id = g.id LEFT JOIN user AS u ON u.id = f.friend_id WHERE g.deleted = 0 AND g.user_id = ? ORDER BY g.fixed DESC, u.nickname ASC, f.created_at DESC
2024-05-24 09:11:58.882 DEBUG 21492 --- [http-nio-8820-exec-30] c.s.m.g.mapper.GroupingMapper.queryList  : ==> Parameters: 1(Long)
2024-05-24 09:11:58.892 DEBUG 21492 --- [http-nio-8820-exec-30] c.s.m.g.mapper.GroupingMapper.queryList  : <==      Total: 2
2024-05-24 09:12:17.104 DEBUG 21492 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:12:17.105 DEBUG 21492 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:12:17.115 DEBUG 21492 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:12:17.590 DEBUG 21492 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:12:17.591 DEBUG 21492 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:12:17.599 DEBUG 21492 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:12:17.618 DEBUG 21492 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 09:12:17.619 DEBUG 21492 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 09:12:17.633 DEBUG 21492 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 09:40:19.697 DEBUG 21492 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:40:19.698 DEBUG 21492 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:40:19.708 DEBUG 21492 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:40:19.781 DEBUG 21492 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:40:19.785 DEBUG 21492 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 2(Long), 1(Long)
2024-05-24 09:40:19.796 DEBUG 21492 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:40:34.397 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:40:34.398 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:40:34.407 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:40:34.409 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:40:34.411 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long)
2024-05-24 09:40:34.419 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:40:35.524 DEBUG 21492 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:40:35.525 DEBUG 21492 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:40:35.531 DEBUG 21492 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:40:35.533 DEBUG 21492 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:40:35.533 DEBUG 21492 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long)
2024-05-24 09:40:35.543 DEBUG 21492 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:40:36.224 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:40:36.224 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:40:36.233 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:40:36.235 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:40:36.235 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long)
2024-05-24 09:40:36.246 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:40:37.020 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:40:37.020 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:40:37.029 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:40:37.031 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:40:37.032 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long)
2024-05-24 09:40:37.042 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:40:38.114 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:40:38.115 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:40:38.122 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:40:38.124 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:40:38.124 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long)
2024-05-24 09:40:38.133 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:42:20.653 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:42:20.655 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:42:20.669 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:42:20.671 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:42:20.672 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long)
2024-05-24 09:42:20.685 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:42:23.394 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:42:23.394 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:42:23.402 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:42:23.404 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:42:23.404 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 2(Long), 1(Long)
2024-05-24 09:42:23.412 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:42:27.509 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:42:27.509 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:42:27.516 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:42:27.518 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:42:27.518 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 1(Long)
2024-05-24 09:42:27.525 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 09:42:30.627 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:42:30.628 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:42:30.635 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:42:30.637 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:42:30.637 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 2(Long), 1(Long)
2024-05-24 09:42:30.647 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:42:45.602 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:42:45.602 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:42:45.612 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:42:45.614 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:42:45.616 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 2(Long), 1(Long)
2024-05-24 09:42:45.627 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:54:06.174 DEBUG 21492 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:54:06.175 DEBUG 21492 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:54:06.186 DEBUG 21492 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:54:06.632 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:54:06.632 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:54:06.641 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:54:06.659 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 09:54:06.660 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 09:54:06.671 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:09:37.065  INFO 5600 --- [main] com.slipper.SlipperApplication           : Starting SlipperApplication using Java 1.8.0_291 on SZ-PC-PDC-135 with PID 5600 (E:\github\chatterbox-pro\target\classes started by gumingchen in E:\github\chatterbox-pro)
2024-05-24 10:09:37.067 DEBUG 5600 --- [main] com.slipper.SlipperApplication           : Running with Spring Boot v2.7.18, Spring v5.3.31
2024-05-24 10:09:37.067  INFO 5600 --- [main] com.slipper.SlipperApplication           : The following 1 profile is active: "dev"
2024-05-24 10:09:37.825  INFO 5600 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-05-24 10:09:37.827  INFO 5600 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-05-24 10:09:37.885  INFO 5600 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 43 ms. Found 0 Redis repository interfaces.
2024-05-24 10:09:38.523  INFO 5600 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8820 (http)
2024-05-24 10:09:38.529  INFO 5600 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-24 10:09:38.530  INFO 5600 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.83]
2024-05-24 10:09:38.683  INFO 5600 --- [main] o.a.c.c.C.[.[localhost].[/chatterbox]    : Initializing Spring embedded WebApplicationContext
2024-05-24 10:09:38.683  INFO 5600 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1585 ms
2024-05-24 10:09:39.178  INFO 5600 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2024-05-24 10:09:39.689 ERROR 5600 --- [main] c.alibaba.druid.filter.stat.StatFilter   : slow sql 111 millis. SELECT 1[]
2024-05-24 10:09:40.866  INFO 5600 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2024-05-24 10:09:41.586 DEBUG 5600 --- [main] c.s.c.s.f.TokenAuthenticationFilter      : Filter 'tokenAuthenticationFilter' configured for use
2024-05-24 10:09:42.236  INFO 5600 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@57e57dc5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5bba9949, org.springframework.security.web.context.SecurityContextPersistenceFilter@4ebed2b3, org.springframework.security.web.header.HeaderWriterFilter@111cbcda, org.springframework.web.filter.CorsFilter@147059f8, org.springframework.security.web.authentication.logout.LogoutFilter@5e763c07, com.slipper.core.security.filter.TokenAuthenticationFilter@472719df, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5909285b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2059f785, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@744fb110, org.springframework.security.web.session.SessionManagementFilter@5cf072ea, org.springframework.security.web.access.ExceptionTranslationFilter@b3004e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@69419d59]
2024-05-24 10:09:42.554  INFO 5600 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8820 (http) with context path '/chatterbox'
2024-05-24 10:09:42.562  INFO 5600 --- [main] com.slipper.SlipperApplication           : Started SlipperApplication in 5.933 seconds (JVM running for 7.231)
2024-05-24 10:09:42.630  INFO 5600 --- [task-executor-1] com.slipper.core.netty.WebSocketServer   : 🤝[服务器启动端口]: 8821

2024-05-24 10:11:12.411  INFO 5600 --- [http-nio-8820-exec-1] o.a.c.c.C.[.[localhost].[/chatterbox]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-24 10:11:12.411  INFO 5600 --- [http-nio-8820-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-24 10:11:12.412  INFO 5600 --- [http-nio-8820-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-05-24 10:11:21.549 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectList  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE deleted=0 AND (email = ?) limit 1
2024-05-24 10:11:21.603 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectList  : ==> Parameters: 1240235512@qq.com(String)
2024-05-24 10:11:21.624 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectList  : <==      Total: 1
2024-05-24 10:11:21.908 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:11:21.909 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:11:21.919 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:11:22.359 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:11:22.360 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:11:22.370 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:11:22.396 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:11:22.403 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:11:22.415 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:11:27.902 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:11:27.903 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:11:27.913 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:11:27.935 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.g.mapper.GroupingMapper.queryList  : ==>  Preparing: SELECT g.id, g.name, g.fixed, f.id AS friend_id, f.remark, f.friend_id AS user_id, u.nickname, u.avatar, u.sex, u.online FROM `grouping` AS g LEFT JOIN friend AS f ON f.grouping_id = g.id LEFT JOIN user AS u ON u.id = f.friend_id WHERE g.deleted = 0 AND g.user_id = ? ORDER BY g.fixed DESC, u.nickname ASC, f.created_at DESC
2024-05-24 10:11:27.936 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.g.mapper.GroupingMapper.queryList  : ==> Parameters: 1(Long)
2024-05-24 10:11:27.945 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.g.mapper.GroupingMapper.queryList  : <==      Total: 2
2024-05-24 10:13:44.157 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:13:44.158 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:13:44.168 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:13:44.402 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:13:44.402 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:13:44.412 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:13:44.427 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:13:44.429 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:13:44.439 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:13:46.010 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:13:46.011 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:13:46.021 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:13:46.039 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:13:46.040 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:13:46.050 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:15:22.718 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:15:22.718 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:15:22.728 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:15:22.967 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:15:22.968 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:15:22.978 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:15:22.998 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:15:22.999 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:15:23.009 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:15:24.808 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:15:24.809 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:15:24.817 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:15:24.820 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:15:24.821 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:15:24.832 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:16:06.341 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:16:06.342 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:16:06.352 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:16:06.793 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:16:06.794 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:16:06.805 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:16:06.824 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:16:06.825 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:16:06.838 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:16:09.055 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:16:09.056 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:16:09.066 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:16:09.068 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:16:09.068 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:16:09.078 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:16:32.857 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:16:32.857 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:16:32.868 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:16:33.306 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:16:33.308 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:16:33.317 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:16:33.335 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:16:33.336 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:16:33.349 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:16:34.289 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:16:34.290 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:16:34.301 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:16:34.303 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:16:34.303 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:16:34.315 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:22:08.054 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:22:08.055 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:22:08.066 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:28:58.993 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:28:58.994 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:28:59.003 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:28:59.256 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:28:59.257 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:28:59.267 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:28:59.286 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:28:59.287 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:28:59.301 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:29:15.365 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:15.366 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:15.376 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:15.391 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:29:15.392 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:29:15.403 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:29:16.852 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:16.853 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:16.862 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:17.143 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:17.143 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:17.152 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:17.163 ERROR 5600 --- [http-nio-8820-exec-23] com.slipper.handler.RunExceptionHandler  : 操作太频繁,请稍后重试！

com.slipper.exception.RunException: 操作太频繁,请稍后重试！
	at com.slipper.core.repeat.aspect.RepeatAspect.around(RepeatAspect.java:64)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.slipper.modules.conversation.controller.ConversationController$$EnhancerBySpringCGLIB$$17a41668.list(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-24 10:29:19.743 DEBUG 5600 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:19.744 DEBUG 5600 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:19.751 DEBUG 5600 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:19.997 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:19.997 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:20.007 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:20.027 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:29:20.028 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:29:20.039 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:29:21.166 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:21.167 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:21.177 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:21.179 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:29:21.179 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:29:21.189 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:29:35.533 DEBUG 5600 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:35.534 DEBUG 5600 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:35.544 DEBUG 5600 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:35.800 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:35.801 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:35.810 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:35.829 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:29:35.830 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:29:35.840 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:29:37.916 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:37.917 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:37.928 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:37.929 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:29:37.929 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:29:37.940 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:32:27.694 DEBUG 5600 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:32:27.695 DEBUG 5600 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:32:27.704 DEBUG 5600 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:32:27.940 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:32:27.941 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:32:27.950 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:32:27.967 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:32:27.967 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:32:27.981 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:32:28.940 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:32:28.940 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:32:28.947 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:32:28.948 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:32:28.949 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:32:28.958 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:34:45.930 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:34:45.931 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:34:45.939 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:34:45.957 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.g.mapper.GroupingMapper.queryList  : ==>  Preparing: SELECT g.id, g.name, g.fixed, f.id AS friend_id, f.remark, f.friend_id AS user_id, u.nickname, u.avatar, u.sex, u.online FROM `grouping` AS g LEFT JOIN friend AS f ON f.grouping_id = g.id LEFT JOIN user AS u ON u.id = f.friend_id WHERE g.deleted = 0 AND g.user_id = ? ORDER BY g.fixed DESC, u.nickname ASC, f.created_at DESC
2024-05-24 10:34:45.957 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.g.mapper.GroupingMapper.queryList  : ==> Parameters: 1(Long)
2024-05-24 10:34:45.966 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.g.mapper.GroupingMapper.queryList  : <==      Total: 2
2024-05-24 10:34:49.761 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:34:49.761 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:34:49.771 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:34:50.037 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:34:50.038 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:34:50.047 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:34:50.071 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:34:50.072 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:34:50.087 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:34:50.830 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:34:50.830 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:34:50.838 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:34:50.840 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:34:50.841 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:34:50.848 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 11:03:54.352 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:03:54.353 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:03:54.361 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:03:54.712 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:03:54.714 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:03:54.723 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:03:54.743 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 11:03:54.745 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 11:03:54.760 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 11:03:56.091 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:03:56.092 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:03:56.098 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:03:56.101 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 11:03:56.101 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 11:03:56.110 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 11:10:38.292 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:10:38.293 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:10:38.304 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:10:38.564 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:10:38.565 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:10:38.575 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:10:38.592 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 11:10:38.592 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 11:10:38.601 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 11:10:39.566 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:10:39.567 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:10:39.576 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:10:39.577 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 11:10:39.578 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 11:10:39.586 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 11:14:21.312 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:14:21.313 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:14:21.323 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:14:21.687 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:14:21.687 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:14:21.696 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:14:21.713 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 11:14:21.714 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 11:14:21.725 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 11:14:22.882 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:14:22.882 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:14:22.893 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:14:22.895 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 11:14:22.896 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 11:14:22.903 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 11:18:15.528 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:18:15.528 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:18:15.538 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:18:15.915 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:18:15.915 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:18:15.924 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:18:15.946 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 11:18:15.947 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 11:18:15.962 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 11:18:16.821 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:18:16.821 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:18:16.830 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:18:16.832 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 11:18:16.832 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 11:18:16.841 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 13:04:09.274 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:04:09.278 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:04:09.289 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:04:09.689 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:04:09.689 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:04:09.704 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:04:09.723 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:04:09.724 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:04:09.742 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:04:10.801 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:04:10.801 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:04:10.811 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:04:10.815 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:04:10.816 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:04:10.826 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 13:07:36.152 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:07:36.153 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:07:36.162 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:08:20.953 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:08:20.953 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:08:20.965 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:02.774 DEBUG 5600 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:09:02.775 DEBUG 5600 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:09:02.785 DEBUG 5600 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:03.339 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:09:03.340 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:09:03.351 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:03.370 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:09:03.372 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:09:03.384 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:09:10.928 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:09:10.929 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:09:10.939 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:10.940 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:09:10.941 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:09:10.950 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 13:09:12.582 DEBUG 5600 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:09:12.583 DEBUG 5600 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:09:12.591 DEBUG 5600 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:12.866 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:09:12.866 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:09:12.876 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:12.894 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:09:12.894 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:09:12.905 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:09:13.657 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:09:13.657 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:09:13.667 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:13.668 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:09:13.668 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:09:13.677 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 13:10:23.617 DEBUG 5600 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:10:23.618 DEBUG 5600 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:10:23.628 DEBUG 5600 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:10:23.841 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:10:23.842 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:10:23.852 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:10:23.872 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:10:23.873 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:10:23.884 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:10:25.520 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:10:25.520 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:10:25.529 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:10:25.533 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:10:25.534 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:10:25.545 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 13:19:45.542 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectList  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE deleted=0 AND (email = ?) limit 1
2024-05-24 13:19:45.543 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectList  : ==> Parameters: 345929119@qq.com(String)
2024-05-24 13:19:45.553 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectList  : <==      Total: 1
2024-05-24 13:20:22.775 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:22.776 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 13:20:22.787 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:22.878 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:20:22.880 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:22.891 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:20:22.910 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 13:20:22.910 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:20:22.919 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:20:22.930 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 13:20:22.932 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:20:22.941 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 13:20:22.954 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 13:20:22.984 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T13:20:22.954(LocalDateTime), 2024-05-24T13:20:22.954(LocalDateTime)
2024-05-24 13:20:23.003 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 13:20:23.013 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 13:20:23.018 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 2(Long), 2024-05-24T13:20:23.012(LocalDateTime), 1(Long)
2024-05-24 13:20:23.033 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 13:20:23.034 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:20:23.034 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:23.044 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:20:23.048 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 13:20:23.048 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:20:23.056 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:20:23.059 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 13:20:23.060 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 13:20:23.068 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 13:20:23.131 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id, user_id, room_id, created_at, updated_at, deleted FROM conversation WHERE deleted = 0 AND (user_id = ? AND room_id = ?) AND user_id = 2 LIMIT 1
2024-05-24 13:20:23.132 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 13:20:23.137 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 0
2024-05-24 13:20:23.150 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.insert      : ==>  Preparing: INSERT INTO conversation ( user_id, room_id, created_at, updated_at ) VALUES ( ?, ?, ?, ? )
2024-05-24 13:20:23.151 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.insert      : ==> Parameters: 1(Long), 1(Long), 2024-05-24T13:20:23.149(LocalDateTime), 2024-05-24T13:20:23.149(LocalDateTime)
2024-05-24 13:20:23.172 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 13:20:23.174 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 3(Long)
2024-05-24 13:20:23.234 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 13:20:23.252 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 13:20:23.253 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:20:23.311 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 13:20:34.697 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:34.697 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:34.706 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:34.982 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:34.983 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:34.995 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:35.019 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:20:35.020 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:20:35.031 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 2
2024-05-24 13:20:36.983 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:36.983 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:36.993 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:36.995 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:36.995 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:37.005 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:37.663 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:37.664 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:37.672 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:37.673 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:37.674 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:37.683 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:38.432 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:38.433 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:38.442 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:38.444 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:38.445 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:38.454 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:38.975 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:38.975 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:38.983 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:38.986 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:38.986 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:38.995 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:39.387 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:39.387 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:39.397 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:39.399 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:39.399 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:39.409 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:39.702 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:39.702 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:39.708 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:39.710 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:39.711 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:39.719 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:40.166 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:40.166 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:40.174 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:40.177 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:40.177 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:40.185 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:40.508 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:40.508 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:40.516 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:40.517 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:40.518 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:40.527 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:42.795 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:42.796 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:42.803 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:43.247 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:43.247 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:43.255 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:43.276 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:20:43.277 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:20:43.288 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 2
2024-05-24 13:21:42.168 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:21:42.168 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 13:21:42.177 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:21:42.187 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:21:42.187 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:21:42.197 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:21:42.199 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 13:21:42.199 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:21:42.205 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:21:42.207 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 13:21:42.207 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:21:42.213 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 13:21:42.213 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 13:21:42.214 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T13:21:42.213(LocalDateTime), 2024-05-24T13:21:42.213(LocalDateTime)
2024-05-24 13:21:42.227 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 13:21:42.228 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 13:21:42.228 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 3(Long), 2024-05-24T13:21:42.228(LocalDateTime), 1(Long)
2024-05-24 13:21:42.243 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 13:21:42.243 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:21:42.244 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:21:42.254 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:21:42.255 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 13:21:42.256 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:21:42.264 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:21:42.265 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 13:21:42.266 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 13:21:42.273 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 13:21:49.049 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id, user_id, room_id, created_at, updated_at, deleted FROM conversation WHERE deleted = 0 AND (user_id = ? AND room_id = ?) AND user_id = 2 LIMIT 1
2024-05-24 13:21:49.058 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 13:21:49.065 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 0
2024-05-24 13:21:56.432 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.insert      : ==>  Preparing: INSERT INTO conversation ( user_id, room_id, created_at, updated_at ) VALUES ( ?, ?, ?, ? )
2024-05-24 13:21:56.432 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.insert      : ==> Parameters: 1(Long), 1(Long), 2024-05-24T13:21:56.432(LocalDateTime), 2024-05-24T13:21:56.432(LocalDateTime)
2024-05-24 13:21:56.450 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 13:21:56.450 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 4(Long)
2024-05-24 13:21:56.460 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 13:21:56.463 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 13:21:56.464 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:21:56.473 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 13:24:18.912 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:24:18.913 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 13:24:18.921 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:24:18.931 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:24:18.932 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:24:18.939 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:24:18.941 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 13:24:18.941 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:24:18.950 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:24:18.951 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 13:24:18.952 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:24:18.964 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 13:24:18.965 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 13:24:18.965 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T13:24:18.965(LocalDateTime), 2024-05-24T13:24:18.965(LocalDateTime)
2024-05-24 13:24:18.984 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 13:24:18.985 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 13:24:18.985 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 4(Long), 2024-05-24T13:24:18.984(LocalDateTime), 1(Long)
2024-05-24 13:24:19.001 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 13:24:19.001 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:24:19.001 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:24:19.011 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:24:19.013 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 13:24:19.013 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:24:19.019 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:24:19.022 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 13:24:19.022 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 13:24:19.029 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 13:24:31.455 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id, user_id, room_id, created_at, updated_at, deleted FROM conversation WHERE deleted = 0 AND (user_id = ? AND room_id = ?) AND user_id = 2 LIMIT 1
2024-05-24 13:24:31.456 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 13:24:31.462 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 0
2024-05-24 13:26:21.722 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.insert      : ==>  Preparing: INSERT INTO conversation ( user_id, room_id, created_at, updated_at ) VALUES ( ?, ?, ?, ? )
2024-05-24 13:26:21.723 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.insert      : ==> Parameters: 1(Long), 1(Long), 2024-05-24T13:26:21.722(LocalDateTime), 2024-05-24T13:26:21.722(LocalDateTime)
2024-05-24 13:26:21.743 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 13:26:21.744 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 5(Long)
2024-05-24 13:26:21.754 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 13:26:21.761 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 13:26:21.762 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:26:21.774 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 13:26:22.121  INFO 5600 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2024-05-24 13:26:22.127  INFO 5600 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
