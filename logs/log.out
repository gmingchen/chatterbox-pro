2024-05-28 16:09:47.619  INFO 4764 --- [main] com.slipper.SlipperApplication           : Starting SlipperApplication using Java 1.8.0_291 on SZ-PC-PDC-135 with PID 4764 (E:\github\chatterbox-pro\target\classes started by gumingchen in E:\github\chatterbox-pro)
2024-05-28 16:09:47.625 DEBUG 4764 --- [main] com.slipper.SlipperApplication           : Running with Spring Boot v2.7.18, Spring v5.3.31
2024-05-28 16:09:47.625  INFO 4764 --- [main] com.slipper.SlipperApplication           : The following 1 profile is active: "dev"
2024-05-28 16:09:48.413  INFO 4764 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-05-28 16:09:48.414  INFO 4764 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-05-28 16:09:48.467  INFO 4764 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 41 ms. Found 0 Redis repository interfaces.
2024-05-28 16:09:49.133  INFO 4764 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8820 (http)
2024-05-28 16:09:49.140  INFO 4764 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-28 16:09:49.141  INFO 4764 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.83]
2024-05-28 16:09:49.292  INFO 4764 --- [main] o.a.c.c.C.[.[localhost].[/chatterbox]    : Initializing Spring embedded WebApplicationContext
2024-05-28 16:09:49.293  INFO 4764 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1635 ms
2024-05-28 16:09:49.802  INFO 4764 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2024-05-28 16:09:50.355 ERROR 4764 --- [main] c.alibaba.druid.filter.stat.StatFilter   : slow sql 129 millis. SELECT 1[]
2024-05-28 16:09:51.213  INFO 4764 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2024-05-28 16:09:52.073 DEBUG 4764 --- [main] c.s.c.s.f.TokenAuthenticationFilter      : Filter 'tokenAuthenticationFilter' configured for use
2024-05-28 16:09:52.817  INFO 4764 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5e2b512b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ba87c11, org.springframework.security.web.context.SecurityContextPersistenceFilter@731ab49b, org.springframework.security.web.header.HeaderWriterFilter@2ca132ad, org.springframework.web.filter.CorsFilter@17d19538, org.springframework.security.web.authentication.logout.LogoutFilter@3fd9e01c, com.slipper.core.security.filter.TokenAuthenticationFilter@1926f962, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2cdcfaa6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4ff0706c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6068cda1, org.springframework.security.web.session.SessionManagementFilter@106802ea, org.springframework.security.web.access.ExceptionTranslationFilter@56e8a8a0, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6dbeaef8]
2024-05-28 16:09:53.206  INFO 4764 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8820 (http) with context path '/chatterbox'
2024-05-28 16:09:53.215  INFO 4764 --- [main] com.slipper.SlipperApplication           : Started SlipperApplication in 6.067 seconds (JVM running for 7.916)
2024-05-28 16:09:53.281  INFO 4764 --- [task-executor-1] com.slipper.core.netty.WebSocketServer   : 🤝[服务器启动端口]: 8821

2024-05-28 16:13:21.113  INFO 4764 --- [http-nio-8820-exec-1] o.a.c.c.C.[.[localhost].[/chatterbox]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-28 16:13:21.114  INFO 4764 --- [http-nio-8820-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-28 16:13:21.115  INFO 4764 --- [http-nio-8820-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-05-28 16:13:27.529 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectList  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE deleted=0 AND (email = ?) limit 1
2024-05-28 16:13:27.590 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectList  : ==> Parameters: 1240235512@qq.com(String)
2024-05-28 16:13:27.613 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectList  : <==      Total: 1
2024-05-28 16:13:27.897 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:13:27.899 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:13:27.909 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:13:28.506 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:13:28.507 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:13:28.518 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:13:28.552 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:13:28.558 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:13:28.570 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:13:31.327 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:13:31.328 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:13:31.337 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:13:31.356 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:13:31.357 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:13:31.369 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:13:33.720 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:13:33.721 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:13:33.734 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:13:33.735 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:13:33.736 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 13(Long), 10(Long)
2024-05-28 16:13:33.754 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:13:35.835 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:13:35.836 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:13:35.846 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:13:35.848 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:13:35.848 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 3(Long), 10(Long)
2024-05-28 16:13:35.858 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-28 16:13:37.640 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:13:37.641 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:13:37.650 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:13:37.652 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:13:37.654 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-28 16:13:37.664 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-28 16:16:37.823 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:16:37.823 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:16:37.836 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:16:38.240 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:16:38.241 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:16:38.251 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:16:38.271 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:16:38.273 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:16:38.289 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:16:49.855 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:16:49.856 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:16:49.884 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:16:50.164 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:16:50.166 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:16:50.178 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:16:50.204 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:16:50.205 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:16:50.221 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:16:50.645 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:16:50.645 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:16:50.656 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:16:50.658 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:16:50.659 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:16:50.671 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:17:27.917 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:17:27.918 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:17:27.927 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:17:28.260 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:17:28.261 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:17:28.271 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:17:28.291 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:17:28.293 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:17:28.304 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:17:28.724 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:17:28.725 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:17:28.735 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:17:28.737 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:17:28.737 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:17:28.748 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:22:47.395 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:22:47.396 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:22:47.406 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:22:47.723 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:22:47.724 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:22:47.734 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:22:47.761 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:22:47.762 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:22:47.775 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:22:48.974 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:22:48.974 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:22:48.989 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:22:48.991 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:22:48.992 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:22:49.003 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:23:03.641 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:03.641 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:03.650 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:03.956 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:03.957 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:03.967 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:03.988 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:23:03.989 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:23:04.000 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:23:04.989 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:04.990 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:04.997 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:04.998 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:23:04.999 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:23:05.010 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:23:33.310 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:33.311 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:33.327 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:33.630 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:33.631 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:33.649 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:33.670 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:23:33.671 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:23:33.683 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:23:34.798 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:34.799 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:34.813 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:34.814 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:23:34.815 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:23:34.830 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:23:52.223 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:52.224 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:52.233 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:52.575 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:52.576 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:52.586 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:52.609 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:23:52.611 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:23:52.625 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:23:53.541 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:53.542 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:53.553 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:53.555 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:23:53.557 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:23:53.565 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:24:02.931 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:24:02.931 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:24:02.940 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:24:03.298 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:24:03.299 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:24:03.308 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:24:03.327 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:24:03.328 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:24:03.339 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:24:04.119 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:24:04.120 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:24:04.131 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:24:04.132 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:24:04.133 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:24:04.144 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:29:30.285 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:30.285 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:30.297 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:30.324 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:29:30.325 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:29:30.344 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:29:35.178 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:35.178 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:35.189 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:35.508 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:35.509 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:35.522 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:35.546 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:29:35.548 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:29:35.561 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:29:36.507 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:36.507 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:36.508 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:36.508 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:36.516 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:36.519 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:29:36.520 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:36.520 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:29:36.533 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:29:36.543 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:29:36.544 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:29:36.558 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:29:40.460 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:40.461 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:40.469 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:40.790 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:40.790 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:40.806 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:40.830 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:29:40.831 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:29:40.845 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:29:43.155 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:43.155 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:43.156 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:43.156 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:43.165 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:43.166 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:43.167 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:29:43.168 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:29:43.178 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:29:43.187 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:29:43.188 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:29:43.206 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:31:21.158 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:31:21.159 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:31:21.169 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:31:21.190 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:31:21.190 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:31:21.202 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:31:30.817 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:31:30.817 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:31:30.827 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:31:30.845 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:31:30.845 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:31:30.859 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:33:21.620 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:33:21.620 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:33:21.630 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:33:21.949 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:33:21.950 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:33:21.962 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:33:21.980 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:33:21.981 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:33:21.992 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:33:23.233 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:33:23.234 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:33:23.243 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:33:23.243 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:33:23.244 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:33:23.255 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:33:23.258 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:33:23.258 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:33:23.264 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:33:23.264 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:33:23.268 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:33:23.274 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:46:07.740 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:46:07.741 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:46:07.752 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:46:08.094 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:46:08.095 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:46:08.105 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:46:08.123 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:46:08.124 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:46:08.135 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:46:09.098 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:46:09.098 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:46:09.101 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:46:09.102 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:46:09.105 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:46:09.107 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:46:09.107 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:46:09.111 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:46:09.117 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:46:09.130 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:46:09.130 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:46:09.143 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:47:05.161 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:47:05.162 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:47:05.172 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:47:05.650 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:47:05.651 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:47:05.664 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:47:05.685 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:47:05.686 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:47:05.703 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:47:06.161 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:47:06.161 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:47:06.162 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:47:06.162 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:47:06.170 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:47:06.171 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:47:06.175 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:47:06.176 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:47:06.185 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:47:06.192 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:47:06.192 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:47:06.203 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:47:55.360 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:47:55.361 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:47:55.370 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:03.964 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:48:03.965 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:48:03.975 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:13.427 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:48:13.427 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:48:13.440 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:30.601 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:48:30.601 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:48:30.610 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:30.953 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:48:30.954 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:48:30.963 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:30.985 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:48:30.986 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:48:31.000 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:48:31.853 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:48:31.853 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:48:31.863 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:31.863 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:48:31.863 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:48:31.865 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:48:31.865 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:48:31.873 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:31.875 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:48:31.891 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:48:31.892 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:48:31.903 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:51:19.894 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:51:19.894 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:51:19.904 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:51:20.277 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:51:20.277 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:51:20.285 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:51:20.308 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:51:20.309 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:51:20.324 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:51:20.868 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:51:20.868 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:51:20.869 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:51:20.869 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:51:20.876 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:51:20.876 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:51:20.878 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:51:20.878 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:51:20.889 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:51:20.894 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:51:20.894 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:51:20.906 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:53:05.444 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:53:05.445 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:53:05.454 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:53:05.813 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:53:05.813 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:53:05.824 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:53:05.844 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:53:05.845 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:53:05.858 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:53:06.339 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:53:06.340 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:53:06.349 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:53:06.350 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:53:06.350 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:53:06.360 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:53:06.362 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:53:06.363 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:53:06.372 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:53:06.373 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:53:06.373 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:53:06.384 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:06:39.643 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:06:39.644 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:06:39.656 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:06:39.946 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:06:39.946 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:06:39.960 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:06:39.981 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 17:06:39.981 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 17:06:39.994 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 17:06:41.096 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:06:41.096 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:06:41.097 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:06:41.097 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:06:41.097 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:06:41.098 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:06:41.106 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:06:41.106 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:06:41.107 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:06:41.110 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 17:06:41.111 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 17:06:41.123 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 17:06:41.124 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:06:41.124 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:06:41.124 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:06:41.124 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:06:41.138 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:06:41.138 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:08:34.553 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:08:34.553 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:08:34.563 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:08:34.884 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:08:34.885 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:08:34.896 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:08:34.916 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 17:08:34.916 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 17:08:34.983 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 17:08:35.728 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:08:35.728 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:08:35.729 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:08:35.729 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:08:35.740 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:08:35.740 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:08:35.742 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 17:08:35.743 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 17:08:35.758 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 17:08:35.764 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:08:35.765 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:08:36.059 ERROR 4764 --- [http-nio-8820-exec-18] c.alibaba.druid.filter.stat.StatFilter   : slow sql 294 millis. SELECT  id,url,content,type,created_at,updated_at,deleted  FROM expression 
 WHERE  deleted=0[]
2024-05-28 17:08:36.062 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:14:12.418 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:14:12.418 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:14:12.428 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:14:12.446  WARN 4764 --- [http-nio-8820-exec-19] o.s.web.servlet.PageNotFound             : No mapping for POST /chatterbox/file/upload/image
2024-05-28 17:14:12.455 ERROR 4764 --- [http-nio-8820-exec-19] com.slipper.handler.RunExceptionHandler  : No handler found for POST /chatterbox/file/upload/image

org.springframework.web.servlet.NoHandlerFoundException: No handler found for POST /chatterbox/file/upload/image
	at org.springframework.web.servlet.DispatcherServlet.noHandlerFound(DispatcherServlet.java:1287)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1050)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-28 17:14:38.789 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:14:38.790 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:14:38.800 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:14:38.803  WARN 4764 --- [http-nio-8820-exec-20] o.s.web.servlet.PageNotFound             : No mapping for POST /chatterbox/file/upload/image
2024-05-28 17:14:38.804 ERROR 4764 --- [http-nio-8820-exec-20] com.slipper.handler.RunExceptionHandler  : No handler found for POST /chatterbox/file/upload/image

org.springframework.web.servlet.NoHandlerFoundException: No handler found for POST /chatterbox/file/upload/image
	at org.springframework.web.servlet.DispatcherServlet.noHandlerFound(DispatcherServlet.java:1287)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1050)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-28 17:14:50.204 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:14:50.205 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:14:50.214 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:14:50.216  WARN 4764 --- [http-nio-8820-exec-21] o.s.web.servlet.PageNotFound             : No mapping for POST /chatterbox/file/upload/image
2024-05-28 17:14:50.216 ERROR 4764 --- [http-nio-8820-exec-21] com.slipper.handler.RunExceptionHandler  : No handler found for POST /chatterbox/file/upload/image

org.springframework.web.servlet.NoHandlerFoundException: No handler found for POST /chatterbox/file/upload/image
	at org.springframework.web.servlet.DispatcherServlet.noHandlerFound(DispatcherServlet.java:1287)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1050)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-28 17:15:46.411 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:15:46.411 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:15:46.422 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:15:46.750 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:15:46.750 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:15:46.762 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:15:46.785 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 17:15:46.786 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 17:15:46.798 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 17:15:47.943 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:15:47.944 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:15:47.946 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:15:47.946 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:15:47.954 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:15:47.954 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:15:47.954 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:15:47.954 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:15:47.959 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:15:47.961 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:15:47.964 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 17:15:47.964 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:15:47.964 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:15:47.966 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 17:15:47.968  WARN 4764 --- [http-nio-8820-exec-26] o.s.web.servlet.PageNotFound             : No mapping for POST /chatterbox/file/upload/image
2024-05-28 17:15:47.970 ERROR 4764 --- [http-nio-8820-exec-26] com.slipper.handler.RunExceptionHandler  : No handler found for POST /chatterbox/file/upload/image

org.springframework.web.servlet.NoHandlerFoundException: No handler found for POST /chatterbox/file/upload/image
	at org.springframework.web.servlet.DispatcherServlet.noHandlerFound(DispatcherServlet.java:1287)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1050)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-28 17:15:47.979 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 17:15:47.991 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:15:47.992 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:15:47.993 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:15:47.993 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:15:48.005 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:15:48.010 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:16:18.405 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:16:18.405 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:16:18.416 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:16:18.718 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:16:18.721 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:16:18.731 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:16:18.751 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 17:16:18.752 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 17:16:18.765 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 17:16:19.770 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:16:19.770 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:16:19.770 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:16:19.770 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:16:19.770 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:16:19.771 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:16:19.779 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:16:19.779 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:16:19.780 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:16:19.781 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 17:16:19.781 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 17:16:19.791 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 17:16:19.798 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:16:19.798 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:16:19.798 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:16:19.798 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:16:19.810 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:16:19.811 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:17:19.291 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:17:19.291 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:17:19.300 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:17:19.594 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:17:19.595 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:17:19.604 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:17:19.625 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 17:17:19.626 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 17:17:19.638 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 17:17:20.914 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:17:20.914 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:17:20.914 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:17:20.915 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:17:20.915 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:17:20.917 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:17:20.925 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:17:20.926 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:17:20.926 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:17:20.931 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 17:17:20.932 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 17:17:20.941 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 17:17:20.948 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:17:20.948 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:17:20.948 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:17:20.948 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:17:20.960 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:17:20.966 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:24:55.394  INFO 4764 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2024-05-28 17:24:55.399  INFO 4764 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2024-05-28 17:25:01.533  INFO 10704 --- [main] com.slipper.SlipperApplication           : Starting SlipperApplication using Java 1.8.0_291 on SZ-PC-PDC-135 with PID 10704 (E:\github\chatterbox-pro\target\classes started by gumingchen in E:\github\chatterbox-pro)
2024-05-28 17:25:01.535 DEBUG 10704 --- [main] com.slipper.SlipperApplication           : Running with Spring Boot v2.7.18, Spring v5.3.31
2024-05-28 17:25:01.535  INFO 10704 --- [main] com.slipper.SlipperApplication           : The following 1 profile is active: "dev"
2024-05-28 17:25:02.280  INFO 10704 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-05-28 17:25:02.282  INFO 10704 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-05-28 17:25:02.332  INFO 10704 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 0 Redis repository interfaces.
2024-05-28 17:25:02.991  INFO 10704 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8820 (http)
2024-05-28 17:25:02.997  INFO 10704 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-28 17:25:02.998  INFO 10704 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.83]
2024-05-28 17:25:03.141  INFO 10704 --- [main] o.a.c.c.C.[.[localhost].[/chatterbox]    : Initializing Spring embedded WebApplicationContext
2024-05-28 17:25:03.141  INFO 10704 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1564 ms
2024-05-28 17:25:03.640  INFO 10704 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2024-05-28 17:25:04.150 ERROR 10704 --- [main] c.alibaba.druid.filter.stat.StatFilter   : slow sql 117 millis. SELECT 1[]
2024-05-28 17:25:05.030  INFO 10704 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2024-05-28 17:25:05.814 DEBUG 10704 --- [main] c.s.c.s.f.TokenAuthenticationFilter      : Filter 'tokenAuthenticationFilter' configured for use
2024-05-28 17:25:06.481  INFO 10704 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@129c760d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@361fa478, org.springframework.security.web.context.SecurityContextPersistenceFilter@24258b54, org.springframework.security.web.header.HeaderWriterFilter@6f17dd06, org.springframework.web.filter.CorsFilter@180f33b2, org.springframework.security.web.authentication.logout.LogoutFilter@4b5aa48b, com.slipper.core.security.filter.TokenAuthenticationFilter@3b2c8bda, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@32428874, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3c65f00e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@391e85df, org.springframework.security.web.session.SessionManagementFilter@5a06eeef, org.springframework.security.web.access.ExceptionTranslationFilter@46fa2a7e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@72a0a60d]
2024-05-28 17:25:06.819  INFO 10704 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8820 (http) with context path '/chatterbox'
2024-05-28 17:25:06.828  INFO 10704 --- [main] com.slipper.SlipperApplication           : Started SlipperApplication in 5.732 seconds (JVM running for 6.477)
2024-05-28 17:25:06.894  INFO 10704 --- [task-executor-1] com.slipper.core.netty.WebSocketServer   : 🤝[服务器启动端口]: 8821

2024-05-28 17:27:13.437  INFO 10704 --- [http-nio-8820-exec-2] o.a.c.c.C.[.[localhost].[/chatterbox]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-28 17:27:13.438  INFO 10704 --- [http-nio-8820-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-28 17:27:13.439  INFO 10704 --- [http-nio-8820-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-05-28 17:27:14.128 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:27:14.184 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:27:14.203 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:27:25.166 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:27:25.167 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:27:25.179 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:27:30.041 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:27:30.042 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:27:30.052 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:27:54.849 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:27:54.850 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:27:54.863 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:27:55.251 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:27:55.252 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:27:55.266 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:27:55.318 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 17:27:55.325 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 17:27:55.338 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 17:27:57.117 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:27:57.117 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:27:57.118 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:27:57.118 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:27:57.118 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:27:57.118 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:27:57.126 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:27:57.130 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:27:57.131 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:27:57.191 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:27:57.191 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:27:57.192 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:27:57.192 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:27:57.217 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:27:57.218 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:27:57.231 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 17:27:57.233 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 17:27:57.244 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 17:28:01.127 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:28:01.127 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:28:01.138 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:28:01.253 ERROR 10704 --- [http-nio-8820-exec-9] com.slipper.handler.RunExceptionHandler  : 文件类型不正确

com.slipper.exception.RunException: 文件类型不正确
	at com.slipper.modules.file.service.impl.FileServiceImpl.validateFileType(FileServiceImpl.java:82)
	at com.slipper.modules.file.service.impl.FileServiceImpl.uploadFile(FileServiceImpl.java:45)
	at com.slipper.modules.file.controller.FileController.uploadFile(FileController.java:61)
	at com.slipper.modules.file.controller.FileController$$FastClassBySpringCGLIB$$76d6537d.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:792)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.slipper.core.repeat.aspect.RepeatAspect.around(RepeatAspect.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.slipper.modules.file.controller.FileController$$EnhancerBySpringCGLIB$$ee367a19.uploadFile(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-28 17:28:18.568 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:28:18.569 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:28:18.577 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:28:18.601 ERROR 10704 --- [http-nio-8820-exec-10] com.slipper.handler.RunExceptionHandler  : 文件类型不正确

com.slipper.exception.RunException: 文件类型不正确
	at com.slipper.modules.file.service.impl.FileServiceImpl.validateFileType(FileServiceImpl.java:82)
	at com.slipper.modules.file.service.impl.FileServiceImpl.uploadFile(FileServiceImpl.java:45)
	at com.slipper.modules.file.controller.FileController.uploadFile(FileController.java:61)
	at com.slipper.modules.file.controller.FileController$$FastClassBySpringCGLIB$$76d6537d.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:792)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.slipper.core.repeat.aspect.RepeatAspect.around(RepeatAspect.java:69)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.slipper.modules.file.controller.FileController$$EnhancerBySpringCGLIB$$ee367a19.uploadFile(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-28 17:31:24.965 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:31:24.966 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:31:24.975 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:31:25.726 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:31:25.729 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:31:25.740 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:31:25.762 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 17:31:25.763 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 17:31:25.775 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 19:28:11.672 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:28:11.672 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:28:11.675 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:28:11.677 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:28:11.677 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:28:11.677 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:28:11.687 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:28:11.687 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:28:11.687 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:28:11.706 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 19:28:11.707 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 19:28:11.718 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 19:28:11.718 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 19:28:11.718 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 19:28:11.718 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 19:28:11.722 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 19:28:11.736 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 19:28:11.736 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 19:32:16.763 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:32:16.764 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:32:16.775 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:33:16.816 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:33:16.817 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:33:16.829 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:33:17.152 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:33:17.153 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:33:17.162 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:33:17.184 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 19:33:17.186 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 19:33:17.197 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 19:33:19.792 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:33:19.792 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:33:19.792 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:33:19.792 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:33:19.800 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:33:19.801 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:33:19.803 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 19:33:19.803 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 19:33:19.813 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 19:33:19.819 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 19:33:19.819 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 19:33:19.832 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 19:52:13.604 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:52:13.604 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:52:13.614 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:52:23.694 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:52:23.695 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:52:23.704 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:54:35.662 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:54:35.662 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:54:35.674 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:54:36.050 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:54:36.050 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:54:36.058 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:54:36.081 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 19:54:36.082 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 19:54:36.097 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 19:54:36.984 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:54:36.984 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:54:36.995 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:54:36.995 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:54:36.995 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:54:37.003 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:54:37.005 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 19:54:37.006 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 19:54:37.015 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 19:54:37.015 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 19:54:37.016 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 19:54:37.029 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 19:56:31.097 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:56:31.097 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:56:31.109 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:56:31.418 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:56:31.419 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:56:31.428 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:56:31.453 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 19:56:31.454 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 19:56:31.473 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 19:56:33.080 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:56:33.081 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:56:33.089 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 19:56:33.090 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 19:56:33.092 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:56:33.103 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 19:56:33.106 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 19:56:33.106 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 19:56:33.114 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 19:56:33.114 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 19:56:33.116 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 19:56:33.128 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:02:56.443 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:02:56.443 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:02:56.455 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:02:56.852 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:02:56.853 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:02:56.863 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:02:56.893 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:02:56.895 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:02:56.906 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:02:57.967 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:02:57.967 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:02:57.969 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:02:57.970 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:02:57.981 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:02:57.981 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:02:57.984 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:02:57.985 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:02:57.998 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:02:58.002 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:02:58.002 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:02:58.015 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:05:08.335 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:05:08.335 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:05:08.345 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:05:08.639 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:05:08.639 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:05:08.652 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:05:08.670 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:05:08.673 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:05:08.687 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:05:09.647 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:05:09.648 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:05:09.660 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:05:09.660 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:05:09.660 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:05:09.662 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:05:09.662 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:05:09.669 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:05:09.672 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:05:09.697 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:05:09.697 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:05:09.712 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:09:05.390 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:05.390 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:05.401 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:05.802 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:05.803 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:05.813 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:05.834 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:09:05.836 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:09:05.847 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:09:07.141 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:07.141 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:07.141 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:07.141 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:07.150 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:07.150 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:07.152 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:09:07.153 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:09:07.163 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:09:07.168 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:09:07.168 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:09:07.178 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:09:15.273 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:15.273 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:15.284 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:15.790 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:15.791 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:15.802 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:15.826 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:09:15.827 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:09:15.840 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:09:16.786 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:16.786 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:16.789 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:16.789 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:16.795 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:16.797 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:16.799 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:09:16.800 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:09:16.807 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:09:16.814 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:09:16.814 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:09:16.825 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:09:19.983 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:19.983 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:19.992 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:20.425 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:20.426 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:20.435 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:20.454 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:09:20.455 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:09:20.468 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:09:21.090 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:21.090 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:21.091 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:21.091 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:21.100 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:21.100 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:21.102 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:09:21.103 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:09:21.113 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:09:21.119 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:09:21.119 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:09:21.135 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:09:31.037 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:31.038 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:31.045 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:31.423 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:31.423 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:31.435 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:31.452 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:09:31.453 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:09:31.462 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:09:32.101 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:32.101 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:09:32.102 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:32.102 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:09:32.109 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:32.112 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:09:32.114 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:09:32.114 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:09:32.123 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:09:32.132 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:09:32.133 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:09:32.146 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:12:09.581 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:09.582 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:09.592 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:09.898 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:09.898 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:09.905 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:09.923 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:12:09.924 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:12:09.935 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:12:10.431 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:10.431 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:10.439 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:10.441 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:10.442 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:12:10.442 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:10.442 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:12:10.451 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:12:10.451 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:10.470 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:12:10.470 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:12:10.480 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:12:27.204 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:27.204 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:27.223 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:27.744 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:27.745 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:27.766 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:27.794 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:12:27.796 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:12:27.808 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:12:28.319 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:28.319 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:28.320 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:28.320 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:28.329 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:28.329 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:28.331 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:12:28.331 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:12:28.341 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:12:28.354 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:12:28.354 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:12:28.367 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:12:36.554 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:36.555 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:36.564 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:36.944 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:36.945 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:36.955 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:36.976 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:12:36.977 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:12:36.987 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:12:37.442 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:37.443 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:37.443 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:37.443 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:37.450 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:37.453 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:37.455 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:12:37.455 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:12:37.464 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:12:37.470 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:12:37.471 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:12:37.483 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:12:52.838 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:52.839 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:52.847 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:53.158 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:53.158 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:53.168 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:53.191 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:12:53.193 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:12:53.206 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:12:53.748 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:53.750 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:12:53.748 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:53.750 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:12:53.758 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:53.758 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:12:53.759 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:12:53.759 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:12:53.768 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:12:53.777 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:12:53.777 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:12:53.787 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:13:16.250 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:13:16.251 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:13:16.259 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:13:16.575 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:13:16.575 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:13:16.586 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:13:16.605 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:13:16.606 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:13:16.620 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:13:17.301 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:13:17.301 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:13:17.301 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:13:17.301 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:13:17.309 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:13:17.310 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:13:17.329 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:13:17.329 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:13:17.329 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:13:17.330 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:13:17.338 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:13:17.340 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:21:51.935 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:21:51.936 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:21:51.945 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:21:52.263 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:21:52.265 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:21:52.274 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:21:52.291 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:21:52.291 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:21:52.304 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:21:54.958 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:21:54.958 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:21:54.958 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:21:54.958 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:21:54.966 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:21:54.967 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:21:54.968 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:21:54.969 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:21:54.978 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:21:54.984 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:21:54.984 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:21:54.998 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:22:01.531 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:22:01.531 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:22:01.539 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:22:01.841 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:22:01.842 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:22:01.870 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:22:01.888 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:22:01.889 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:22:01.901 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:22:02.654 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:22:02.654 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:22:02.654 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:22:02.654 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:22:02.662 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:22:02.663 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:22:02.665 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:22:02.665 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:22:02.673 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:22:02.679 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:22:02.679 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:22:02.689 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:22:19.828 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:22:19.829 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:22:19.839 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:22:20.133 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:22:20.133 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:22:20.141 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:22:20.158 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:22:20.159 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:22:20.172 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:22:20.994 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:22:20.994 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:22:20.994 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:22:20.994 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:22:21.003 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:22:21.004 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:22:21.005 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:22:21.006 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:22:21.014 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:22:21.020 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:22:21.021 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:22:21.033 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:22:40.168 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:22:40.169 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:22:40.178 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:22:40.503 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:22:40.503 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:22:40.513 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:22:40.533 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:22:40.533 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:22:40.546 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:22:41.400 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:22:41.400 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:22:41.401 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:22:41.401 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:22:41.409 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:22:41.409 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:22:41.411 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:22:41.412 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:22:41.422 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:22:41.428 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:22:41.428 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:22:41.438 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:23:12.781 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:23:12.781 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:23:12.790 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:23:13.089 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:23:13.089 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:23:13.098 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:23:13.116 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:23:13.116 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:23:13.128 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:23:13.881 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:23:13.881 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:23:13.882 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:23:13.882 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:23:13.892 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:23:13.892 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:23:13.893 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:23:13.894 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:23:13.902 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:23:13.911 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:23:13.911 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:23:13.925 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:25:35.272 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:25:35.272 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:25:35.283 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:25:35.766 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:25:35.767 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:25:35.777 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:25:35.798 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:25:35.798 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:25:35.813 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:25:36.350 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:25:36.350 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:25:36.350 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:25:36.351 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:25:36.358 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:25:36.358 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:25:36.359 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:25:36.360 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:25:36.370 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:25:36.373 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:25:36.374 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:25:36.385 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:25:40.672 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:25:40.673 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:25:40.680 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:25:40.981 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:25:40.981 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:25:40.990 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:25:41.008 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:25:41.008 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:25:41.020 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:25:41.793 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:25:41.793 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:25:41.794 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:25:41.794 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:25:41.802 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:25:41.804 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:25:41.806 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:25:41.806 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:25:41.818 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:25:41.821 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:25:41.821 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:25:41.833 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:26:07.757 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:26:07.757 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:26:07.774 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:26:08.119 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:26:08.121 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:26:08.141 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:26:08.161 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:26:08.162 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:26:08.180 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:26:08.863 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:26:08.863 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:26:08.864 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:26:08.864 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:26:08.874 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:26:08.876 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:26:08.876 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:26:08.883 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:26:08.888 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:26:08.906 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:26:08.906 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:26:08.918 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:26:47.659 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:26:47.659 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:26:47.681 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:26:48.024 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:26:48.024 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:26:48.035 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:26:48.053 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:26:48.054 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:26:48.068 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:26:52.635 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:26:52.635 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:26:52.651 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:26:53.030 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:26:53.031 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:26:53.050 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:26:53.068 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:26:53.069 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:26:53.079 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:26:53.759 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:26:53.759 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:26:53.760 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:26:53.760 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:26:53.768 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:26:53.768 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:26:53.770 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:26:53.770 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:26:53.781 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:26:53.786 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:26:53.786 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:26:53.797 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:27:06.938 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:06.939 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:06.948 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:07.383 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:07.383 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:07.397 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:07.421 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:27:07.421 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:27:07.433 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:27:09.584 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:09.584 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:09.585 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:09.585 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:09.592 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:09.593 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:09.595 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:27:09.596 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:27:09.604 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:27:09.607 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:27:09.607 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:27:09.622 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:27:22.714 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:22.714 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:22.727 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:23.179 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:23.179 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:23.189 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:23.208 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:27:23.208 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:27:23.219 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:27:27.127 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:27.127 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:27.136 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:27.445 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:27.446 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:27.456 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:27.475 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:27:27.475 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:27:27.486 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:27:27.924 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:27.925 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:27.925 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:27.925 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:27.933 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:27.933 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:27.936 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:27:27.937 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:27:27.946 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:27:27.952 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:27:27.952 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:27:27.965 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:27:43.259 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:43.259 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:43.269 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:43.632 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:43.632 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:43.643 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:43.663 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:27:43.664 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:27:43.677 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:27:44.350 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:44.350 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:44.358 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:44.358 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:44.359 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:44.366 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:44.372 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:27:44.373 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:27:44.382 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:27:44.383 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:27:44.384 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:27:44.398 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:27:46.919 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:46.920 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:46.932 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:47.302 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:47.303 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:47.312 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:47.332 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:27:47.333 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:27:47.345 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:27:48.226 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:48.226 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:27:48.226 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:48.226 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:27:48.235 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:48.236 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:27:48.238 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:27:48.238 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:27:48.249 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:27:48.255 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:27:48.255 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:27:48.268 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:28:12.472 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:28:12.473 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:28:12.483 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:28:12.846 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:28:12.846 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:28:12.858 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:28:12.880 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:28:12.881 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:28:12.894 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:28:13.742 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:28:13.742 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:28:13.742 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:28:13.742 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:28:13.751 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:28:13.753 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:28:13.755 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:28:13.756 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:28:13.764 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:28:13.768 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:28:13.768 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:28:13.784 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:29:27.828 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:29:27.828 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:29:27.835 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:29:28.216 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:29:28.217 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:29:28.226 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:29:28.244 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:29:28.245 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:29:28.259 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:29:29.143 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:29:29.143 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:29:29.143 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:29:29.143 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:29:29.153 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:29:29.155 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:29:29.157 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:29:29.157 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:29:29.167 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:29:29.174 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:29:29.174 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:29:29.187 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:29:41.873 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:29:41.874 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:29:41.947 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:29:42.361 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:29:42.361 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:29:42.389 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:29:42.419 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:29:42.420 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:29:42.448 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:29:43.136 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:29:43.136 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:29:43.137 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:29:43.137 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:29:43.163 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:29:43.164 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:29:43.165 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:29:43.165 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:29:43.175 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:29:43.186 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:29:43.187 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:29:43.205 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:30:22.667 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:30:22.668 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:30:22.676 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:30:23.068 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:30:23.068 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:30:23.077 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:30:23.097 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:30:23.097 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:30:23.107 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:30:24.105 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:30:24.105 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:30:24.105 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:30:24.105 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:30:24.113 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:30:24.115 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:30:24.116 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:30:24.116 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:30:24.126 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:30:24.131 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:30:24.131 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:30:24.144 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:30:50.914 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:30:50.914 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:30:50.923 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:30:51.316 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:30:51.317 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:30:51.331 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:30:51.348 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:30:51.348 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:30:51.358 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:30:52.086 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:30:52.086 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:30:52.086 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:30:52.086 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:30:52.095 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:30:52.095 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:30:52.097 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:30:52.097 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:30:52.107 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:30:52.114 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:30:52.114 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:30:52.124 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:31:15.359 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:31:15.359 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:31:15.368 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:31:15.957 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:31:15.957 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:31:15.966 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:31:15.984 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:31:15.984 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:31:15.995 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:31:17.104 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:31:17.104 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:31:17.104 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:31:17.104 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:31:17.113 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:31:17.115 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:31:17.116 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:31:17.116 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:31:17.125 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:31:17.135 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:31:17.135 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:31:17.146 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:32:03.962 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:32:03.963 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:32:03.973 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:32:04.292 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:32:04.293 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:32:04.303 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:32:04.323 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:32:04.324 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:32:04.335 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:32:05.828 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:32:05.829 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:32:05.830 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:32:05.830 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:32:05.836 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:32:05.838 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:32:05.838 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:32:05.842 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:32:05.847 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:32:05.861 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:32:05.861 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:32:05.871 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:33:17.332 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:33:17.332 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:33:17.340 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:33:23.280 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:33:23.281 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:33:23.288 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:33:23.755 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:33:23.756 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:33:23.767 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:33:23.786 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:33:23.786 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:33:23.797 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:33:25.127 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:33:25.127 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:33:25.134 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:33:25.136 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:33:25.136 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:33:25.137 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:33:25.137 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:33:25.147 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:33:25.147 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:33:25.167 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:33:25.168 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:33:25.177 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:41:15.963 ERROR 10704 --- [Druid-ConnectionPool-Destroy-391308380] c.alibaba.druid.filter.stat.StatFilter   : slow sql 152 millis. SELECT 1[]
2024-05-28 20:43:12.583 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:43:12.585 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:43:12.601 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:46:04.684 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:46:04.684 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:46:04.694 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:46:56.494 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:46:56.496 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:46:56.510 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:46:56.899 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:46:56.900 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:46:56.909 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:46:56.936 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:46:56.938 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:46:56.951 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:46:58.083 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:46:58.083 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:46:58.084 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:46:58.084 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:46:58.091 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:46:58.095 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:46:58.098 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:46:58.098 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:46:58.110 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:46:58.117 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:46:58.118 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:46:58.130 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 20:47:49.310 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:47:49.310 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:47:49.320 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:47:49.676 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:47:49.677 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:47:49.687 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:47:49.705 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:47:49.707 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:47:49.717 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:48:49.454 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:48:49.455 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:48:49.463 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:48:49.800 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:48:49.800 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:48:49.808 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:48:49.831 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:48:49.832 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:48:49.844 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:48:52.390 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:48:52.390 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:48:52.400 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:48:52.737 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:48:52.737 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:48:52.748 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:48:52.778 ERROR 10704 --- [http-nio-8820-exec-25] com.slipper.handler.RunExceptionHandler  : 操作太频繁,请稍后重试！

com.slipper.exception.RunException: 操作太频繁,请稍后重试！
	at com.slipper.core.repeat.aspect.RepeatAspect.around(RepeatAspect.java:64)
	at sun.reflect.GeneratedMethodAccessor103.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.slipper.modules.conversation.controller.ConversationController$$EnhancerBySpringCGLIB$$b7467383.list(<generated>)
	at sun.reflect.GeneratedMethodAccessor125.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-28 20:48:58.319 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:48:58.319 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:48:58.329 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:48:58.635 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:48:58.636 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:48:58.646 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:48:58.668 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 20:48:58.668 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 20:48:58.679 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 20:48:59.396 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:48:59.396 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 20:48:59.396 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:48:59.396 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 20:48:59.406 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:48:59.406 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 20:48:59.409 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 20:48:59.409 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 20:48:59.417 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 20:48:59.422 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 20:48:59.422 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 20:48:59.437 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 21:08:51.626 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:08:51.630 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:08:51.639 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:10:07.654 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:10:07.655 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:10:07.663 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:11:37.433 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:11:37.433 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:11:37.444 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:11:37.805 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:11:37.805 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:11:37.812 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:11:37.847 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:11:37.849 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:11:37.861 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:11:55.615 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:11:55.615 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:11:55.623 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:11:56.034 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:11:56.035 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:11:56.043 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:11:56.064 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:11:56.065 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:11:56.077 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:13:27.457 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:13:27.457 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:13:27.471 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:13:27.828 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:13:27.828 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:13:27.841 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:13:27.858 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:13:27.859 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:13:27.872 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:14:12.519 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:14:12.520 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:14:12.535 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:14:12.957 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:14:12.957 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:14:12.965 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:14:12.988 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:14:12.990 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:14:13.002 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:14:38.609 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:14:38.609 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:14:38.618 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:14:38.995 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:14:38.995 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:14:39.005 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:14:39.025 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:14:39.026 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:14:39.035 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:14:53.475 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:14:53.475 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:14:53.485 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:14:53.828 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:14:53.830 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:14:53.837 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:14:53.858 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:14:53.858 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:14:53.869 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:16:38.314 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:16:38.315 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:16:38.315 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:16:38.315 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:16:38.323 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:16:38.329 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:16:38.329 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 21:16:38.330 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 21:16:38.339 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 21:16:38.347 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 21:16:38.348 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 21:16:38.365 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 21:19:32.626 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:19:32.627 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:19:32.637 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:19:33.062 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:19:33.062 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:19:33.074 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:19:33.095 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:19:33.096 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:19:33.110 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:20:47.488 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:20:47.489 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:20:47.498 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:20:47.838 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:20:47.839 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:20:47.849 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:20:47.869 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:20:47.870 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:20:47.882 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:20:58.451 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:20:58.451 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:20:58.462 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:20:58.846 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:20:58.847 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:20:58.856 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:20:58.876 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:20:58.877 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:20:58.888 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:21:07.467 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:21:07.470 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:21:07.479 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:21:07.838 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:21:07.838 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:21:07.857 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:21:07.878 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:21:07.878 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:21:07.889 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:21:32.550 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:21:32.550 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:21:32.558 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:21:32.907 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:21:32.908 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:21:32.917 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:21:32.939 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:21:32.940 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:21:32.952 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:22:15.528 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:22:15.528 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:22:15.537 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:22:15.951 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:22:15.951 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:22:15.961 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:22:15.981 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:22:15.981 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:22:15.993 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:23:36.560 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:23:36.562 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:23:36.582 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:23:37.067 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:23:37.067 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:23:37.079 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:23:37.101 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:23:37.101 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:23:37.110 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:24:28.464 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:24:28.464 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:24:28.475 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:24:28.885 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:24:28.885 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:24:28.897 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:24:28.919 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:24:28.920 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:24:28.931 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:25:01.459 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:25:01.459 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:25:01.471 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:25:01.950 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:25:01.950 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:25:01.960 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:25:01.983 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:25:01.984 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:25:01.996 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:33:18.840 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:33:18.841 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:33:18.854 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:33:19.196 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:33:19.197 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:33:19.207 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:33:19.228 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:33:19.234 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:33:19.254 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:33:20.389 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:33:20.389 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:33:20.389 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:33:20.389 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:33:20.399 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:33:20.400 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:33:20.402 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 21:33:20.404 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 21:33:20.416 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 21:33:20.422 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 21:33:20.422 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 21:33:20.437 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 21:33:51.458 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:33:51.459 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:33:51.469 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:33:51.471 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 21:33:51.484 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 13(Long), 10(Long)
2024-05-28 21:33:51.492 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 21:36:18.825 ERROR 10704 --- [Druid-ConnectionPool-Destroy-391308380] c.alibaba.druid.filter.stat.StatFilter   : slow sql 246 millis. SELECT 1[]
2024-05-28 21:37:00.086 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:37:00.086 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:37:00.338 ERROR 10704 --- [http-nio-8820-exec-9] c.alibaba.druid.filter.stat.StatFilter   : slow sql 249 millis. SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=?  AND deleted=0[1]
2024-05-28 21:37:00.338 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:37:01.064 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:37:01.065 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:37:01.080 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:37:01.100 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 21:37:01.101 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 21:37:01.329 ERROR 10704 --- [http-nio-8820-exec-10] c.alibaba.druid.filter.stat.StatFilter   : slow sql 227 millis. SELECT c.id, c.room_id, c.user_id,
               m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage,
               m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt,
               mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex,
               rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar,
               f.id AS friendId, f.remark,
               u.id AS userId, u.nickname, u.avatar, u.sex, u.online
        FROM conversation AS c
                 LEFT JOIN room AS r ON r.id = c.room_id
                 LEFT JOIN message AS m ON m.id = r.last_message_id
                 LEFT JOIN user AS mu ON mu.id = m.user_id
                 LEFT JOIN room_group AS rg ON rg.room_id = c.room_id
                 LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id
                 LEFT JOIN user AS u
                           ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id)
                               OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id)
                 LEFT JOIN friend AS f
                           ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id
        WHERE c.deleted = 0
     
            AND c.user_id = ?
        ORDER BY m.created_at DESC[1]
2024-05-28 21:37:01.335 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 21:37:01.963 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:37:01.964 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:37:01.964 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:37:01.972 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:37:01.972 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:37:01.981 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:37:01.987 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 21:37:01.987 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 21:37:01.998 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 21:37:01.999 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 21:37:02.000 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 21:37:02.021 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 21:38:08.192 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:38:08.193 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:38:08.202 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:38:08.204 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 21:38:08.205 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 13(Long), 10(Long)
2024-05-28 21:38:08.216 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 21:40:14.254 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:40:14.254 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:40:14.264 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:40:14.267 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 21:40:14.268 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 3(Long), 10(Long)
2024-05-28 21:40:14.279 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-28 21:40:15.570 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:40:15.570 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:40:15.579 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 21:40:15.581 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 21:40:15.581 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-28 21:40:15.595 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-28 21:59:51.688 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 21:59:51.690 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 21:59:51.702 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:10:32.484 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:10:32.486 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:10:32.497 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:40:15.336 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:40:15.337 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:40:15.346 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:40:34.610 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:40:34.610 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:40:34.620 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:40:34.939 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:40:34.940 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:40:34.953 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:40:34.982 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 22:40:34.987 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 22:40:35.000 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 22:40:35.976 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:40:35.976 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:40:35.983 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:40:35.983 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:40:35.983 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:40:35.994 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:40:36.001 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 22:40:36.002 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 22:40:36.013 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 22:40:36.016 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 22:40:36.017 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 22:40:36.029 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 22:40:38.354 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:40:38.355 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:40:38.364 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:40:38.367 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 22:40:38.367 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 13(Long), 10(Long)
2024-05-28 22:40:38.378 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 22:40:40.069 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:40:40.069 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:40:40.079 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:40:40.081 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 22:40:40.082 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 3(Long), 10(Long)
2024-05-28 22:40:40.093 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-28 22:41:23.069 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:41:23.069 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:41:23.079 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:41:23.082 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 22:41:23.082 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-28 22:41:23.091 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-28 22:43:23.432 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:43:23.432 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:43:23.442 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:47:30.840 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:47:30.840 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:47:30.853 DEBUG 10704 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:47:31.159 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:47:31.159 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:47:31.167 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:47:31.188 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 22:47:31.189 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 22:47:31.201 DEBUG 10704 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 22:47:32.195 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:47:32.195 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:47:32.196 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:47:32.196 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:47:32.207 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:47:32.209 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 22:47:32.209 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 22:47:32.214 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:47:32.228 DEBUG 10704 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 22:47:32.235 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 22:47:32.236 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 22:47:32.249 DEBUG 10704 --- [http-nio-8820-exec-30] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 22:56:03.465 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:56:03.466 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:56:03.478 DEBUG 10704 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:56:03.801 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:56:03.802 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:56:03.812 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:56:03.829 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 22:56:03.831 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 22:56:03.844 DEBUG 10704 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 22:56:04.744 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:56:04.745 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:56:04.751 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:56:04.751 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:56:04.754 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:56:04.755 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 22:56:04.756 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 22:56:04.760 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:56:04.768 DEBUG 10704 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 22:56:04.780 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 22:56:04.781 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 22:56:04.793 DEBUG 10704 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 22:56:24.726 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:56:24.730 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:56:24.746 DEBUG 10704 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:56:25.065 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:56:25.065 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:56:25.075 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:56:25.091 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 22:56:25.091 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 22:56:25.104 DEBUG 10704 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 22:56:25.580 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:56:25.580 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:56:25.582 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:56:25.584 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:56:25.587 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:56:25.589 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 22:56:25.589 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 22:56:25.596 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:56:25.599 DEBUG 10704 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 22:56:25.615 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 22:56:25.615 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 22:56:25.631 DEBUG 10704 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 22:57:48.417 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:57:48.418 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:57:48.429 DEBUG 10704 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:57:48.757 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:57:48.758 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:57:48.768 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:57:48.795 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 22:57:48.797 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 22:57:48.809 DEBUG 10704 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 22:57:49.432 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:57:49.432 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:57:49.440 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:57:49.456 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 22:57:49.456 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 22:57:49.469 DEBUG 10704 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 22:57:49.630 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:57:49.630 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:57:49.640 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:57:49.643 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 22:57:49.643 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 22:57:49.654 DEBUG 10704 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 22:58:33.970 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:58:33.970 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:58:33.978 DEBUG 10704 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:58:34.328 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:58:34.328 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:58:34.344 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:58:34.363 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 22:58:34.364 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 22:58:34.373 DEBUG 10704 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 22:58:35.092 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:58:35.092 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:58:35.101 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 22:58:35.101 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 22:58:35.107 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:58:35.110 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 22:58:35.110 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 22:58:35.117 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 22:58:35.120 DEBUG 10704 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 22:58:35.137 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 22:58:35.140 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 22:58:35.161 DEBUG 10704 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 23:00:48.355 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 23:00:48.357 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 23:00:48.370 DEBUG 10704 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 23:00:48.669 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 23:00:48.670 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 23:00:48.678 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 23:00:48.697 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 23:00:48.698 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 23:00:48.709 DEBUG 10704 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 23:00:49.517 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 23:00:49.517 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 23:00:49.520 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 23:00:49.520 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 23:00:49.525 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 23:00:49.531 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 23:00:49.533 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 23:00:49.533 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 23:00:49.547 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 23:00:49.547 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 23:00:49.557 DEBUG 10704 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 23:00:49.576 DEBUG 10704 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 23:02:46.195 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 23:02:46.196 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 23:02:46.207 DEBUG 10704 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 23:02:46.747 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 23:02:46.747 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 23:02:46.758 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 23:02:46.781 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 23:02:46.782 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 23:02:46.795 DEBUG 10704 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 23:02:47.750 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 23:02:47.750 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 23:02:47.761 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 23:02:47.763 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 23:02:47.765 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 23:02:47.769 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 23:02:47.769 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 23:02:47.775 DEBUG 10704 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 23:02:47.779 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 23:02:47.799 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 23:02:47.799 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 23:02:47.821 DEBUG 10704 --- [http-nio-8820-exec-24] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 23:02:59.665 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 23:02:59.666 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 23:02:59.674 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 23:02:59.675 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 23:02:59.676 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 13(Long), 10(Long)
2024-05-28 23:02:59.687 DEBUG 10704 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 23:03:01.049 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 23:03:01.050 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 23:03:01.058 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 23:03:01.062 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 23:03:01.063 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 3(Long), 10(Long)
2024-05-28 23:03:01.071 DEBUG 10704 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
