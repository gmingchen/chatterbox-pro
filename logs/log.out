2024-05-28 16:09:47.619  INFO 4764 --- [main] com.slipper.SlipperApplication           : Starting SlipperApplication using Java 1.8.0_291 on SZ-PC-PDC-135 with PID 4764 (E:\github\chatterbox-pro\target\classes started by gumingchen in E:\github\chatterbox-pro)
2024-05-28 16:09:47.625 DEBUG 4764 --- [main] com.slipper.SlipperApplication           : Running with Spring Boot v2.7.18, Spring v5.3.31
2024-05-28 16:09:47.625  INFO 4764 --- [main] com.slipper.SlipperApplication           : The following 1 profile is active: "dev"
2024-05-28 16:09:48.413  INFO 4764 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-05-28 16:09:48.414  INFO 4764 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-05-28 16:09:48.467  INFO 4764 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 41 ms. Found 0 Redis repository interfaces.
2024-05-28 16:09:49.133  INFO 4764 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8820 (http)
2024-05-28 16:09:49.140  INFO 4764 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-28 16:09:49.141  INFO 4764 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.83]
2024-05-28 16:09:49.292  INFO 4764 --- [main] o.a.c.c.C.[.[localhost].[/chatterbox]    : Initializing Spring embedded WebApplicationContext
2024-05-28 16:09:49.293  INFO 4764 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1635 ms
2024-05-28 16:09:49.802  INFO 4764 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2024-05-28 16:09:50.355 ERROR 4764 --- [main] c.alibaba.druid.filter.stat.StatFilter   : slow sql 129 millis. SELECT 1[]
2024-05-28 16:09:51.213  INFO 4764 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2024-05-28 16:09:52.073 DEBUG 4764 --- [main] c.s.c.s.f.TokenAuthenticationFilter      : Filter 'tokenAuthenticationFilter' configured for use
2024-05-28 16:09:52.817  INFO 4764 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5e2b512b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ba87c11, org.springframework.security.web.context.SecurityContextPersistenceFilter@731ab49b, org.springframework.security.web.header.HeaderWriterFilter@2ca132ad, org.springframework.web.filter.CorsFilter@17d19538, org.springframework.security.web.authentication.logout.LogoutFilter@3fd9e01c, com.slipper.core.security.filter.TokenAuthenticationFilter@1926f962, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2cdcfaa6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4ff0706c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6068cda1, org.springframework.security.web.session.SessionManagementFilter@106802ea, org.springframework.security.web.access.ExceptionTranslationFilter@56e8a8a0, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6dbeaef8]
2024-05-28 16:09:53.206  INFO 4764 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8820 (http) with context path '/chatterbox'
2024-05-28 16:09:53.215  INFO 4764 --- [main] com.slipper.SlipperApplication           : Started SlipperApplication in 6.067 seconds (JVM running for 7.916)
2024-05-28 16:09:53.281  INFO 4764 --- [task-executor-1] com.slipper.core.netty.WebSocketServer   : ðŸ¤[æœåŠ¡å™¨å¯åŠ¨ç«¯å£]: 8821

2024-05-28 16:13:21.113  INFO 4764 --- [http-nio-8820-exec-1] o.a.c.c.C.[.[localhost].[/chatterbox]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-28 16:13:21.114  INFO 4764 --- [http-nio-8820-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-28 16:13:21.115  INFO 4764 --- [http-nio-8820-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-05-28 16:13:27.529 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectList  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE deleted=0 AND (email = ?) limit 1
2024-05-28 16:13:27.590 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectList  : ==> Parameters: 1240235512@qq.com(String)
2024-05-28 16:13:27.613 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectList  : <==      Total: 1
2024-05-28 16:13:27.897 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:13:27.899 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:13:27.909 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:13:28.506 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:13:28.507 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:13:28.518 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:13:28.552 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:13:28.558 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:13:28.570 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:13:31.327 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:13:31.328 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:13:31.337 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:13:31.356 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:13:31.357 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:13:31.369 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:13:33.720 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:13:33.721 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:13:33.734 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:13:33.735 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:13:33.736 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 13(Long), 10(Long)
2024-05-28 16:13:33.754 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:13:35.835 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:13:35.836 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:13:35.846 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:13:35.848 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:13:35.848 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 3(Long), 10(Long)
2024-05-28 16:13:35.858 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-28 16:13:37.640 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:13:37.641 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:13:37.650 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:13:37.652 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:13:37.654 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-28 16:13:37.664 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-28 16:16:37.823 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:16:37.823 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:16:37.836 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:16:38.240 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:16:38.241 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:16:38.251 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:16:38.271 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:16:38.273 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:16:38.289 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:16:49.855 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:16:49.856 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:16:49.884 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:16:50.164 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:16:50.166 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:16:50.178 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:16:50.204 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:16:50.205 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:16:50.221 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:16:50.645 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:16:50.645 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:16:50.656 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:16:50.658 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:16:50.659 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:16:50.671 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:17:27.917 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:17:27.918 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:17:27.927 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:17:28.260 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:17:28.261 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:17:28.271 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:17:28.291 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:17:28.293 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:17:28.304 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:17:28.724 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:17:28.725 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:17:28.735 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:17:28.737 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:17:28.737 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:17:28.748 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:22:47.395 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:22:47.396 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:22:47.406 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:22:47.723 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:22:47.724 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:22:47.734 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:22:47.761 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:22:47.762 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:22:47.775 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:22:48.974 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:22:48.974 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:22:48.989 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:22:48.991 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:22:48.992 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:22:49.003 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:23:03.641 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:03.641 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:03.650 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:03.956 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:03.957 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:03.967 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:03.988 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:23:03.989 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:23:04.000 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:23:04.989 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:04.990 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:04.997 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:04.998 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:23:04.999 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:23:05.010 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:23:33.310 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:33.311 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:33.327 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:33.630 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:33.631 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:33.649 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:33.670 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:23:33.671 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:23:33.683 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:23:34.798 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:34.799 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:34.813 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:34.814 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:23:34.815 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:23:34.830 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:23:52.223 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:52.224 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:52.233 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:52.575 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:52.576 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:52.586 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:52.609 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:23:52.611 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:23:52.625 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:23:53.541 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:23:53.542 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:23:53.553 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:23:53.555 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:23:53.557 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:23:53.565 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:24:02.931 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:24:02.931 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:24:02.940 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:24:03.298 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:24:03.299 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:24:03.308 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:24:03.327 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:24:03.328 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:24:03.339 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:24:04.119 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:24:04.120 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:24:04.131 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:24:04.132 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:24:04.133 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:24:04.144 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:29:30.285 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:30.285 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:30.297 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:30.324 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:29:30.325 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:29:30.344 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:29:35.178 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:35.178 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:35.189 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:35.508 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:35.509 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:35.522 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:35.546 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:29:35.548 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:29:35.561 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:29:36.507 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:36.507 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:36.508 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:36.508 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:36.516 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:36.519 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:29:36.520 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:36.520 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:29:36.533 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:29:36.543 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:29:36.544 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:29:36.558 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:29:40.460 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:40.461 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:40.469 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:40.790 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:40.790 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:40.806 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:40.830 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:29:40.831 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:29:40.845 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:29:43.155 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:43.155 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:43.156 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:29:43.156 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:29:43.165 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:43.166 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:29:43.167 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:29:43.168 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:29:43.178 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:29:43.187 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:29:43.188 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:29:43.206 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:31:21.158 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:31:21.159 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:31:21.169 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:31:21.190 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:31:21.190 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:31:21.202 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:31:30.817 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:31:30.817 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:31:30.827 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:31:30.845 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:31:30.845 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:31:30.859 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:33:21.620 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:33:21.620 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:33:21.630 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:33:21.949 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:33:21.950 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:33:21.962 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:33:21.980 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:33:21.981 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:33:21.992 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:33:23.233 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:33:23.234 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:33:23.243 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:33:23.243 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:33:23.244 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:33:23.255 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:33:23.258 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:33:23.258 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:33:23.264 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:33:23.264 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:33:23.268 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:33:23.274 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:46:07.740 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:46:07.741 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:46:07.752 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:46:08.094 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:46:08.095 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:46:08.105 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:46:08.123 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:46:08.124 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:46:08.135 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:46:09.098 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:46:09.098 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:46:09.101 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:46:09.102 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:46:09.105 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:46:09.107 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:46:09.107 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:46:09.111 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:46:09.117 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:46:09.130 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:46:09.130 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:46:09.143 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:47:05.161 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:47:05.162 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:47:05.172 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:47:05.650 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:47:05.651 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:47:05.664 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:47:05.685 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:47:05.686 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:47:05.703 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:47:06.161 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:47:06.161 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:47:06.162 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:47:06.162 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:47:06.170 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:47:06.171 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:47:06.175 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:47:06.176 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:47:06.185 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:47:06.192 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:47:06.192 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:47:06.203 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:47:55.360 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:47:55.361 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:47:55.370 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:03.964 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:48:03.965 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:48:03.975 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:13.427 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:48:13.427 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:48:13.440 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:30.601 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:48:30.601 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:48:30.610 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:30.953 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:48:30.954 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:48:30.963 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:30.985 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:48:30.986 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:48:31.000 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:48:31.853 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:48:31.853 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:48:31.863 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:31.863 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:48:31.863 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:48:31.865 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:48:31.865 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:48:31.873 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:48:31.875 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:48:31.891 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:48:31.892 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:48:31.903 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:51:19.894 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:51:19.894 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:51:19.904 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:51:20.277 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:51:20.277 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:51:20.285 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:51:20.308 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:51:20.309 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:51:20.324 DEBUG 4764 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:51:20.868 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:51:20.868 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:51:20.869 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:51:20.869 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:51:20.876 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:51:20.876 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:51:20.878 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:51:20.878 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:51:20.889 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:51:20.894 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:51:20.894 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:51:20.906 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 16:53:05.444 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:53:05.445 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:53:05.454 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:53:05.813 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:53:05.813 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:53:05.824 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:53:05.844 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 16:53:05.845 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 16:53:05.858 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 16:53:06.339 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:53:06.340 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:53:06.349 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:53:06.350 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 16:53:06.350 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 16:53:06.360 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 16:53:06.362 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 16:53:06.363 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 16:53:06.372 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 16:53:06.373 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 16:53:06.373 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 16:53:06.384 DEBUG 4764 --- [http-nio-8820-exec-9] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:06:39.643 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:06:39.644 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:06:39.656 DEBUG 4764 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:06:39.946 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:06:39.946 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:06:39.960 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:06:39.981 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 17:06:39.981 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 17:06:39.994 DEBUG 4764 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 17:06:41.096 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:06:41.096 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:06:41.097 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:06:41.097 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:06:41.097 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:06:41.098 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:06:41.106 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:06:41.106 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:06:41.107 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:06:41.110 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 17:06:41.111 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 17:06:41.123 DEBUG 4764 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 17:06:41.124 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:06:41.124 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:06:41.124 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:06:41.124 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:06:41.138 DEBUG 4764 --- [http-nio-8820-exec-14] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:06:41.138 DEBUG 4764 --- [http-nio-8820-exec-13] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:08:34.553 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:08:34.553 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:08:34.563 DEBUG 4764 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:08:34.884 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:08:34.885 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:08:34.896 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:08:34.916 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 17:08:34.916 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 17:08:34.983 DEBUG 4764 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 17:08:35.728 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:08:35.728 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:08:35.729 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:08:35.729 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:08:35.740 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:08:35.740 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:08:35.742 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 17:08:35.743 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 17:08:35.758 DEBUG 4764 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 17:08:35.764 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:08:35.765 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:08:36.059 ERROR 4764 --- [http-nio-8820-exec-18] c.alibaba.druid.filter.stat.StatFilter   : slow sql 294 millis. SELECT  id,url,content,type,created_at,updated_at,deleted  FROM expression 
 WHERE  deleted=0[]
2024-05-28 17:08:36.062 DEBUG 4764 --- [http-nio-8820-exec-18] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:14:12.418 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:14:12.418 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:14:12.428 DEBUG 4764 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:14:12.446  WARN 4764 --- [http-nio-8820-exec-19] o.s.web.servlet.PageNotFound             : No mapping for POST /chatterbox/file/upload/image
2024-05-28 17:14:12.455 ERROR 4764 --- [http-nio-8820-exec-19] com.slipper.handler.RunExceptionHandler  : No handler found for POST /chatterbox/file/upload/image

org.springframework.web.servlet.NoHandlerFoundException: No handler found for POST /chatterbox/file/upload/image
	at org.springframework.web.servlet.DispatcherServlet.noHandlerFound(DispatcherServlet.java:1287)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1050)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-28 17:14:38.789 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:14:38.790 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:14:38.800 DEBUG 4764 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:14:38.803  WARN 4764 --- [http-nio-8820-exec-20] o.s.web.servlet.PageNotFound             : No mapping for POST /chatterbox/file/upload/image
2024-05-28 17:14:38.804 ERROR 4764 --- [http-nio-8820-exec-20] com.slipper.handler.RunExceptionHandler  : No handler found for POST /chatterbox/file/upload/image

org.springframework.web.servlet.NoHandlerFoundException: No handler found for POST /chatterbox/file/upload/image
	at org.springframework.web.servlet.DispatcherServlet.noHandlerFound(DispatcherServlet.java:1287)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1050)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-28 17:14:50.204 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:14:50.205 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:14:50.214 DEBUG 4764 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:14:50.216  WARN 4764 --- [http-nio-8820-exec-21] o.s.web.servlet.PageNotFound             : No mapping for POST /chatterbox/file/upload/image
2024-05-28 17:14:50.216 ERROR 4764 --- [http-nio-8820-exec-21] com.slipper.handler.RunExceptionHandler  : No handler found for POST /chatterbox/file/upload/image

org.springframework.web.servlet.NoHandlerFoundException: No handler found for POST /chatterbox/file/upload/image
	at org.springframework.web.servlet.DispatcherServlet.noHandlerFound(DispatcherServlet.java:1287)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1050)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-28 17:15:46.411 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:15:46.411 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:15:46.422 DEBUG 4764 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:15:46.750 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:15:46.750 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:15:46.762 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:15:46.785 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 17:15:46.786 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 17:15:46.798 DEBUG 4764 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 17:15:47.943 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:15:47.944 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:15:47.946 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:15:47.946 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:15:47.954 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:15:47.954 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:15:47.954 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:15:47.954 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:15:47.959 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:15:47.961 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:15:47.964 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 17:15:47.964 DEBUG 4764 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:15:47.964 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:15:47.966 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 17:15:47.968  WARN 4764 --- [http-nio-8820-exec-26] o.s.web.servlet.PageNotFound             : No mapping for POST /chatterbox/file/upload/image
2024-05-28 17:15:47.970 ERROR 4764 --- [http-nio-8820-exec-26] com.slipper.handler.RunExceptionHandler  : No handler found for POST /chatterbox/file/upload/image

org.springframework.web.servlet.NoHandlerFoundException: No handler found for POST /chatterbox/file/upload/image
	at org.springframework.web.servlet.DispatcherServlet.noHandlerFound(DispatcherServlet.java:1287)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1050)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-28 17:15:47.979 DEBUG 4764 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 17:15:47.991 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:15:47.992 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:15:47.993 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:15:47.993 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:15:48.005 DEBUG 4764 --- [http-nio-8820-exec-25] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:15:48.010 DEBUG 4764 --- [http-nio-8820-exec-27] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:16:18.405 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:16:18.405 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:16:18.416 DEBUG 4764 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:16:18.718 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:16:18.721 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:16:18.731 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:16:18.751 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 17:16:18.752 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 17:16:18.765 DEBUG 4764 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 17:16:19.770 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:16:19.770 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:16:19.770 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:16:19.770 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:16:19.770 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:16:19.771 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:16:19.779 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:16:19.779 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:16:19.780 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:16:19.781 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 17:16:19.781 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 17:16:19.791 DEBUG 4764 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 17:16:19.798 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:16:19.798 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:16:19.798 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:16:19.798 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:16:19.810 DEBUG 4764 --- [http-nio-8820-exec-1] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:16:19.811 DEBUG 4764 --- [http-nio-8820-exec-2] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:17:19.291 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:17:19.291 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:17:19.300 DEBUG 4764 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:17:19.594 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:17:19.595 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:17:19.604 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:17:19.625 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-28 17:17:19.626 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-28 17:17:19.638 DEBUG 4764 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-28 17:17:20.914 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:17:20.914 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:17:20.914 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-28 17:17:20.915 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:17:20.915 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:17:20.917 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-28 17:17:20.925 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:17:20.926 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:17:20.926 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-28 17:17:20.931 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-28 17:17:20.932 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-28 17:17:20.941 DEBUG 4764 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-28 17:17:20.948 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:17:20.948 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : ==>  Preparing: SELECT id,url,content,type,created_at,updated_at,deleted FROM expression WHERE deleted=0
2024-05-28 17:17:20.948 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:17:20.948 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : ==> Parameters: 
2024-05-28 17:17:20.960 DEBUG 4764 --- [http-nio-8820-exec-7] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:17:20.966 DEBUG 4764 --- [http-nio-8820-exec-8] c.s.m.e.m.ExpressionMapper.selectList    : <==      Total: 165
2024-05-28 17:24:55.394  INFO 4764 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2024-05-28 17:24:55.399  INFO 4764 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
