2024-05-24 05:29:37.854 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 527 millis. SELECT 1[]
2024-05-24 05:29:38.148 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 253 millis. SELECT 1[]
2024-05-24 05:29:38.422 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 250 millis. SELECT 1[]
2024-05-24 05:29:38.688 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 252 millis. SELECT 1[]
2024-05-24 06:31:41.564 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 101 millis. SELECT 1[]
2024-05-24 07:03:43.276 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 103 millis. SELECT 1[]
2024-05-24 08:25:47.089 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 141 millis. SELECT 1[]
2024-05-24 08:25:47.281 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 163 millis. SELECT 1[]
2024-05-24 08:47:48.770 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 382 millis. SELECT 1[]
2024-05-24 08:51:49.417 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 401 millis. SELECT 1[]
2024-05-24 08:51:49.629 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 212 millis. SELECT 1[]
2024-05-24 08:51:49.939 ERROR 21492 --- [Druid-ConnectionPool-Destroy-734097378] c.alibaba.druid.filter.stat.StatFilter   : slow sql 308 millis. SELECT 1[]
2024-05-24 08:57:26.819 DEBUG 21492 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:26.822 DEBUG 21492 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:26.834 DEBUG 21492 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:26.860 DEBUG 21492 --- [http-nio-8820-exec-6] c.s.m.g.mapper.GroupingMapper.queryList  : ==>  Preparing: SELECT g.id, g.name, g.fixed, f.id AS friend_id, f.remark, f.friend_id AS user_id, u.nickname, u.avatar, u.sex, u.online FROM `grouping` AS g LEFT JOIN friend AS f ON f.grouping_id = g.id LEFT JOIN user AS u ON u.id = f.friend_id WHERE g.deleted = 0 AND g.user_id = ? ORDER BY g.fixed DESC, u.nickname ASC, f.created_at DESC
2024-05-24 08:57:26.860 DEBUG 21492 --- [http-nio-8820-exec-6] c.s.m.g.mapper.GroupingMapper.queryList  : ==> Parameters: 1(Long)
2024-05-24 08:57:26.872 DEBUG 21492 --- [http-nio-8820-exec-6] c.s.m.g.mapper.GroupingMapper.queryList  : <==      Total: 2
2024-05-24 08:57:27.814 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:27.814 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:27.823 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:40.011 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectList  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE deleted=0 AND (email = ?) limit 1
2024-05-24 08:57:40.017 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectList  : ==> Parameters: 1240235512@qq.com(String)
2024-05-24 08:57:40.027 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectList  : <==      Total: 1
2024-05-24 08:57:40.222 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:40.223 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:40.232 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:40.416 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:40.416 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:40.427 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:40.446 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:57:40.448 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:57:40.459 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 08:57:45.461 DEBUG 21492 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:45.462 DEBUG 21492 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:45.469 DEBUG 21492 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:45.644 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:45.644 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:45.652 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:45.670 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:57:45.671 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:57:45.682 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 08:57:50.028 DEBUG 21492 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:50.028 DEBUG 21492 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:50.037 DEBUG 21492 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:50.390 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:57:50.390 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:57:50.399 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:57:50.417 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:57:50.418 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:57:50.428 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 08:58:54.094 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:58:54.094 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:58:54.105 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:58:54.112 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:58:54.113 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:58:54.121 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:58:54.125 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:58:54.125 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:58:54.135 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 08:58:54.139 ERROR 21492 --- [http-nio-8820-exec-17] com.slipper.handler.RunExceptionHandler  : 操作太频繁,请稍后重试！

com.slipper.exception.RunException: 操作太频繁,请稍后重试！
	at com.slipper.core.repeat.aspect.RepeatAspect.around(RepeatAspect.java:64)
	at sun.reflect.GeneratedMethodAccessor69.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.slipper.modules.conversation.controller.ConversationController$$EnhancerBySpringCGLIB$$6afad7c7.list(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-24 08:58:55.950 DEBUG 21492 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:58:55.950 DEBUG 21492 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:58:55.958 DEBUG 21492 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:58:56.275 DEBUG 21492 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:58:56.276 DEBUG 21492 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:58:56.286 DEBUG 21492 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:58:56.296 ERROR 21492 --- [http-nio-8820-exec-19] com.slipper.handler.RunExceptionHandler  : 操作太频繁,请稍后重试！

com.slipper.exception.RunException: 操作太频繁,请稍后重试！
	at com.slipper.core.repeat.aspect.RepeatAspect.around(RepeatAspect.java:64)
	at sun.reflect.GeneratedMethodAccessor69.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.slipper.modules.conversation.controller.ConversationController$$EnhancerBySpringCGLIB$$6afad7c7.list(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-24 08:59:02.261 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:02.262 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:02.270 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:02.615 DEBUG 21492 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:02.616 DEBUG 21492 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:02.623 DEBUG 21492 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:02.642 DEBUG 21492 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:59:02.643 DEBUG 21492 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:59:02.654 DEBUG 21492 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 08:59:35.633 DEBUG 21492 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:35.633 DEBUG 21492 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:35.641 DEBUG 21492 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:35.953 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:35.953 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:35.962 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:35.982 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:59:35.983 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:59:35.993 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 08:59:37.142 DEBUG 21492 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:37.143 DEBUG 21492 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:37.151 DEBUG 21492 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:37.293 DEBUG 21492 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:37.294 DEBUG 21492 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:37.302 DEBUG 21492 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:37.312 ERROR 21492 --- [http-nio-8820-exec-25] com.slipper.handler.RunExceptionHandler  : 操作太频繁,请稍后重试！

com.slipper.exception.RunException: 操作太频繁,请稍后重试！
	at com.slipper.core.repeat.aspect.RepeatAspect.around(RepeatAspect.java:64)
	at sun.reflect.GeneratedMethodAccessor69.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.slipper.modules.conversation.controller.ConversationController$$EnhancerBySpringCGLIB$$6afad7c7.list(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-24 08:59:38.902 DEBUG 21492 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:38.903 DEBUG 21492 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:38.912 DEBUG 21492 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:39.043 DEBUG 21492 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 08:59:39.043 DEBUG 21492 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 08:59:39.054 DEBUG 21492 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 08:59:39.072 DEBUG 21492 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 08:59:39.073 DEBUG 21492 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 08:59:39.082 DEBUG 21492 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 09:11:56.167 DEBUG 21492 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:11:56.168 DEBUG 21492 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:11:56.176 DEBUG 21492 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:11:56.514 DEBUG 21492 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:11:56.514 DEBUG 21492 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:11:56.525 DEBUG 21492 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:11:56.545 DEBUG 21492 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 09:11:56.546 DEBUG 21492 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 09:11:56.559 DEBUG 21492 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 09:11:58.851 DEBUG 21492 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:11:58.852 DEBUG 21492 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:11:58.861 DEBUG 21492 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:11:58.881 DEBUG 21492 --- [http-nio-8820-exec-30] c.s.m.g.mapper.GroupingMapper.queryList  : ==>  Preparing: SELECT g.id, g.name, g.fixed, f.id AS friend_id, f.remark, f.friend_id AS user_id, u.nickname, u.avatar, u.sex, u.online FROM `grouping` AS g LEFT JOIN friend AS f ON f.grouping_id = g.id LEFT JOIN user AS u ON u.id = f.friend_id WHERE g.deleted = 0 AND g.user_id = ? ORDER BY g.fixed DESC, u.nickname ASC, f.created_at DESC
2024-05-24 09:11:58.882 DEBUG 21492 --- [http-nio-8820-exec-30] c.s.m.g.mapper.GroupingMapper.queryList  : ==> Parameters: 1(Long)
2024-05-24 09:11:58.892 DEBUG 21492 --- [http-nio-8820-exec-30] c.s.m.g.mapper.GroupingMapper.queryList  : <==      Total: 2
2024-05-24 09:12:17.104 DEBUG 21492 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:12:17.105 DEBUG 21492 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:12:17.115 DEBUG 21492 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:12:17.590 DEBUG 21492 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:12:17.591 DEBUG 21492 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:12:17.599 DEBUG 21492 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:12:17.618 DEBUG 21492 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 09:12:17.619 DEBUG 21492 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 09:12:17.633 DEBUG 21492 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 09:40:19.697 DEBUG 21492 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:40:19.698 DEBUG 21492 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:40:19.708 DEBUG 21492 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:40:19.781 DEBUG 21492 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:40:19.785 DEBUG 21492 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 2(Long), 1(Long)
2024-05-24 09:40:19.796 DEBUG 21492 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:40:34.397 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:40:34.398 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:40:34.407 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:40:34.409 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:40:34.411 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long)
2024-05-24 09:40:34.419 DEBUG 21492 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:40:35.524 DEBUG 21492 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:40:35.525 DEBUG 21492 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:40:35.531 DEBUG 21492 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:40:35.533 DEBUG 21492 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:40:35.533 DEBUG 21492 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long)
2024-05-24 09:40:35.543 DEBUG 21492 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:40:36.224 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:40:36.224 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:40:36.233 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:40:36.235 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:40:36.235 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long)
2024-05-24 09:40:36.246 DEBUG 21492 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:40:37.020 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:40:37.020 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:40:37.029 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:40:37.031 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:40:37.032 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long)
2024-05-24 09:40:37.042 DEBUG 21492 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:40:38.114 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:40:38.115 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:40:38.122 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:40:38.124 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:40:38.124 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long)
2024-05-24 09:40:38.133 DEBUG 21492 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:42:20.653 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:42:20.655 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:42:20.669 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:42:20.671 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:42:20.672 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long)
2024-05-24 09:42:20.685 DEBUG 21492 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:42:23.394 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:42:23.394 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:42:23.402 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:42:23.404 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:42:23.404 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 2(Long), 1(Long)
2024-05-24 09:42:23.412 DEBUG 21492 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:42:27.509 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:42:27.509 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:42:27.516 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:42:27.518 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:42:27.518 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 1(Long)
2024-05-24 09:42:27.525 DEBUG 21492 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 09:42:30.627 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:42:30.628 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:42:30.635 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:42:30.637 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:42:30.637 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 2(Long), 1(Long)
2024-05-24 09:42:30.647 DEBUG 21492 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:42:45.602 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:42:45.602 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:42:45.612 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:42:45.614 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 09:42:45.616 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 2(Long), 1(Long)
2024-05-24 09:42:45.627 DEBUG 21492 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 09:54:06.174 DEBUG 21492 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:54:06.175 DEBUG 21492 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:54:06.186 DEBUG 21492 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:54:06.632 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 09:54:06.632 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 09:54:06.641 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 09:54:06.659 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 09:54:06.660 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 09:54:06.671 DEBUG 21492 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:09:37.065  INFO 5600 --- [main] com.slipper.SlipperApplication           : Starting SlipperApplication using Java 1.8.0_291 on SZ-PC-PDC-135 with PID 5600 (E:\github\chatterbox-pro\target\classes started by gumingchen in E:\github\chatterbox-pro)
2024-05-24 10:09:37.067 DEBUG 5600 --- [main] com.slipper.SlipperApplication           : Running with Spring Boot v2.7.18, Spring v5.3.31
2024-05-24 10:09:37.067  INFO 5600 --- [main] com.slipper.SlipperApplication           : The following 1 profile is active: "dev"
2024-05-24 10:09:37.825  INFO 5600 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-05-24 10:09:37.827  INFO 5600 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-05-24 10:09:37.885  INFO 5600 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 43 ms. Found 0 Redis repository interfaces.
2024-05-24 10:09:38.523  INFO 5600 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8820 (http)
2024-05-24 10:09:38.529  INFO 5600 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-24 10:09:38.530  INFO 5600 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.83]
2024-05-24 10:09:38.683  INFO 5600 --- [main] o.a.c.c.C.[.[localhost].[/chatterbox]    : Initializing Spring embedded WebApplicationContext
2024-05-24 10:09:38.683  INFO 5600 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1585 ms
2024-05-24 10:09:39.178  INFO 5600 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2024-05-24 10:09:39.689 ERROR 5600 --- [main] c.alibaba.druid.filter.stat.StatFilter   : slow sql 111 millis. SELECT 1[]
2024-05-24 10:09:40.866  INFO 5600 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2024-05-24 10:09:41.586 DEBUG 5600 --- [main] c.s.c.s.f.TokenAuthenticationFilter      : Filter 'tokenAuthenticationFilter' configured for use
2024-05-24 10:09:42.236  INFO 5600 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@57e57dc5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5bba9949, org.springframework.security.web.context.SecurityContextPersistenceFilter@4ebed2b3, org.springframework.security.web.header.HeaderWriterFilter@111cbcda, org.springframework.web.filter.CorsFilter@147059f8, org.springframework.security.web.authentication.logout.LogoutFilter@5e763c07, com.slipper.core.security.filter.TokenAuthenticationFilter@472719df, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5909285b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2059f785, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@744fb110, org.springframework.security.web.session.SessionManagementFilter@5cf072ea, org.springframework.security.web.access.ExceptionTranslationFilter@b3004e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@69419d59]
2024-05-24 10:09:42.554  INFO 5600 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8820 (http) with context path '/chatterbox'
2024-05-24 10:09:42.562  INFO 5600 --- [main] com.slipper.SlipperApplication           : Started SlipperApplication in 5.933 seconds (JVM running for 7.231)
2024-05-24 10:09:42.630  INFO 5600 --- [task-executor-1] com.slipper.core.netty.WebSocketServer   : 🤝[服务器启动端口]: 8821

2024-05-24 10:11:12.411  INFO 5600 --- [http-nio-8820-exec-1] o.a.c.c.C.[.[localhost].[/chatterbox]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-24 10:11:12.411  INFO 5600 --- [http-nio-8820-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-24 10:11:12.412  INFO 5600 --- [http-nio-8820-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-05-24 10:11:21.549 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectList  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE deleted=0 AND (email = ?) limit 1
2024-05-24 10:11:21.603 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectList  : ==> Parameters: 1240235512@qq.com(String)
2024-05-24 10:11:21.624 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectList  : <==      Total: 1
2024-05-24 10:11:21.908 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:11:21.909 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:11:21.919 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:11:22.359 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:11:22.360 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:11:22.370 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:11:22.396 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:11:22.403 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:11:22.415 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:11:27.902 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:11:27.903 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:11:27.913 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:11:27.935 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.g.mapper.GroupingMapper.queryList  : ==>  Preparing: SELECT g.id, g.name, g.fixed, f.id AS friend_id, f.remark, f.friend_id AS user_id, u.nickname, u.avatar, u.sex, u.online FROM `grouping` AS g LEFT JOIN friend AS f ON f.grouping_id = g.id LEFT JOIN user AS u ON u.id = f.friend_id WHERE g.deleted = 0 AND g.user_id = ? ORDER BY g.fixed DESC, u.nickname ASC, f.created_at DESC
2024-05-24 10:11:27.936 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.g.mapper.GroupingMapper.queryList  : ==> Parameters: 1(Long)
2024-05-24 10:11:27.945 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.g.mapper.GroupingMapper.queryList  : <==      Total: 2
2024-05-24 10:13:44.157 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:13:44.158 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:13:44.168 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:13:44.402 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:13:44.402 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:13:44.412 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:13:44.427 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:13:44.429 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:13:44.439 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:13:46.010 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:13:46.011 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:13:46.021 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:13:46.039 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:13:46.040 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:13:46.050 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:15:22.718 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:15:22.718 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:15:22.728 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:15:22.967 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:15:22.968 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:15:22.978 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:15:22.998 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:15:22.999 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:15:23.009 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:15:24.808 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:15:24.809 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:15:24.817 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:15:24.820 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:15:24.821 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:15:24.832 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:16:06.341 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:16:06.342 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:16:06.352 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:16:06.793 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:16:06.794 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:16:06.805 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:16:06.824 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:16:06.825 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:16:06.838 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:16:09.055 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:16:09.056 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:16:09.066 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:16:09.068 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:16:09.068 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:16:09.078 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:16:32.857 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:16:32.857 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:16:32.868 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:16:33.306 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:16:33.308 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:16:33.317 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:16:33.335 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:16:33.336 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:16:33.349 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:16:34.289 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:16:34.290 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:16:34.301 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:16:34.303 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:16:34.303 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:16:34.315 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:22:08.054 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:22:08.055 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:22:08.066 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:28:58.993 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:28:58.994 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:28:59.003 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:28:59.256 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:28:59.257 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:28:59.267 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:28:59.286 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:28:59.287 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:28:59.301 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:29:15.365 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:15.366 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:15.376 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:15.391 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:29:15.392 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:29:15.403 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:29:16.852 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:16.853 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:16.862 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:17.143 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:17.143 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:17.152 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:17.163 ERROR 5600 --- [http-nio-8820-exec-23] com.slipper.handler.RunExceptionHandler  : 操作太频繁,请稍后重试！

com.slipper.exception.RunException: 操作太频繁,请稍后重试！
	at com.slipper.core.repeat.aspect.RepeatAspect.around(RepeatAspect.java:64)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.slipper.modules.conversation.controller.ConversationController$$EnhancerBySpringCGLIB$$17a41668.list(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-24 10:29:19.743 DEBUG 5600 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:19.744 DEBUG 5600 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:19.751 DEBUG 5600 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:19.997 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:19.997 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:20.007 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:20.027 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:29:20.028 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:29:20.039 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:29:21.166 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:21.167 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:21.177 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:21.179 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:29:21.179 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:29:21.189 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:29:35.533 DEBUG 5600 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:35.534 DEBUG 5600 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:35.544 DEBUG 5600 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:35.800 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:35.801 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:35.810 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:35.829 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:29:35.830 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:29:35.840 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:29:37.916 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:29:37.917 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:29:37.928 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:29:37.929 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:29:37.929 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:29:37.940 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:32:27.694 DEBUG 5600 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:32:27.695 DEBUG 5600 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:32:27.704 DEBUG 5600 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:32:27.940 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:32:27.941 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:32:27.950 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:32:27.967 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:32:27.967 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:32:27.981 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:32:28.940 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:32:28.940 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:32:28.947 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:32:28.948 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:32:28.949 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:32:28.958 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 10:34:45.930 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:34:45.931 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:34:45.939 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:34:45.957 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.g.mapper.GroupingMapper.queryList  : ==>  Preparing: SELECT g.id, g.name, g.fixed, f.id AS friend_id, f.remark, f.friend_id AS user_id, u.nickname, u.avatar, u.sex, u.online FROM `grouping` AS g LEFT JOIN friend AS f ON f.grouping_id = g.id LEFT JOIN user AS u ON u.id = f.friend_id WHERE g.deleted = 0 AND g.user_id = ? ORDER BY g.fixed DESC, u.nickname ASC, f.created_at DESC
2024-05-24 10:34:45.957 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.g.mapper.GroupingMapper.queryList  : ==> Parameters: 1(Long)
2024-05-24 10:34:45.966 DEBUG 5600 --- [http-nio-8820-exec-3] c.s.m.g.mapper.GroupingMapper.queryList  : <==      Total: 2
2024-05-24 10:34:49.761 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:34:49.761 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:34:49.771 DEBUG 5600 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:34:50.037 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:34:50.038 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:34:50.047 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:34:50.071 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 10:34:50.072 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 10:34:50.087 DEBUG 5600 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 10:34:50.830 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 10:34:50.830 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 10:34:50.838 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 10:34:50.840 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 10:34:50.841 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 10:34:50.848 DEBUG 5600 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 11:03:54.352 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:03:54.353 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:03:54.361 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:03:54.712 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:03:54.714 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:03:54.723 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:03:54.743 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 11:03:54.745 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 11:03:54.760 DEBUG 5600 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 11:03:56.091 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:03:56.092 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:03:56.098 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:03:56.101 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 11:03:56.101 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 11:03:56.110 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 11:10:38.292 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:10:38.293 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:10:38.304 DEBUG 5600 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:10:38.564 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:10:38.565 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:10:38.575 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:10:38.592 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 11:10:38.592 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 11:10:38.601 DEBUG 5600 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 11:10:39.566 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:10:39.567 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:10:39.576 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:10:39.577 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 11:10:39.578 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 11:10:39.586 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 11:14:21.312 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:14:21.313 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:14:21.323 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:14:21.687 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:14:21.687 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:14:21.696 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:14:21.713 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 11:14:21.714 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 11:14:21.725 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 11:14:22.882 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:14:22.882 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:14:22.893 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:14:22.895 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 11:14:22.896 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 11:14:22.903 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 11:18:15.528 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:18:15.528 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:18:15.538 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:18:15.915 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:18:15.915 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:18:15.924 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:18:15.946 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 11:18:15.947 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 11:18:15.962 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 11:18:16.821 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 11:18:16.821 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 11:18:16.830 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 11:18:16.832 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 11:18:16.832 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 11:18:16.841 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 13:04:09.274 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:04:09.278 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:04:09.289 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:04:09.689 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:04:09.689 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:04:09.704 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:04:09.723 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:04:09.724 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:04:09.742 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:04:10.801 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:04:10.801 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:04:10.811 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:04:10.815 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:04:10.816 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:04:10.826 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 13:07:36.152 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:07:36.153 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:07:36.162 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:08:20.953 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:08:20.953 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:08:20.965 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:02.774 DEBUG 5600 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:09:02.775 DEBUG 5600 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:09:02.785 DEBUG 5600 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:03.339 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:09:03.340 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:09:03.351 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:03.370 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:09:03.372 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:09:03.384 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:09:10.928 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:09:10.929 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:09:10.939 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:10.940 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:09:10.941 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:09:10.950 DEBUG 5600 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 13:09:12.582 DEBUG 5600 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:09:12.583 DEBUG 5600 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:09:12.591 DEBUG 5600 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:12.866 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:09:12.866 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:09:12.876 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:12.894 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:09:12.894 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:09:12.905 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:09:13.657 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:09:13.657 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:09:13.667 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:09:13.668 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:09:13.668 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:09:13.677 DEBUG 5600 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 13:10:23.617 DEBUG 5600 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:10:23.618 DEBUG 5600 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:10:23.628 DEBUG 5600 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:10:23.841 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:10:23.842 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:10:23.852 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:10:23.872 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:10:23.873 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:10:23.884 DEBUG 5600 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:10:25.520 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:10:25.520 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:10:25.529 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:10:25.533 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:10:25.534 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:10:25.545 DEBUG 5600 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 13:19:45.542 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectList  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE deleted=0 AND (email = ?) limit 1
2024-05-24 13:19:45.543 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectList  : ==> Parameters: 345929119@qq.com(String)
2024-05-24 13:19:45.553 DEBUG 5600 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectList  : <==      Total: 1
2024-05-24 13:20:22.775 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:22.776 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 13:20:22.787 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:22.878 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:20:22.880 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:22.891 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:20:22.910 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 13:20:22.910 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:20:22.919 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:20:22.930 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 13:20:22.932 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:20:22.941 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 13:20:22.954 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 13:20:22.984 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T13:20:22.954(LocalDateTime), 2024-05-24T13:20:22.954(LocalDateTime)
2024-05-24 13:20:23.003 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 13:20:23.013 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 13:20:23.018 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 2(Long), 2024-05-24T13:20:23.012(LocalDateTime), 1(Long)
2024-05-24 13:20:23.033 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 13:20:23.034 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:20:23.034 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:23.044 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:20:23.048 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 13:20:23.048 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:20:23.056 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:20:23.059 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 13:20:23.060 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 13:20:23.068 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 13:20:23.131 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id, user_id, room_id, created_at, updated_at, deleted FROM conversation WHERE deleted = 0 AND (user_id = ? AND room_id = ?) AND user_id = 2 LIMIT 1
2024-05-24 13:20:23.132 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 13:20:23.137 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 0
2024-05-24 13:20:23.150 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.insert      : ==>  Preparing: INSERT INTO conversation ( user_id, room_id, created_at, updated_at ) VALUES ( ?, ?, ?, ? )
2024-05-24 13:20:23.151 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.insert      : ==> Parameters: 1(Long), 1(Long), 2024-05-24T13:20:23.149(LocalDateTime), 2024-05-24T13:20:23.149(LocalDateTime)
2024-05-24 13:20:23.172 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 13:20:23.174 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 3(Long)
2024-05-24 13:20:23.234 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 13:20:23.252 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 13:20:23.253 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:20:23.311 DEBUG 5600 --- [http-nio-8820-exec-9] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 13:20:34.697 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:34.697 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:34.706 DEBUG 5600 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:34.982 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:34.983 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:34.995 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:35.019 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:20:35.020 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:20:35.031 DEBUG 5600 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 2
2024-05-24 13:20:36.983 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:36.983 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:36.993 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:36.995 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:36.995 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:37.005 DEBUG 5600 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:37.663 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:37.664 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:37.672 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:37.673 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:37.674 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:37.683 DEBUG 5600 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:38.432 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:38.433 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:38.442 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:38.444 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:38.445 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:38.454 DEBUG 5600 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:38.975 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:38.975 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:38.983 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:38.986 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:38.986 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:38.995 DEBUG 5600 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:39.387 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:39.387 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:39.397 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:39.399 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:39.399 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:39.409 DEBUG 5600 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:39.702 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:39.702 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:39.708 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:39.710 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:39.711 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:39.719 DEBUG 5600 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:40.166 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:40.166 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:40.174 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:40.177 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:40.177 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:40.185 DEBUG 5600 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:40.508 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:40.508 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:40.516 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:40.517 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:20:40.518 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:20:40.527 DEBUG 5600 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:20:42.795 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:42.796 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:42.803 DEBUG 5600 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:43.247 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:20:43.247 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:20:43.255 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:20:43.276 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:20:43.277 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:20:43.288 DEBUG 5600 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 2
2024-05-24 13:21:42.168 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:21:42.168 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 13:21:42.177 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:21:42.187 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:21:42.187 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:21:42.197 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:21:42.199 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 13:21:42.199 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:21:42.205 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:21:42.207 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 13:21:42.207 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:21:42.213 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 13:21:42.213 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 13:21:42.214 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T13:21:42.213(LocalDateTime), 2024-05-24T13:21:42.213(LocalDateTime)
2024-05-24 13:21:42.227 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 13:21:42.228 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 13:21:42.228 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 3(Long), 2024-05-24T13:21:42.228(LocalDateTime), 1(Long)
2024-05-24 13:21:42.243 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 13:21:42.243 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:21:42.244 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:21:42.254 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:21:42.255 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 13:21:42.256 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:21:42.264 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:21:42.265 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 13:21:42.266 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 13:21:42.273 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 13:21:49.049 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id, user_id, room_id, created_at, updated_at, deleted FROM conversation WHERE deleted = 0 AND (user_id = ? AND room_id = ?) AND user_id = 2 LIMIT 1
2024-05-24 13:21:49.058 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 13:21:49.065 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 0
2024-05-24 13:21:56.432 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.insert      : ==>  Preparing: INSERT INTO conversation ( user_id, room_id, created_at, updated_at ) VALUES ( ?, ?, ?, ? )
2024-05-24 13:21:56.432 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.insert      : ==> Parameters: 1(Long), 1(Long), 2024-05-24T13:21:56.432(LocalDateTime), 2024-05-24T13:21:56.432(LocalDateTime)
2024-05-24 13:21:56.450 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 13:21:56.450 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 4(Long)
2024-05-24 13:21:56.460 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 13:21:56.463 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 13:21:56.464 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:21:56.473 DEBUG 5600 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 13:24:18.912 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:24:18.913 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 13:24:18.921 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:24:18.931 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:24:18.932 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:24:18.939 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:24:18.941 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 13:24:18.941 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:24:18.950 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:24:18.951 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 13:24:18.952 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:24:18.964 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 13:24:18.965 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 13:24:18.965 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T13:24:18.965(LocalDateTime), 2024-05-24T13:24:18.965(LocalDateTime)
2024-05-24 13:24:18.984 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 13:24:18.985 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 13:24:18.985 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 4(Long), 2024-05-24T13:24:18.984(LocalDateTime), 1(Long)
2024-05-24 13:24:19.001 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 13:24:19.001 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:24:19.001 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:24:19.011 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:24:19.013 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 13:24:19.013 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:24:19.019 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:24:19.022 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 13:24:19.022 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 13:24:19.029 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 13:24:31.455 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id, user_id, room_id, created_at, updated_at, deleted FROM conversation WHERE deleted = 0 AND (user_id = ? AND room_id = ?) AND user_id = 2 LIMIT 1
2024-05-24 13:24:31.456 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 13:24:31.462 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 0
2024-05-24 13:26:21.722 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.insert      : ==>  Preparing: INSERT INTO conversation ( user_id, room_id, created_at, updated_at ) VALUES ( ?, ?, ?, ? )
2024-05-24 13:26:21.723 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.insert      : ==> Parameters: 1(Long), 1(Long), 2024-05-24T13:26:21.722(LocalDateTime), 2024-05-24T13:26:21.722(LocalDateTime)
2024-05-24 13:26:21.743 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 13:26:21.744 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 5(Long)
2024-05-24 13:26:21.754 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 13:26:21.761 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 13:26:21.762 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:26:21.774 DEBUG 5600 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 13:26:22.121  INFO 5600 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2024-05-24 13:26:22.127  INFO 5600 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2024-05-24 13:26:27.543  INFO 8144 --- [main] com.slipper.SlipperApplication           : Starting SlipperApplication using Java 1.8.0_291 on SZ-PC-PDC-135 with PID 8144 (E:\github\chatterbox-pro\target\classes started by gumingchen in E:\github\chatterbox-pro)
2024-05-24 13:26:27.545 DEBUG 8144 --- [main] com.slipper.SlipperApplication           : Running with Spring Boot v2.7.18, Spring v5.3.31
2024-05-24 13:26:27.545  INFO 8144 --- [main] com.slipper.SlipperApplication           : The following 1 profile is active: "dev"
2024-05-24 13:26:28.328  INFO 8144 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2024-05-24 13:26:28.330  INFO 8144 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-05-24 13:26:28.380  INFO 8144 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 0 Redis repository interfaces.
2024-05-24 13:26:29.044  INFO 8144 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8820 (http)
2024-05-24 13:26:29.051  INFO 8144 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-05-24 13:26:29.051  INFO 8144 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.83]
2024-05-24 13:26:29.200  INFO 8144 --- [main] o.a.c.c.C.[.[localhost].[/chatterbox]    : Initializing Spring embedded WebApplicationContext
2024-05-24 13:26:29.200  INFO 8144 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1619 ms
2024-05-24 13:26:29.706  INFO 8144 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2024-05-24 13:26:30.204 ERROR 8144 --- [main] c.alibaba.druid.filter.stat.StatFilter   : slow sql 119 millis. SELECT 1[]
2024-05-24 13:26:31.038  INFO 8144 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2024-05-24 13:26:31.846 DEBUG 8144 --- [main] c.s.c.s.f.TokenAuthenticationFilter      : Filter 'tokenAuthenticationFilter' configured for use
2024-05-24 13:26:32.576  INFO 8144 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2f3a8166, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7aab98b6, org.springframework.security.web.context.SecurityContextPersistenceFilter@7977f046, org.springframework.security.web.header.HeaderWriterFilter@1f19d423, org.springframework.web.filter.CorsFilter@5e3405a1, org.springframework.security.web.authentication.logout.LogoutFilter@625f5712, com.slipper.core.security.filter.TokenAuthenticationFilter@15a484a9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@441aa7ae, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1534bdc6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@22bfd4b, org.springframework.security.web.session.SessionManagementFilter@46fa2a7e, org.springframework.security.web.access.ExceptionTranslationFilter@41f23499, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@129c760d]
2024-05-24 13:26:32.942  INFO 8144 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8820 (http) with context path '/chatterbox'
2024-05-24 13:26:32.951  INFO 8144 --- [main] com.slipper.SlipperApplication           : Started SlipperApplication in 5.852 seconds (JVM running for 6.661)
2024-05-24 13:26:33.019  INFO 8144 --- [task-executor-1] com.slipper.core.netty.WebSocketServer   : 🤝[服务器启动端口]: 8821

2024-05-24 13:26:50.867  INFO 8144 --- [http-nio-8820-exec-1] o.a.c.c.C.[.[localhost].[/chatterbox]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-24 13:26:50.867  INFO 8144 --- [http-nio-8820-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-05-24 13:26:50.868  INFO 8144 --- [http-nio-8820-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-05-24 13:26:51.528 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:26:51.585 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:26:51.605 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:26:51.898 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:26:51.900 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:26:51.909 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:26:51.949 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:26:51.957 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:26:51.972 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:26:53.311 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:26:53.312 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:26:53.320 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:26:53.405 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:26:53.406 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:26:53.416 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 13:27:18.308 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:27:18.309 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 13:27:18.318 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:27:18.366 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:27:18.367 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:27:18.379 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:27:18.410 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 13:27:18.411 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:27:18.419 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:27:18.423 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 13:27:18.424 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:27:18.434 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 13:27:18.439 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 13:27:18.449 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T13:27:18.439(LocalDateTime), 2024-05-24T13:27:18.439(LocalDateTime)
2024-05-24 13:27:18.462 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 13:27:18.466 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 13:27:18.468 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 2(Long), 2024-05-24T13:27:18.466(LocalDateTime), 1(Long)
2024-05-24 13:27:18.485 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 13:27:18.486 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 13:27:18.487 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:27:18.496 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 13:27:18.497 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 13:27:18.498 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 13:27:18.504 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 13:27:18.506 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 13:27:18.507 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 13:27:18.517 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 13:27:21.606 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 13:27:21.608 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 13:27:21.619 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 13:27:22.242 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 13:27:22.245 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 13:27:22.255 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 13:27:22.333 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 13:27:22.334 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 13:27:22.345 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 13:27:45.258 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:27:45.259 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:27:45.266 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:27:45.719 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:27:45.720 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:27:45.728 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:27:45.750 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:27:45.752 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:27:45.764 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:27:46.669 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:27:46.670 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:27:46.681 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:27:46.683 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:27:46.683 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:27:46.693 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:34:08.562 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:34:08.563 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:34:08.574 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:34:08.819 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:34:08.820 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:34:08.828 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:34:08.844 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:34:08.845 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:34:08.858 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:34:11.504 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:34:11.504 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:34:11.514 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:34:11.516 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:34:11.516 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:34:11.525 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:34:27.520 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:34:27.520 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:34:27.529 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:34:27.760 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:34:27.760 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:34:27.768 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:34:27.786 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:34:27.787 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:34:27.798 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:34:29.399 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:34:29.399 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:34:29.407 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:34:29.409 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:34:29.409 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:34:29.418 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:34:41.451 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:34:41.451 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:34:41.460 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:34:41.830 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:34:41.830 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:34:41.843 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:34:41.868 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:34:41.870 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:34:41.887 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:34:49.549 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:34:49.549 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:34:49.558 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:34:49.560 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:34:49.561 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:34:49.569 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:38:20.133 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:38:20.134 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:38:20.141 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:38:30.933 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:38:30.933 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:38:30.942 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:38:31.359 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:38:31.359 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:38:31.370 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:38:31.388 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:38:31.390 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:38:31.403 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:38:32.574 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:38:32.574 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:38:32.584 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:38:32.585 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:38:32.586 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:38:32.595 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:47:58.294 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:47:58.295 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:47:58.302 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:47:58.670 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:47:58.670 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:47:58.681 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:47:58.698 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:47:58.699 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:47:58.710 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:48:01.806 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:48:01.806 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:48:01.821 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:48:01.822 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:48:01.822 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:48:01.844 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:48:32.149 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:48:32.150 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:48:32.159 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:48:32.471 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:48:32.472 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:48:32.492 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:48:32.509 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:48:32.510 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:48:32.520 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:48:33.100 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:48:33.100 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:48:33.108 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:48:33.109 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:48:33.110 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:48:33.116 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:48:45.540 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:48:45.541 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:48:45.548 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:48:45.818 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:48:45.818 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:48:45.826 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:48:45.844 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:48:45.845 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:48:45.854 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:48:46.721 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:48:46.721 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:48:46.730 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:48:46.732 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:48:46.732 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:48:46.739 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:48:50.276 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:48:50.276 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:48:50.285 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:48:50.588 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:48:50.588 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:48:50.595 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:48:50.617 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:48:50.619 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:48:50.631 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:48:51.381 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:48:51.381 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:48:51.389 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:48:51.391 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:48:51.392 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:48:51.398 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 13:49:06.096 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:49:06.096 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:49:06.104 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:49:06.391 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:49:06.392 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:49:06.400 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:49:06.421 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 13:49:06.421 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 13:49:06.434 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 13:49:07.020 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 13:49:07.020 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 13:49:07.030 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 13:49:07.031 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 13:49:07.031 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 13:49:07.039 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:47.253 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:47.258 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:47.267 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:47.277 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:47.278 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:47.286 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:51.967 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:51.968 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:51.979 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:52.274 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:52.275 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:52.283 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:52.304 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 14:46:52.305 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 14:46:52.318 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 14:46:53.576 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:53.577 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:53.586 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:53.588 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:53.588 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:53.598 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:54.632 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:54.633 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:54.644 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:54.645 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:54.646 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:54.658 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:54.702 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:54.702 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:54.710 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:54.712 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:54.712 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:54.966 ERROR 8144 --- [http-nio-8820-exec-13] c.alibaba.druid.filter.stat.StatFilter   : slow sql 240 millis. SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at,
               u.id AS userId, u.nickname, u.avatar, u.sex
        FROM message AS m
        LEFT JOIN user AS u ON u.id = m.user_id
        WHERE m.deleted = 0
     
        AND m.room_id = ?
         
        ORDER BY m.created_at DESC
        LIMIT ?[1,10]
2024-05-24 14:46:54.966 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:55.008 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:55.008 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:55.017 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:55.028 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:55.029 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:55.265 ERROR 8144 --- [http-nio-8820-exec-14] c.alibaba.druid.filter.stat.StatFilter   : slow sql 235 millis. SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at,
               u.id AS userId, u.nickname, u.avatar, u.sex
        FROM message AS m
        LEFT JOIN user AS u ON u.id = m.user_id
        WHERE m.deleted = 0
     
        AND m.room_id = ?
         
        ORDER BY m.created_at DESC
        LIMIT ?[1,10]
2024-05-24 14:46:55.266 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:55.407 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:55.407 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:55.418 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:55.421 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:55.421 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:55.430 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:57.697 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:57.697 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:57.706 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:57.707 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:57.708 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:57.715 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:57.757 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:57.758 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:57.768 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:57.770 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:57.771 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:58.009 ERROR 8144 --- [http-nio-8820-exec-17] c.alibaba.druid.filter.stat.StatFilter   : slow sql 237 millis. SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at,
               u.id AS userId, u.nickname, u.avatar, u.sex
        FROM message AS m
        LEFT JOIN user AS u ON u.id = m.user_id
        WHERE m.deleted = 0
     
        AND m.room_id = ?
         
        ORDER BY m.created_at DESC
        LIMIT ?[1,10]
2024-05-24 14:46:58.010 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:58.058 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:58.058 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:58.065 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:58.067 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:58.068 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:58.076 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:58.206 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:58.206 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:58.215 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:58.217 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:58.218 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:58.227 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:58.305 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:58.306 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:58.317 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:58.318 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:58.319 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:58.327 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:58.373 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:58.374 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:58.383 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:58.385 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:58.385 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:58.396 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:58.715 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:58.717 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:58.729 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:58.731 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:58.731 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:58.741 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:59.059 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:59.059 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:59.067 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:59.068 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:59.069 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:59.079 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:59.337 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:59.338 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:59.345 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:59.347 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:59.347 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:59.358 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:59.400 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:59.400 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:59.410 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:59.412 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:59.413 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:59.423 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:59.466 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:59.467 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:59.475 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:59.477 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:59.477 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:59.488 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:46:59.530 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:46:59.530 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:46:59.537 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:46:59.539 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:46:59.539 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:46:59.547 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:00.136 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:00.136 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:00.144 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:00.146 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:00.146 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:00.156 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:00.205 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:00.205 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:00.216 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:00.217 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:00.217 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:00.226 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:00.938 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:00.939 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:00.946 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:00.948 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:00.948 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:00.957 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:01.010 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:01.010 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:01.017 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:01.019 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:01.019 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:01.027 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:01.996 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:01.997 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:02.008 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:02.010 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:02.011 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:02.022 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:02.065 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:02.065 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:02.077 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:02.079 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:02.080 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:02.097 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:04.059 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:04.059 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:04.066 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:04.068 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:04.068 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:04.077 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:04.120 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:04.120 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:04.127 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:04.129 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:04.129 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:04.137 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:05.234 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:05.234 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:05.243 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:05.245 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:05.245 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:05.253 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:05.300 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:05.300 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:05.310 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:05.312 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:05.313 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:05.322 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:05.715 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:05.715 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:05.724 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:05.726 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:05.726 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:05.737 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:05.780 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:05.781 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:05.789 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:05.790 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:05.791 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:05.802 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:06.310 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:06.311 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:06.318 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:06.320 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:06.320 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:06.330 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:06.386 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:06.386 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:06.398 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:06.400 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:06.400 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:06.408 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:06.454 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:06.455 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:06.463 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:06.466 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:06.466 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:06.474 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:06.520 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:06.521 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:06.530 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:06.532 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:06.532 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:06.543 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:07.046 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:07.046 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:07.058 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:07.061 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:07.062 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:07.076 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:08.256 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:08.257 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:08.271 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:08.272 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:08.273 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:08.283 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:08.327 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:08.327 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:08.336 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:08.338 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:08.338 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:08.347 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:08.916 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:08.917 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:08.929 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:08.931 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:08.932 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:08.939 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:08.983 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:08.984 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:09.002 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:09.004 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:09.004 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:09.013 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:09.620 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:09.620 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:09.629 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:09.631 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:09.631 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:09.646 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:47:09.692 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:47:09.693 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:47:09.700 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:47:09.702 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:47:09.702 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:47:09.712 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:11.117 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:11.117 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:11.127 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:11.470 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:11.471 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:11.480 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:11.499 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 14:48:11.499 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 14:48:11.512 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 14:48:14.424 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:14.424 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:14.432 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:14.434 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:14.434 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:14.444 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:17.779 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:17.779 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:17.789 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:17.791 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:17.791 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:17.800 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:17.887 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:17.887 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:17.896 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:17.897 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:17.898 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:17.907 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:17.949 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:17.950 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:17.959 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:17.960 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:17.961 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:17.968 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:18.010 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:18.011 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:18.019 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:18.020 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:18.020 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:18.029 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:18.073 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:18.073 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:18.082 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:18.084 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:18.084 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:18.093 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:18.553 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:18.553 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:18.561 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:18.563 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:18.564 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:18.573 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:18.615 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:18.615 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:18.623 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:18.626 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:18.627 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:18.637 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:18.679 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:18.679 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:18.688 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:18.692 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:18.692 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:18.700 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:18.754 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:18.754 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:18.761 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:18.763 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:18.763 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:18.773 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:18.966 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:18.966 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:18.974 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:18.975 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:18.975 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:18.985 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:19.025 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:19.026 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:19.033 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:19.035 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:19.035 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:19.043 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:19.083 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:19.083 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:19.092 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:19.094 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:19.094 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:19.105 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:19.149 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:19.149 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:19.159 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:19.161 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:19.162 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:19.172 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:19.891 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:19.891 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:19.899 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:19.901 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:19.901 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:19.908 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:19.954 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:19.955 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:19.963 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:19.965 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:19.965 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:19.976 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:20.018 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:20.018 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:20.027 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:20.028 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:20.029 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:20.040 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:20.647 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:20.648 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:20.660 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:20.661 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:20.662 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:20.670 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:20.716 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:20.716 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:20.723 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:20.725 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:20.725 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:20.734 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:20.951 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:20.951 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:20.959 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:20.961 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:20.962 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:20.972 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:21.020 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:21.020 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:21.028 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:21.030 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:21.030 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:21.037 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:21.081 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:21.082 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:21.092 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:21.094 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:21.095 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:21.105 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:48:31.545 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:31.545 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:31.554 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:31.858 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:31.859 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:31.868 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:31.888 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 14:48:31.888 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 14:48:31.991 ERROR 8144 --- [http-nio-8820-exec-16] c.alibaba.druid.filter.stat.StatFilter   : slow sql 102 millis. SELECT c.id, c.room_id, c.user_id,
               m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage,
               m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt,
               mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex,
               rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar,
               f.id AS friendId, f.remark,
               u.id AS userId, u.nickname, u.avatar, u.sex, u.online
        FROM conversation AS c
                 LEFT JOIN room AS r ON r.id = c.room_id
                 LEFT JOIN message AS m ON m.id = r.last_message_id
                 LEFT JOIN user AS mu ON mu.id = m.user_id
                 LEFT JOIN room_group AS rg ON rg.room_id = c.room_id
                 LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id
                 LEFT JOIN user AS u
                           ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id)
                               OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id)
                 LEFT JOIN friend AS f
                           ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id
        WHERE c.deleted = 0
     
            AND c.user_id = ?
        ORDER BY m.created_at DESC[1]
2024-05-24 14:48:31.995 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 14:48:33.245 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:48:33.245 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:48:33.252 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:48:33.254 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:48:33.254 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:48:33.264 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:04.873 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:04.873 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:04.883 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:04.884 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:04.885 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:04.894 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:04.932 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:04.935 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:04.945 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:04.946 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:04.947 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:04.954 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:07.710 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:07.710 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:07.720 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:08.011 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:08.013 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:08.022 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:08.040 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 14:50:08.041 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 14:50:08.054 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 14:50:09.486 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:09.486 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:09.495 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:09.496 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:09.496 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:09.506 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:11.914 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:11.915 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:11.921 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:11.923 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:11.923 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:11.930 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:12.204 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:12.204 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:12.214 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:12.217 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:12.217 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:12.227 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:12.357 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:12.357 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:12.366 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:12.367 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:12.367 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:12.376 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:12.416 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:12.416 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:12.427 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:12.429 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:12.429 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:12.440 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:12.596 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:12.596 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:12.605 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:12.607 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:12.607 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:12.616 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:12.650 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:12.650 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:12.661 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:12.663 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:12.663 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:12.671 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:12.704 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:12.704 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:12.713 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:12.715 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:12.715 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:12.726 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:12.760 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:12.761 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:12.769 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:12.770 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:12.770 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:12.781 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:52.944 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:52.944 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:52.955 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:52.957 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:52.957 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:52.967 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:53.005 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:53.005 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:53.231 ERROR 8144 --- [http-nio-8820-exec-2] c.alibaba.druid.filter.stat.StatFilter   : slow sql 226 millis. SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=?  AND deleted=0[1]
2024-05-24 14:50:53.231 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:53.234 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:53.234 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:53.243 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:55.358 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:55.358 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:55.369 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:55.645 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:55.646 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:55.653 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:55.678 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 14:50:55.679 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 14:50:55.691 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 14:50:56.842 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:56.843 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:56.856 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:56.857 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:56.858 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:56.868 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:58.649 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:58.649 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:58.660 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:58.663 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:58.664 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:58.673 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:58.708 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:58.708 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:58.720 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:58.722 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:58.722 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:58.732 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:59.458 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:59.458 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:59.469 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:59.472 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:59.472 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:59.485 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:59.524 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:59.524 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:59.537 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:59.539 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:59.539 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:59.548 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:59.588 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:59.588 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:59.597 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:59.599 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:59.599 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:59.614 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:50:59.655 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:50:59.655 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:50:59.663 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:50:59.665 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:50:59.666 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:50:59.675 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:05.683 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:05.683 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:05.692 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:05.694 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:05.694 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:05.703 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:05.744 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:05.744 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:05.753 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:05.756 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:05.757 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:05.767 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:06.882 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:06.883 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:06.891 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:06.892 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:06.892 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:06.902 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:07.294 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:07.294 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:07.302 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:07.304 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:07.304 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:07.314 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:07.352 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:07.352 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:07.360 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:07.361 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:07.362 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:07.372 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:07.411 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:07.412 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:07.421 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:07.424 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:07.424 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:07.431 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:07.627 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:07.627 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:07.636 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:07.639 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:07.640 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:07.649 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:07.689 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:07.689 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:07.696 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:07.698 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:07.698 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:07.707 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:07.802 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:07.802 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:07.809 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:07.811 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:07.811 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:07.821 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:07.858 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:07.858 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:07.867 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:07.868 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:07.869 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:07.876 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:07.917 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:07.917 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:07.927 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:07.930 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:07.930 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:07.939 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:07.978 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:07.978 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:07.987 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:07.988 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:07.988 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:07.998 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:08.362 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:08.363 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:08.371 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:08.372 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:08.372 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:08.381 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:08.430 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:08.431 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:08.438 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:08.439 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:08.439 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:08.449 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:08.737 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:08.737 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:08.746 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:08.747 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:08.748 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:08.992 ERROR 8144 --- [http-nio-8820-exec-26] c.alibaba.druid.filter.stat.StatFilter   : slow sql 243 millis. SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at,
               u.id AS userId, u.nickname, u.avatar, u.sex
        FROM message AS m
        LEFT JOIN user AS u ON u.id = m.user_id
        WHERE m.deleted = 0
     
        AND m.room_id = ?
         
        ORDER BY m.created_at DESC
        LIMIT ?[1,10]
2024-05-24 14:51:08.992 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:09.091 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:09.091 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:09.100 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:09.103 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:09.103 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:09.114 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:09.150 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:09.150 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:09.157 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:09.158 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:09.158 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:09.168 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:09.415 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:09.415 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:09.424 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:09.426 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:09.426 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:09.435 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:09.476 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:09.476 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:09.484 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:09.486 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:09.486 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:09.498 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:09.926 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:09.926 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:09.936 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:09.938 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:09.938 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:09.949 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:09.989 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:09.989 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:10.000 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:10.002 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:10.002 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:10.011 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:10.049 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:10.050 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:10.059 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:10.064 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:10.064 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:10.074 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:25.881 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:25.882 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:25.891 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:26.216 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:26.217 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:26.227 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:26.245 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 14:51:26.246 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 14:51:26.258 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 14:51:28.001 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:28.001 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:28.011 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:28.012 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:28.013 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:51:28.021 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:51:28.997 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:51:28.997 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:51:29.006 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:51:29.009 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:51:29.011 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 14:51:29.022 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 14:52:32.423 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:52:32.423 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:32.431 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:52:32.708 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:52:32.708 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:32.721 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:52:32.742 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 14:52:32.742 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 14:52:32.754 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 14:52:34.172 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:52:34.172 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:34.181 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:52:34.183 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:52:34.183 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:52:34.193 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 14:52:37.293 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:52:37.294 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:37.303 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:52:37.304 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:52:37.304 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 14:52:37.314 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 14:52:55.070 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:52:55.071 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:52:55.080 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:52:55.096 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:52:55.097 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:55.103 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:52:55.110 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:52:55.111 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:52:55.121 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:52:55.123 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:52:55.124 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:52:55.131 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:52:55.133 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:52:55.134 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:52:55.133(LocalDateTime), 2024-05-24T14:52:55.133(LocalDateTime)
2024-05-24 14:52:55.150 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:52:55.151 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:52:55.152 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 3(Long), 2024-05-24T14:52:55.151(LocalDateTime), 1(Long)
2024-05-24 14:52:55.169 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:52:55.170 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:52:55.170 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:55.180 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:52:55.182 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:52:55.183 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:52:55.191 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:52:55.193 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:52:55.194 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:52:55.425 ERROR 8144 --- [http-nio-8820-exec-13] c.alibaba.druid.filter.stat.StatFilter   : slow sql 230 millis. SELECT  id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted  FROM room_group__user 
 WHERE  deleted=0

AND (room_group_id = ?)[1]
2024-05-24 14:52:55.425 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:52:55.427 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:52:55.428 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:52:55.436 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:52:55.437 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:52:55.437 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:52:55.447 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:52:55.452 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:52:55.452 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:52:55.461 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:52:56.360 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:52:56.360 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:52:56.370 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:52:56.380 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:52:56.380 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:56.388 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:52:56.389 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:52:56.390 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:52:56.398 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:52:56.400 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:52:56.400 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:52:56.408 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:52:56.409 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:52:56.410 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:52:56.408(LocalDateTime), 2024-05-24T14:52:56.408(LocalDateTime)
2024-05-24 14:52:56.427 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:52:56.428 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:52:56.428 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 4(Long), 2024-05-24T14:52:56.427(LocalDateTime), 1(Long)
2024-05-24 14:52:56.444 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:52:56.444 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:52:56.444 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:56.453 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:52:56.454 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:52:56.455 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:52:56.465 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:52:56.466 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:52:56.466 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:52:56.474 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:52:56.476 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:52:56.476 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:52:56.484 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:52:56.485 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:52:56.485 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:52:56.496 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:52:56.500 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:52:56.501 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:52:56.510 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:52:57.264 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:52:57.265 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:52:57.275 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:52:57.288 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:52:57.288 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:57.297 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:52:57.301 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:52:57.301 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:52:57.315 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:52:57.316 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:52:57.317 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:52:57.328 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:52:57.329 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:52:57.330 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:52:57.329(LocalDateTime), 2024-05-24T14:52:57.329(LocalDateTime)
2024-05-24 14:52:57.351 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:52:57.352 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:52:57.352 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 5(Long), 2024-05-24T14:52:57.351(LocalDateTime), 1(Long)
2024-05-24 14:52:57.368 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:52:57.369 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:52:57.370 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:57.380 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:52:57.381 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:52:57.382 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:52:57.390 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:52:57.391 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:52:57.391 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:52:57.401 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:52:57.402 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:52:57.403 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:52:57.411 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:52:57.412 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:52:57.412 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:52:57.422 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:52:57.424 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:52:57.424 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:52:57.438 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:52:58.111 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:52:58.111 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:52:58.121 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:52:58.131 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:52:58.131 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:58.140 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:52:58.142 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:52:58.142 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:52:58.150 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:52:58.152 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:52:58.152 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:52:58.160 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:52:58.160 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:52:58.161 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:52:58.160(LocalDateTime), 2024-05-24T14:52:58.160(LocalDateTime)
2024-05-24 14:52:58.176 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:52:58.177 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:52:58.178 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 6(Long), 2024-05-24T14:52:58.177(LocalDateTime), 1(Long)
2024-05-24 14:52:58.196 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:52:58.197 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:52:58.197 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:58.207 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:52:58.209 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:52:58.209 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:52:58.433 ERROR 8144 --- [http-nio-8820-exec-16] c.alibaba.druid.filter.stat.StatFilter   : slow sql 223 millis. SELECT  id,room_id,name,avatar,created_at,updated_at,deleted  FROM room_group 
 WHERE  deleted=0

AND (room_id = ?)[1]
2024-05-24 14:52:58.433 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:52:58.435 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:52:58.435 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:52:58.446 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:52:58.447 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:52:58.447 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:52:58.455 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:52:58.456 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:52:58.457 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:52:58.704 ERROR 8144 --- [http-nio-8820-exec-16] c.alibaba.druid.filter.stat.StatFilter   : slow sql 247 millis. SELECT c.id, c.room_id, c.user_id,
               m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage,
               m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt,
               mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex,
               rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar,
               f.id AS friendId, f.remark,
               u.id AS userId, u.nickname, u.avatar, u.sex, u.online
        FROM conversation AS c
                 LEFT JOIN room AS r ON r.id = c.room_id
                 LEFT JOIN message AS m ON m.id = r.last_message_id
                 LEFT JOIN user AS mu ON mu.id = m.user_id
                 LEFT JOIN room_group AS rg ON rg.room_id = c.room_id
                 LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id
                 LEFT JOIN user AS u
                           ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id)
                               OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id)
                 LEFT JOIN friend AS f
                           ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id
        WHERE c.deleted = 0
     
        AND c.id IN  (  
                        ?
                     )[1]
2024-05-24 14:52:58.705 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:52:58.706 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:52:58.706 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:52:58.718 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:52:59.067 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:52:59.067 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:52:59.074 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:52:59.083 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:52:59.083 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:59.090 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:52:59.092 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:52:59.092 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:52:59.100 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:52:59.102 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:52:59.102 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:52:59.110 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:52:59.111 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:52:59.113 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:52:59.111(LocalDateTime), 2024-05-24T14:52:59.111(LocalDateTime)
2024-05-24 14:52:59.126 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:52:59.127 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:52:59.127 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 7(Long), 2024-05-24T14:52:59.126(LocalDateTime), 1(Long)
2024-05-24 14:52:59.143 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:52:59.144 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:52:59.144 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:59.153 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:52:59.155 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:52:59.155 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:52:59.164 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:52:59.166 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:52:59.166 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:52:59.175 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:52:59.177 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:52:59.177 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:52:59.187 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:52:59.188 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:52:59.188 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:52:59.226 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:52:59.227 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:52:59.227 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:52:59.238 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:52:59.939 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:52:59.939 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:52:59.949 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:52:59.958 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:52:59.958 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:52:59.968 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:52:59.971 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:52:59.972 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:52:59.982 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:52:59.983 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:52:59.984 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:52:59.992 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:52:59.992 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:52:59.993 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:52:59.992(LocalDateTime), 2024-05-24T14:52:59.992(LocalDateTime)
2024-05-24 14:53:00.009 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:53:00.010 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:53:00.010 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 8(Long), 2024-05-24T14:53:00.009(LocalDateTime), 1(Long)
2024-05-24 14:53:00.029 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:53:00.029 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:00.030 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:00.038 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:00.040 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:53:00.040 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:00.049 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:00.051 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:53:00.051 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:53:00.272 ERROR 8144 --- [http-nio-8820-exec-18] c.alibaba.druid.filter.stat.StatFilter   : slow sql 220 millis. SELECT  id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted  FROM room_group__user 
 WHERE  deleted=0

AND (room_group_id = ?)[1]
2024-05-24 14:53:00.272 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:53:00.274 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:53:00.274 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:53:00.284 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:53:00.285 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:53:00.285 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:53:00.296 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:53:00.297 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:53:00.298 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:00.305 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:53:00.950 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:00.950 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:53:01.176 ERROR 8144 --- [http-nio-8820-exec-19] c.alibaba.druid.filter.stat.StatFilter   : slow sql 225 millis. SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=?  AND deleted=0[2]
2024-05-24 14:53:01.176 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:01.193 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:01.194 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:01.203 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:01.205 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:53:01.205 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:01.213 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:01.215 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:53:01.215 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:01.224 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:53:01.226 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:53:01.226 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:53:01.226(LocalDateTime), 2024-05-24T14:53:01.226(LocalDateTime)
2024-05-24 14:53:01.242 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:53:01.244 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:53:01.244 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 9(Long), 2024-05-24T14:53:01.243(LocalDateTime), 1(Long)
2024-05-24 14:53:01.260 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:53:01.261 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:01.261 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:01.270 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:01.271 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:53:01.271 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:01.281 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:01.282 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:53:01.283 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:53:01.293 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:53:01.294 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:53:01.294 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:53:01.302 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:53:01.303 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:53:01.303 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:53:01.344 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:53:01.345 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:53:01.345 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:01.354 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:53:01.998 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:01.998 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:53:02.008 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:02.021 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:02.022 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:02.032 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:02.085 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:53:02.086 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:02.097 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:02.098 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:53:02.098 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:02.106 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:53:02.107 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:53:02.107 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:53:02.106(LocalDateTime), 2024-05-24T14:53:02.106(LocalDateTime)
2024-05-24 14:53:02.125 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:53:02.125 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:53:02.126 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 10(Long), 2024-05-24T14:53:02.125(LocalDateTime), 1(Long)
2024-05-24 14:53:02.164 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:53:02.164 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:02.164 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:02.174 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:02.175 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:53:02.175 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:02.192 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:02.193 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:53:02.193 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:53:02.205 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:53:02.207 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:53:02.207 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:53:02.216 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:53:02.217 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:53:02.217 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:53:02.292 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:53:02.293 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:53:02.293 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:02.307 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:53:03.113 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:03.113 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:53:03.124 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:03.133 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:03.133 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:03.142 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:03.143 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:53:03.143 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:03.153 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:03.154 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:53:03.154 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:03.163 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:53:03.163 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:53:03.163 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:53:03.163(LocalDateTime), 2024-05-24T14:53:03.163(LocalDateTime)
2024-05-24 14:53:03.180 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:53:03.181 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:53:03.181 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 11(Long), 2024-05-24T14:53:03.181(LocalDateTime), 1(Long)
2024-05-24 14:53:03.198 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:53:03.198 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:03.198 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:03.207 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:03.208 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:53:03.208 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:03.217 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:03.217 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:53:03.218 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:53:03.225 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:53:03.226 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:53:03.226 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:53:03.236 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:53:03.237 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:53:03.237 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:53:03.246 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:53:03.247 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:53:03.247 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:03.292 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:53:03.967 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:03.968 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:53:03.977 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:03.988 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:03.988 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:03.997 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:03.998 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:53:03.998 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:04.007 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:04.008 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:53:04.008 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:04.016 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:53:04.017 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:53:04.017 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:53:04.016(LocalDateTime), 2024-05-24T14:53:04.016(LocalDateTime)
2024-05-24 14:53:04.034 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:53:04.035 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:53:04.035 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 12(Long), 2024-05-24T14:53:04.034(LocalDateTime), 1(Long)
2024-05-24 14:53:04.051 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:53:04.052 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:04.052 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:04.061 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:04.062 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:53:04.062 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:04.070 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:04.071 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:53:04.071 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:53:04.079 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:53:04.081 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:53:04.081 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:53:04.091 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:53:04.092 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:53:04.092 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:53:04.135 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:53:04.136 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:53:04.137 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:04.148 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:53:04.774 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:04.774 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:53:04.783 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:04.794 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:04.795 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:04.804 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:04.805 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:53:04.805 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:04.815 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:04.816 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:53:04.816 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:04.826 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:53:04.827 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:53:04.827 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:53:04.826(LocalDateTime), 2024-05-24T14:53:04.826(LocalDateTime)
2024-05-24 14:53:04.842 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:53:04.843 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:53:04.843 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 13(Long), 2024-05-24T14:53:04.842(LocalDateTime), 1(Long)
2024-05-24 14:53:04.860 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:53:04.861 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:04.861 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:04.867 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:04.868 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:53:04.869 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:04.878 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:04.879 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:53:04.879 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:53:04.888 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:53:04.890 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:53:04.891 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:53:04.900 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:53:04.901 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:53:04.901 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:53:05.160 ERROR 8144 --- [http-nio-8820-exec-23] c.alibaba.druid.filter.stat.StatFilter   : slow sql 259 millis. SELECT c.id, c.room_id, c.user_id,
               m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage,
               m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt,
               mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex,
               rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar,
               f.id AS friendId, f.remark,
               u.id AS userId, u.nickname, u.avatar, u.sex, u.online
        FROM conversation AS c
                 LEFT JOIN room AS r ON r.id = c.room_id
                 LEFT JOIN message AS m ON m.id = r.last_message_id
                 LEFT JOIN user AS mu ON mu.id = m.user_id
                 LEFT JOIN room_group AS rg ON rg.room_id = c.room_id
                 LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id
                 LEFT JOIN user AS u
                           ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id)
                               OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id)
                 LEFT JOIN friend AS f
                           ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id
        WHERE c.deleted = 0
     
        AND c.id IN  (  
                        ?
                     )[1]
2024-05-24 14:53:05.161 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:53:05.162 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:53:05.162 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:05.173 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:53:05.585 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:05.585 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:53:05.595 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:05.603 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:05.603 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:05.612 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:05.613 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:53:05.613 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:05.621 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:05.622 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:53:05.622 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:05.629 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:53:05.630 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:53:05.630 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:53:05.629(LocalDateTime), 2024-05-24T14:53:05.629(LocalDateTime)
2024-05-24 14:53:05.646 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:53:05.647 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:53:05.647 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 14(Long), 2024-05-24T14:53:05.646(LocalDateTime), 1(Long)
2024-05-24 14:53:05.664 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:53:05.664 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:05.664 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:05.671 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:05.672 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:53:05.672 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:05.682 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:05.683 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:53:05.683 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:53:05.693 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:53:05.694 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:53:05.694 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:53:05.705 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:53:05.705 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:53:05.706 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:53:05.716 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:53:05.718 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:53:05.718 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:05.977 ERROR 8144 --- [http-nio-8820-exec-24] c.alibaba.druid.filter.stat.StatFilter   : slow sql 258 millis. SELECT c.id, c.room_id, c.user_id,
               m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage,
               m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt,
               mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex,
               rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar,
               f.id AS friendId, f.remark,
               u.id AS userId, u.nickname, u.avatar, u.sex, u.online
        FROM conversation AS c
                 LEFT JOIN room AS r ON r.id = c.room_id
                 LEFT JOIN message AS m ON m.id = r.last_message_id
                 LEFT JOIN user AS mu ON mu.id = m.user_id
                 LEFT JOIN room_group AS rg ON rg.room_id = c.room_id
                 LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id
                 LEFT JOIN user AS u
                           ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id)
                               OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id)
                 LEFT JOIN friend AS f
                           ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id
        WHERE c.deleted = 0
     
        AND c.room_id = ? AND c.user_id = ?[1,2]
2024-05-24 14:53:05.977 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:53:06.468 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:06.468 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:53:06.478 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:06.486 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:06.487 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:06.496 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:06.497 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:53:06.497 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:06.506 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:06.508 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:53:06.508 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:06.516 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:53:06.517 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:53:06.517 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:53:06.516(LocalDateTime), 2024-05-24T14:53:06.516(LocalDateTime)
2024-05-24 14:53:06.533 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:53:06.533 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:53:06.534 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 15(Long), 2024-05-24T14:53:06.533(LocalDateTime), 1(Long)
2024-05-24 14:53:06.549 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:53:06.549 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:06.550 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:06.559 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:06.560 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:53:06.560 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:06.571 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:06.572 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:53:06.572 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:53:06.582 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:53:06.583 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:53:06.583 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:53:06.589 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:53:06.590 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:53:06.590 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:53:06.600 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:53:06.601 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:53:06.601 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:06.612 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:53:07.318 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:07.318 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:53:07.326 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:07.336 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:07.336 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:07.345 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:07.346 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:53:07.347 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:07.353 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:07.354 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:53:07.354 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:07.362 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:53:07.363 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:53:07.363 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:53:07.363(LocalDateTime), 2024-05-24T14:53:07.363(LocalDateTime)
2024-05-24 14:53:07.381 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:53:07.381 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:53:07.382 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 16(Long), 2024-05-24T14:53:07.381(LocalDateTime), 1(Long)
2024-05-24 14:53:07.397 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:53:07.397 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:07.397 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:07.405 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:07.406 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:53:07.406 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:07.415 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:07.416 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:53:07.416 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:53:07.425 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:53:07.426 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:53:07.426 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:53:07.435 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:53:07.436 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:53:07.436 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:53:07.446 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:53:07.447 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:53:07.447 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:07.459 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:53:08.158 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:08.159 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:53:08.167 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:08.191 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:08.191 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:08.201 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:08.203 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:53:08.203 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:08.211 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:08.212 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:53:08.212 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:08.221 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:53:08.222 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:53:08.223 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:53:08.222(LocalDateTime), 2024-05-24T14:53:08.222(LocalDateTime)
2024-05-24 14:53:08.239 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:53:08.241 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:53:08.241 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 17(Long), 2024-05-24T14:53:08.240(LocalDateTime), 1(Long)
2024-05-24 14:53:08.255 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:53:08.256 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:08.256 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:08.264 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:08.264 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:53:08.265 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:08.274 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:08.274 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:53:08.274 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:53:08.284 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:53:08.285 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:53:08.285 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:53:08.292 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:53:08.293 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:53:08.293 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:53:08.304 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:53:08.306 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:53:08.306 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:08.319 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:53:08.935 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:08.935 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:53:08.942 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:08.951 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:08.951 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:08.959 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:08.960 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:53:08.961 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:08.968 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:08.969 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:53:08.969 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:08.977 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:53:08.978 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:53:08.978 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:53:08.978(LocalDateTime), 2024-05-24T14:53:08.978(LocalDateTime)
2024-05-24 14:53:08.995 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:53:08.996 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:53:08.996 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 18(Long), 2024-05-24T14:53:08.996(LocalDateTime), 1(Long)
2024-05-24 14:53:09.014 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:53:09.015 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:09.015 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:09.034 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:09.035 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:53:09.035 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:09.044 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:09.045 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:53:09.045 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:53:09.052 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:53:09.054 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:53:09.054 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:53:09.062 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:53:09.063 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:53:09.063 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:53:09.071 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:53:09.072 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:53:09.072 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:09.111 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:53:09.804 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:09.804 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:53:09.815 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:09.823 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:09.823 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:09.830 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:09.831 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:53:09.831 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:09.841 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:09.842 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:53:09.842 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:09.853 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:53:09.853 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:53:09.854 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:53:09.853(LocalDateTime), 2024-05-24T14:53:09.853(LocalDateTime)
2024-05-24 14:53:09.873 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:53:09.873 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:53:09.873 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 19(Long), 2024-05-24T14:53:09.873(LocalDateTime), 1(Long)
2024-05-24 14:53:09.890 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:53:09.890 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:09.890 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:09.898 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:09.899 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:53:09.899 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:09.907 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:09.908 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:53:09.908 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:53:09.917 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:53:09.918 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:53:09.919 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:53:09.928 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:53:09.929 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:53:09.929 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:53:09.939 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:53:09.940 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:53:09.940 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:09.952 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:53:10.573 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:10.573 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 14:53:10.582 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:10.592 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:10.592 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:10.600 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:10.601 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 14:53:10.601 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:10.611 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:10.612 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 14:53:10.612 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:10.621 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 14:53:10.622 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, text, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 14:53:10.622 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 0(Integer), 好市民加入群聊啦！(String), 2024-05-24T14:53:10.621(LocalDateTime), 2024-05-24T14:53:10.621(LocalDateTime)
2024-05-24 14:53:10.638 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 14:53:10.639 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 14:53:10.639 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 20(Long), 2024-05-24T14:53:10.638(LocalDateTime), 1(Long)
2024-05-24 14:53:10.657 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 14:53:10.657 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 14:53:10.658 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:10.667 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 14:53:10.668 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 14:53:10.669 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 14:53:10.676 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 14:53:10.677 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 14:53:10.677 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 14:53:10.685 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 14:53:10.686 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 14:53:10.687 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 14:53:10.695 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 14:53:10.696 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 14:53:10.696 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 14:53:10.706 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 14:53:10.707 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 14:53:10.708 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 14:53:10.748 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 14:53:13.785 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:13.785 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:13.794 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:14.279 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:14.280 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:14.289 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:14.309 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 14:53:14.310 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 14:53:14.323 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 14:53:16.016 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:16.016 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:16.025 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:16.026 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:53:16.027 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:53:16.035 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:53:21.718 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:21.719 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:21.726 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:21.727 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:53:21.728 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:53:21.781 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:53:24.436 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:24.437 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:24.447 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:24.448 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:53:24.448 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:53:24.456 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:53:26.509 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:26.509 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:26.518 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:26.520 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:53:26.521 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:53:26.563 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:53:31.503 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:31.503 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:31.543 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:31.544 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:53:31.544 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:53:31.555 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:53:33.650 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:33.650 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:33.661 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:33.662 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:53:33.663 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:53:33.716 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:53:36.166 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:36.176 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:36.185 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:36.187 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:53:36.187 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:53:36.197 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:53:38.389 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:38.390 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:38.400 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:38.402 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:53:38.403 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:53:38.418 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:53:40.567 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:40.567 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:40.577 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:40.578 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:53:40.579 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:53:40.589 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:53:47.854 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:47.854 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:47.864 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:47.865 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:53:47.865 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:53:47.875 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:53:51.031 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:51.031 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:51.042 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:51.357 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:51.358 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:51.367 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:51.385 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 14:53:51.386 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 14:53:51.398 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 14:53:56.563 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:53:56.563 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:53:56.574 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:53:56.576 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:53:56.577 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:53:56.587 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:54:06.968 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:54:06.969 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:54:06.978 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:54:06.980 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:54:06.980 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:54:06.989 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:54:09.038 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:54:09.038 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:54:09.048 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:54:09.050 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:54:09.050 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:54:09.058 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:54:12.924 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:54:12.925 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:54:12.932 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:54:12.933 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:54:12.934 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:54:12.940 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:54:14.982 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:54:14.982 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:54:14.991 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:54:14.993 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:54:14.993 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:54:15.002 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:54:24.485 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:54:24.486 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:54:24.493 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:54:24.495 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:54:24.496 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:54:24.503 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:54:26.546 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:54:26.547 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:54:26.555 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:54:26.556 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:54:26.556 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:54:26.567 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:54:48.069 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:54:48.070 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:54:48.078 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:54:48.540 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:54:48.540 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:54:48.547 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:54:48.565 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 14:54:48.566 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 14:54:48.577 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 14:54:50.741 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:54:50.742 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:54:50.750 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:54:50.752 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:54:50.752 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:54:50.762 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:54:59.470 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:54:59.470 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:54:59.479 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:54:59.480 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:54:59.481 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:54:59.490 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:55:35.533 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:55:35.533 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:55:35.543 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:55:35.544 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:55:35.544 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:55:35.554 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:55:44.156 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:55:44.157 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:55:44.166 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:55:44.167 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:55:44.167 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:55:44.175 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:56:18.131 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:56:18.131 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:56:18.140 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:56:18.614 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:56:18.614 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:56:18.624 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:56:18.645 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 14:56:18.646 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 14:56:18.659 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 14:56:22.252 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:56:22.252 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:56:22.263 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:56:22.265 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:56:22.265 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:56:22.275 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:56:39.104 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:56:39.104 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:56:39.114 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:56:39.116 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:56:39.117 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:56:39.127 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:56:49.635 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:56:49.636 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:56:49.644 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:56:49.645 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:56:49.645 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:56:49.656 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:57:38.979 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:57:38.980 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:57:38.989 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:57:39.296 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:57:39.297 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:57:39.306 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:57:39.328 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 14:57:39.329 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 14:57:39.341 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 14:57:40.476 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:57:40.477 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:57:40.487 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:57:40.488 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:57:40.489 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 14:57:40.500 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:57:44.442 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:57:44.443 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:57:44.451 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:57:44.452 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:57:44.452 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 14:57:44.462 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 14:57:46.983 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 14:57:46.983 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 14:57:46.994 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 14:57:46.997 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 14:57:46.997 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 14:57:47.007 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:00:05.296 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:00:05.297 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:00:05.329 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:00:05.378 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.g.mapper.GroupingMapper.queryList  : ==>  Preparing: SELECT g.id, g.name, g.fixed, f.id AS friend_id, f.remark, f.friend_id AS user_id, u.nickname, u.avatar, u.sex, u.online FROM `grouping` AS g LEFT JOIN friend AS f ON f.grouping_id = g.id LEFT JOIN user AS u ON u.id = f.friend_id WHERE g.deleted = 0 AND g.user_id = ? ORDER BY g.fixed DESC, u.nickname ASC, f.created_at DESC
2024-05-24 15:00:05.380 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.g.mapper.GroupingMapper.queryList  : ==> Parameters: 1(Long)
2024-05-24 15:00:05.403 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.g.mapper.GroupingMapper.queryList  : <==      Total: 1
2024-05-24 15:03:28.859 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:03:28.859 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:03:28.872 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:03:29.315 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:03:29.316 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:03:29.325 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:03:29.344 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:03:29.345 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:03:29.355 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:03:30.378 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:03:30.378 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:03:30.386 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:03:30.389 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:03:30.389 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:03:30.401 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:03:33.172 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:03:33.172 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:03:33.180 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:03:33.185 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:03:33.185 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:03:33.195 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:03:36.713 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:03:36.714 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:03:36.723 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:03:36.724 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:03:36.725 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:03:36.731 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:04:02.838 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:04:02.838 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:04:02.860 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:04:03.334 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:04:03.334 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:04:03.345 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:04:03.364 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:04:03.365 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:04:03.378 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:04:04.561 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:04:04.561 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:04:04.571 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:04:04.572 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:04:04.573 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:04:04.583 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:04:07.368 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:04:07.368 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:04:07.378 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:04:07.379 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:04:07.379 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:04:07.389 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:04:10.880 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:04:10.880 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:04:10.891 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:04:10.892 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:04:10.892 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:04:10.900 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:04:54.945 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:04:54.945 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:04:54.955 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:04:55.260 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:04:55.260 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:04:55.269 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:04:55.521 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:04:55.521 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:04:55.533 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:04:56.134 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:04:56.134 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:04:56.142 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:04:56.143 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:04:56.143 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:04:56.152 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:04:58.859 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:04:58.860 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:04:58.871 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:04:58.872 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:04:58.872 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:04:58.931 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:05:03.719 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:05:03.719 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:05:03.727 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:05:03.729 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:05:03.730 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:05:03.966 ERROR 8144 --- [http-nio-8820-exec-24] c.alibaba.druid.filter.stat.StatFilter   : slow sql 236 millis. SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at,
               u.id AS userId, u.nickname, u.avatar, u.sex
        FROM message AS m
        LEFT JOIN user AS u ON u.id = m.user_id
        WHERE m.deleted = 0
     
        AND m.room_id = ?
         
            AND m.id   <   ?
         
        ORDER BY m.created_at DESC
        LIMIT ?[1,1,10]
2024-05-24 15:05:03.966 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:06:37.806 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:06:37.806 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:06:37.816 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:06:38.353 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:06:38.354 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:06:38.363 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:06:38.384 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:06:38.384 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:06:38.396 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:06:39.472 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:06:39.472 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:06:39.481 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:06:39.482 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:06:39.483 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:06:39.491 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:06:42.079 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:06:42.079 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:06:42.088 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:06:42.090 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:06:42.090 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:06:42.100 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:06:46.827 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:06:46.827 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:06:46.835 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:06:46.836 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:06:46.837 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:06:46.847 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:06:51.914 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:06:51.915 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:06:51.925 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:06:52.197 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:06:52.198 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:06:52.208 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:06:52.229 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:06:52.229 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:06:52.242 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:06:53.198 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:06:53.198 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:06:53.210 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:06:53.212 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:06:53.212 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:06:53.224 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:06:55.988 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:06:55.988 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:06:55.997 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:06:55.999 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:06:55.999 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:06:56.008 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:06:59.633 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:06:59.633 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:06:59.643 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:06:59.644 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:06:59.645 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:06:59.652 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:07:38.446 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:07:38.446 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:07:38.455 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:07:38.457 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:07:38.457 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:07:38.466 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:09:43.970 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:09:43.970 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:09:43.979 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:09:44.461 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:09:44.461 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:09:44.472 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:09:44.492 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:09:44.493 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:09:44.505 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:10:08.472 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:10:08.473 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:10:08.482 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:10:08.914 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:10:08.915 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:10:08.924 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:10:08.943 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:10:08.944 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:10:08.955 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:10:10.351 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:10:10.352 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:10:10.359 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:10:10.360 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:10:10.361 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:10:10.369 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:10:13.147 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:10:13.147 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:10:13.154 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:10:13.156 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:10:13.156 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:10:13.166 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:10:16.156 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:10:16.156 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:10:16.166 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:10:16.167 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:10:16.167 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:10:16.178 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:10:21.434 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:10:21.435 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:10:21.447 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:10:21.723 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:10:21.723 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:10:21.731 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:10:21.749 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:10:21.750 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:10:21.761 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:10:22.451 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:10:22.451 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:10:22.462 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:10:22.463 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:10:22.463 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:10:22.473 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:10:25.045 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:10:25.045 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:10:25.054 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:10:25.055 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:10:25.056 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:10:25.069 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:10:28.721 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:10:28.721 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:10:28.731 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:10:28.732 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:10:28.732 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:10:28.741 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:10:46.731 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:10:46.731 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:10:46.739 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:10:46.740 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:10:46.741 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:10:46.757 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:11:47.322 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:11:47.322 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:11:47.330 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:11:47.332 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:11:47.332 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:11:47.340 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:15:27.450 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:15:27.451 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:15:27.460 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:15:27.483 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.g.mapper.GroupingMapper.queryList  : ==>  Preparing: SELECT g.id, g.name, g.fixed, f.id AS friend_id, f.remark, f.friend_id AS user_id, u.nickname, u.avatar, u.sex, u.online FROM `grouping` AS g LEFT JOIN friend AS f ON f.grouping_id = g.id LEFT JOIN user AS u ON u.id = f.friend_id WHERE g.deleted = 0 AND g.user_id = ? ORDER BY g.fixed DESC, u.nickname ASC, f.created_at DESC
2024-05-24 15:15:27.483 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.g.mapper.GroupingMapper.queryList  : ==> Parameters: 1(Long)
2024-05-24 15:15:27.494 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.g.mapper.GroupingMapper.queryList  : <==      Total: 1
2024-05-24 15:21:49.634 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:21:49.635 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:21:49.646 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:21:49.928 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:21:49.928 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:21:49.939 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:21:49.960 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:21:49.961 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:21:49.972 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:21:50.828 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:21:50.828 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:21:50.837 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:21:50.838 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:21:50.838 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:21:50.849 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:21:54.227 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:21:54.227 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:21:54.238 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:21:54.239 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:21:54.239 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:21:54.249 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:21:57.727 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:21:57.728 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:21:57.738 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:21:57.740 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:21:57.740 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:21:57.750 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:22:01.378 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:01.378 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:01.392 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:01.822 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:01.823 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:01.835 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:01.858 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:22:01.858 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:22:01.871 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:22:03.232 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:03.232 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:03.245 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:03.246 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:22:03.247 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:22:03.257 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:22:07.797 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:07.797 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:07.805 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:07.807 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:22:07.807 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:22:07.818 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:22:11.709 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:11.710 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:11.721 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:11.723 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:22:11.723 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:22:11.735 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:22:20.059 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:20.059 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:20.071 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:20.404 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:20.404 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:20.415 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:20.438 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:22:20.438 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:22:20.451 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:22:21.308 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:21.308 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:21.318 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:21.320 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:22:21.320 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:22:21.331 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:22:23.957 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:23.957 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:23.971 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:23.973 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:22:23.973 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:22:23.982 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:22:26.933 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:26.934 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:26.941 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:26.942 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:22:26.943 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:22:26.954 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:22:33.609 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:33.609 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:33.619 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:34.058 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:34.058 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:34.069 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:34.088 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:22:34.089 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:22:34.100 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:22:34.708 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:34.708 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:34.718 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:34.720 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:22:34.720 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:22:34.730 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:22:37.673 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:22:37.674 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:22:37.682 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:22:37.683 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:22:37.684 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:22:37.694 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:23:12.037 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:12.038 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:12.050 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:12.341 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:12.343 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:12.353 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:12.373 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:23:12.375 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:23:12.386 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:23:13.489 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:13.489 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:13.497 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:13.498 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:23:13.499 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:23:13.508 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:23:16.017 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:16.029 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:16.039 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:16.041 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:23:16.041 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:23:16.050 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:23:19.729 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:19.730 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:19.738 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:19.739 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:23:19.739 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:23:19.760 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:23:23.780 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:23.780 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:23.820 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:24.108 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:24.108 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:24.122 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:24.145 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:23:24.146 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:23:24.234 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:23:24.681 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:24.682 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:24.689 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:24.690 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:23:24.690 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:23:24.697 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:23:27.365 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:27.366 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:27.371 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:27.373 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:23:27.374 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:23:27.386 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:23:32.927 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:32.927 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:32.938 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:33.411 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:33.411 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:33.421 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:33.444 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:23:33.445 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:23:33.456 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:23:34.371 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:34.373 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:34.387 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:34.390 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:23:34.390 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:23:34.409 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:23:37.187 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:37.187 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:37.195 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:37.196 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:23:37.196 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:23:37.206 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:23:40.216 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:23:40.217 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:23:40.225 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:23:40.226 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:23:40.227 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:23:40.235 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:25:08.225 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:08.226 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:08.238 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:08.520 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:08.521 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:08.532 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:08.551 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:25:08.552 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:25:08.562 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:25:10.079 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:10.079 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:10.086 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:10.088 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:25:10.088 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:25:10.098 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:25:13.737 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:13.737 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:13.746 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:13.759 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:25:13.759 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:25:13.770 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:25:15.378 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:15.378 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:15.388 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:15.389 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:25:15.389 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:25:15.399 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:25:42.192 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:42.192 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:42.200 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:42.481 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:42.482 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:42.490 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:42.511 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:25:42.511 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:25:42.527 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:25:42.912 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:42.912 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:42.919 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:42.921 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:25:42.921 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:25:42.931 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:25:44.607 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:44.607 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:44.615 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:44.616 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:25:44.616 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:25:44.635 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:25:47.706 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:47.706 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:47.715 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:47.717 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:25:47.717 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:25:47.725 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:25:54.622 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:54.623 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:54.632 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:55.061 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:55.061 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:55.073 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:55.097 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:25:55.098 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:25:55.109 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:25:55.960 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:55.960 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:55.971 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:55.972 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:25:55.973 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:25:55.987 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:25:57.553 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:25:57.553 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:25:57.563 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:25:57.564 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:25:57.564 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:25:57.574 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:26:00.533 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:26:00.533 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:26:00.544 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:26:00.545 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:26:00.545 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:26:00.560 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:42:54.095 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:42:54.095 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:42:54.105 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:42:54.471 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:42:54.471 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:42:54.480 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:42:54.499 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:42:54.500 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:42:54.510 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:44:57.075 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:44:57.075 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:44:57.086 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:44:57.503 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:44:57.503 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:44:57.516 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:44:57.537 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:44:57.538 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:44:57.550 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:45:12.533 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:45:12.533 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:45:12.543 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:45:12.544 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:45:12.544 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:45:12.552 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:45:14.477 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:45:14.477 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:45:14.487 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:45:14.488 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:45:14.488 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:45:14.545 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:45:16.711 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:45:16.711 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:45:16.720 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:45:16.722 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:45:16.722 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:45:16.731 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 15:51:33.027 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:51:33.028 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:51:33.037 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:51:33.429 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:51:33.430 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:51:33.439 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:51:33.459 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 15:51:33.460 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 15:51:33.471 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 15:51:34.226 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:51:34.227 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:51:34.237 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:51:34.238 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:51:34.238 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 15:51:34.251 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:51:35.943 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:51:35.944 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:51:36.175 ERROR 8144 --- [http-nio-8820-exec-19] c.alibaba.druid.filter.stat.StatFilter   : slow sql 230 millis. SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=?  AND deleted=0[1]
2024-05-24 15:51:36.175 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:51:36.177 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:51:36.178 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 11(Long), 10(Long)
2024-05-24 15:51:36.186 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 15:51:38.143 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 15:51:38.143 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 15:51:38.151 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 15:51:38.153 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 15:51:38.153 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 15:51:38.163 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 16:02:38.864 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:02:38.864 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 2(Long)
2024-05-24 16:02:38.874 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:02:38.887 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 16:02:38.887 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:02:38.896 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 16:02:38.900 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 16:02:38.901 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 16:02:38.910 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 16:02:38.912 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 16:02:38.913 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 2(Long)
2024-05-24 16:02:38.921 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 16:02:38.923 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, image, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 16:02:38.927 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 2(Long), 1(Long), 1(Integer), https://admin.gumingchen.icu/file/8a0b1ba0-e0dc-45ae-82e9-8859add002f3.webp(String), 2024-05-24T16:02:38.922(LocalDateTime), 2024-05-24T16:02:38.922(LocalDateTime)
2024-05-24 16:02:38.943 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 16:02:38.945 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 16:02:38.945 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 21(Long), 2024-05-24T16:02:38.944(LocalDateTime), 1(Long)
2024-05-24 16:02:38.960 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 16:02:38.960 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 16:02:38.960 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:02:38.969 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 16:02:38.970 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 16:02:38.970 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 16:02:38.978 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 16:02:38.980 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 16:02:38.980 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 16:02:38.988 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 16:02:38.990 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 16:02:38.990 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 16:02:38.999 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 16:02:39.000 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 16:02:39.000 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 1(Long)
2024-05-24 16:02:39.010 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 16:02:39.012 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 16:02:39.013 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 2(Long)
2024-05-24 16:02:39.023 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 16:02:47.307 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:02:47.307 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:02:47.315 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:02:47.639 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:02:47.640 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:02:47.650 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:02:47.669 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:02:47.670 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:02:47.683 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:02:49.097 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:02:49.097 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:02:49.107 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:02:49.108 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:02:49.109 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 16:02:49.123 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:02:51.309 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:02:51.310 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:02:51.317 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:02:51.319 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:02:51.319 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 12(Long), 10(Long)
2024-05-24 16:02:51.331 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:04:40.021 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:04:40.022 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:04:40.032 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:04:40.386 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:04:40.387 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:04:40.397 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:04:40.416 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:04:40.416 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:04:40.495 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:04:41.502 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:04:41.502 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:04:41.511 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:04:41.512 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:04:41.512 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 16:04:41.523 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:05:17.608 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:05:17.608 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:05:17.619 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:05:17.988 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:05:17.988 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:05:17.996 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:05:18.014 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:05:18.014 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:05:18.026 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:05:19.118 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:05:19.119 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:05:19.140 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:05:19.141 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:05:19.141 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 16:05:19.153 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:05:48.922 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:05:48.922 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:05:48.931 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:05:48.932 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:05:48.933 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 12(Long), 10(Long)
2024-05-24 16:05:48.943 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:07:03.705 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:07:03.705 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:07:03.714 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:07:04.149 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:07:04.149 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:07:04.158 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:07:04.175 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:07:04.176 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:07:04.186 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:07:05.193 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:07:05.193 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:07:05.201 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:07:05.203 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:07:05.203 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 16:07:05.214 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:07:44.262 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:07:44.263 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:07:44.274 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:07:44.680 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:07:44.680 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:07:44.691 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:07:44.709 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:07:44.710 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:07:44.722 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:07:45.926 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:07:45.926 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:07:45.934 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:07:45.936 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:07:45.936 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 16:07:45.946 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:08:17.578 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:08:17.579 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:08:17.587 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:08:17.588 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:08:17.588 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 12(Long), 10(Long)
2024-05-24 16:08:17.598 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:08:49.948 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:08:49.948 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:08:49.960 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:08:49.961 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:08:49.961 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 2(Long), 10(Long)
2024-05-24 16:08:49.970 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 1
2024-05-24 16:08:51.015 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:08:51.015 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:08:51.024 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:08:51.025 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:08:51.026 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 16:08:51.035 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 16:09:32.389 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:09:32.389 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:09:32.399 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:09:32.417 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.g.mapper.GroupingMapper.queryList  : ==>  Preparing: SELECT g.id, g.name, g.fixed, f.id AS friend_id, f.remark, f.friend_id AS user_id, u.nickname, u.avatar, u.sex, u.online FROM `grouping` AS g LEFT JOIN friend AS f ON f.grouping_id = g.id LEFT JOIN user AS u ON u.id = f.friend_id WHERE g.deleted = 0 AND g.user_id = ? ORDER BY g.fixed DESC, u.nickname ASC, f.created_at DESC
2024-05-24 16:09:32.418 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.g.mapper.GroupingMapper.queryList  : ==> Parameters: 1(Long)
2024-05-24 16:09:32.427 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.g.mapper.GroupingMapper.queryList  : <==      Total: 1
2024-05-24 16:09:45.668 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:09:45.669 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:09:45.676 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:09:45.683 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 16:09:45.683 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:09:45.693 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 16:09:45.694 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?) limit 1
2024-05-24 16:09:45.694 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 16:09:45.702 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 16:09:45.703 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.R.selectCount                  : ==>  Preparing: SELECT COUNT( * ) AS total FROM room_group__user WHERE deleted=0 AND (room_group_id = ? AND user_id = ?)
2024-05-24 16:09:45.703 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.R.selectCount                  : ==> Parameters: 1(Long), 1(Long)
2024-05-24 16:09:45.713 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.R.selectCount                  : <==      Total: 1
2024-05-24 16:09:45.713 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.mapper.MessageMapper.insert      : ==>  Preparing: INSERT INTO message ( user_id, room_id, type, image, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ? )
2024-05-24 16:09:45.714 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.mapper.MessageMapper.insert      : ==> Parameters: 1(Long), 1(Long), 1(Integer), https://admin.gumingchen.icu/file/8a0b1ba0-e0dc-45ae-82e9-8859add002f3.webp(String), 2024-05-24T16:09:45.713(LocalDateTime), 2024-05-24T16:09:45.713(LocalDateTime)
2024-05-24 16:09:45.729 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.mapper.MessageMapper.insert      : <==    Updates: 1
2024-05-24 16:09:45.729 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.updateById  : ==>  Preparing: UPDATE room SET last_message_id=?, updated_at=? WHERE id=? AND deleted=0
2024-05-24 16:09:45.729 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.updateById  : ==> Parameters: 22(Long), 2024-05-24T16:09:45.729(LocalDateTime), 1(Long)
2024-05-24 16:09:45.744 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.updateById  : <==    Updates: 1
2024-05-24 16:09:45.744 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.selectById  : ==>  Preparing: SELECT id,type,last_message_id,created_at,updated_at,deleted FROM room WHERE id=? AND deleted=0
2024-05-24 16:09:45.744 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:09:45.750 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.room.mapper.RoomMapper.selectById  : <==      Total: 1
2024-05-24 16:09:45.752 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.RoomGroupMapper.selectList     : ==>  Preparing: SELECT id,room_id,name,avatar,created_at,updated_at,deleted FROM room_group WHERE deleted=0 AND (room_id = ?)
2024-05-24 16:09:45.752 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.RoomGroupMapper.selectList     : ==> Parameters: 1(Long)
2024-05-24 16:09:45.761 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.RoomGroupMapper.selectList     : <==      Total: 1
2024-05-24 16:09:45.763 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.R.selectList                   : ==>  Preparing: SELECT id,room_group_id,user_id,nickname,role,status,created_at,updated_at,deleted FROM room_group__user WHERE deleted=0 AND (room_group_id = ?)
2024-05-24 16:09:45.763 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.R.selectList                   : ==> Parameters: 1(Long)
2024-05-24 16:09:45.771 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.r.m.R.selectList                   : <==      Total: 2
2024-05-24 16:09:45.773 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.selectList  : ==>  Preparing: SELECT id,user_id,room_id,created_at,updated_at,deleted FROM conversation WHERE deleted=0 AND (user_id = ? AND room_id = ?) limit 1
2024-05-24 16:09:45.773 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.selectList  : ==> Parameters: 2(Long), 1(Long)
2024-05-24 16:09:45.781 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.ConversationMapper.selectList  : <==      Total: 1
2024-05-24 16:09:45.782 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.C.queryListByIds               : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.id IN ( ? )
2024-05-24 16:09:45.782 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.C.queryListByIds               : ==> Parameters: 2(Long)
2024-05-24 16:09:45.792 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.C.queryListByIds               : <==      Total: 1
2024-05-24 16:09:45.793 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.room_id = ? AND c.user_id = ?
2024-05-24 16:09:45.793 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : ==> Parameters: 1(Long), 1(Long)
2024-05-24 16:09:45.802 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.c.m.C.queryInfoByRoomIdAndUserId   : <==      Total: 1
2024-05-24 16:09:52.793 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:09:52.793 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:09:52.801 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:09:53.122 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:09:53.123 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:09:53.131 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:09:53.149 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:09:53.150 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:09:53.161 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:09:54.175 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:09:54.175 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:09:54.185 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:09:54.186 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:09:54.186 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 16:09:54.196 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:09:57.683 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:09:57.684 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:09:57.691 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:09:57.692 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:09:57.693 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 13(Long), 10(Long)
2024-05-24 16:09:57.701 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:10:03.179 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:10:03.179 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:10:03.189 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:10:03.190 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:10:03.190 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 3(Long), 10(Long)
2024-05-24 16:10:03.201 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 16:10:04.493 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:10:04.493 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:10:04.500 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:10:04.502 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:10:04.502 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 16:10:04.513 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 16:12:25.176 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:12:25.176 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:12:25.187 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:12:25.205 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.g.mapper.GroupingMapper.queryList  : ==>  Preparing: SELECT g.id, g.name, g.fixed, f.id AS friend_id, f.remark, f.friend_id AS user_id, u.nickname, u.avatar, u.sex, u.online FROM `grouping` AS g LEFT JOIN friend AS f ON f.grouping_id = g.id LEFT JOIN user AS u ON u.id = f.friend_id WHERE g.deleted = 0 AND g.user_id = ? ORDER BY g.fixed DESC, u.nickname ASC, f.created_at DESC
2024-05-24 16:12:25.206 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.g.mapper.GroupingMapper.queryList  : ==> Parameters: 1(Long)
2024-05-24 16:12:25.216 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.g.mapper.GroupingMapper.queryList  : <==      Total: 1
2024-05-24 16:16:25.793 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:16:25.793 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:16:25.804 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:16:26.090 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:16:26.090 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:16:26.100 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:16:26.125 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:16:26.125 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:16:26.136 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:16:26.941 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:16:26.941 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:16:26.948 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:16:26.950 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:16:26.950 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 16:16:26.959 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:16:49.878 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:16:49.878 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:16:49.889 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:16:50.226 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:16:50.226 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:16:50.234 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:16:50.251 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:16:50.251 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:16:50.262 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:16:51.126 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:16:51.127 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:16:51.136 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:16:51.137 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:16:51.137 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 16:16:51.148 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:17:42.477 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:17:42.478 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:17:42.488 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:17:42.911 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:17:42.911 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:17:42.920 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:17:42.939 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:17:42.940 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:17:42.990 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:17:43.896 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:17:43.897 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:17:43.932 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:17:43.933 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:17:43.933 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 16:17:43.941 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:18:43.960 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:18:43.960 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:18:43.969 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:18:43.971 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:18:43.971 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 13(Long), 10(Long)
2024-05-24 16:18:43.981 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:20:10.597 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:20:10.597 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:20:10.605 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:20:10.606 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:20:10.606 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 3(Long), 10(Long)
2024-05-24 16:20:10.617 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 16:20:15.106 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:20:15.106 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:20:15.113 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:20:15.114 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:20:15.114 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 16:20:15.122 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 16:37:41.422 ERROR 8144 --- [Druid-ConnectionPool-Destroy-1483155688] c.alibaba.druid.filter.stat.StatFilter   : slow sql 177 millis. SELECT 1[]
2024-05-24 16:41:40.250 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:41:40.252 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:41:40.265 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:41:43.497 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:41:43.497 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:41:43.507 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:41:43.922 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:41:43.922 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:41:43.934 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:41:43.955 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:41:43.956 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:41:43.969 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:41:57.509 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:41:57.509 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:41:57.520 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:41:57.523 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:41:57.523 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 16:41:57.534 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:42:00.713 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:42:00.713 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:42:00.722 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:42:00.723 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:42:00.724 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 13(Long), 10(Long)
2024-05-24 16:42:00.733 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:42:07.849 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:42:07.850 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:42:07.862 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:42:08.270 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:42:08.270 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:42:08.284 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:42:08.304 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:42:08.304 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:42:08.317 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:42:34.909 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:42:34.910 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:42:34.922 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:42:35.351 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:42:35.351 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:42:35.360 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:42:35.383 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:42:35.383 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:42:35.395 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:42:37.520 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:42:37.520 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:42:37.528 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:42:37.889 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:42:37.890 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:42:37.901 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:42:38.000 ERROR 8144 --- [http-nio-8820-exec-17] com.slipper.handler.RunExceptionHandler  : 操作太频繁,请稍后重试！

com.slipper.exception.RunException: 操作太频繁,请稍后重试！
	at com.slipper.core.repeat.aspect.RepeatAspect.around(RepeatAspect.java:64)
	at sun.reflect.GeneratedMethodAccessor128.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:634)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:624)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.slipper.modules.conversation.controller.ConversationController$$EnhancerBySpringCGLIB$$d1f2befd.list(<generated>)
	at sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.xss.XssFilter.doFilter(XssFilter.java:21)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.slipper.core.security.filter.TokenAuthenticationFilter.doFilterInternal(TokenAuthenticationFilter.java:48)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.slipper.filter.stream.InputStreamFilter.doFilter(InputStreamFilter.java:19)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)

2024-05-24 16:42:44.846 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:42:44.846 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:42:44.856 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:42:45.132 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:42:45.133 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:42:45.149 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:42:45.175 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:42:45.175 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:42:45.187 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:42:54.062 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:42:54.062 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:42:54.070 DEBUG 8144 --- [http-nio-8820-exec-20] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:42:54.365 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:42:54.365 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:42:54.375 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:42:54.392 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:42:54.393 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:42:54.405 DEBUG 8144 --- [http-nio-8820-exec-21] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:42:57.783 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:42:57.783 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:42:57.793 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:42:57.797 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:42:57.797 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 16:42:57.810 DEBUG 8144 --- [http-nio-8820-exec-22] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:42:59.674 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:42:59.674 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:42:59.686 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:42:59.689 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:42:59.690 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 13(Long), 10(Long)
2024-05-24 16:42:59.701 DEBUG 8144 --- [http-nio-8820-exec-23] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:46:12.735 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:46:12.736 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:46:12.744 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:46:12.745 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:46:12.746 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 3(Long), 10(Long)
2024-05-24 16:46:12.755 DEBUG 8144 --- [http-nio-8820-exec-24] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 16:46:14.239 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:46:14.239 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:46:14.248 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:46:14.250 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:46:14.251 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 16:46:14.485 ERROR 8144 --- [http-nio-8820-exec-25] c.alibaba.druid.filter.stat.StatFilter   : slow sql 233 millis. SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at,
               u.id AS userId, u.nickname, u.avatar, u.sex
        FROM message AS m
        LEFT JOIN user AS u ON u.id = m.user_id
        WHERE m.deleted = 0
     
        AND m.room_id = ?
         
            AND m.id   <   ?
         
        ORDER BY m.created_at DESC
        LIMIT ?[1,1,10]
2024-05-24 16:46:14.485 DEBUG 8144 --- [http-nio-8820-exec-25] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 16:47:04.889 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:47:04.890 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:47:04.899 DEBUG 8144 --- [http-nio-8820-exec-26] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:47:05.286 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:47:05.287 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:47:05.294 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:47:05.315 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 16:47:05.316 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 16:47:05.327 DEBUG 8144 --- [http-nio-8820-exec-27] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 16:47:06.544 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:47:06.544 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:47:06.554 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:47:06.556 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:47:06.557 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 16:47:06.565 DEBUG 8144 --- [http-nio-8820-exec-28] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:47:08.919 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:47:08.919 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:47:08.931 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:47:08.933 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:47:08.934 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 13(Long), 10(Long)
2024-05-24 16:47:08.951 DEBUG 8144 --- [http-nio-8820-exec-29] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 16:48:46.692 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:48:46.693 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:48:46.706 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:48:46.709 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:48:46.709 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 3(Long), 10(Long)
2024-05-24 16:48:46.719 DEBUG 8144 --- [http-nio-8820-exec-30] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 16:48:47.781 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:48:47.782 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:48:47.789 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:48:47.791 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 16:48:47.791 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 1(Long), 10(Long)
2024-05-24 16:48:47.800 DEBUG 8144 --- [http-nio-8820-exec-1] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 0
2024-05-24 16:49:10.531 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 16:49:10.531 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 16:49:10.542 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 16:49:10.564 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.g.mapper.GroupingMapper.queryList  : ==>  Preparing: SELECT g.id, g.name, g.fixed, f.id AS friend_id, f.remark, f.friend_id AS user_id, u.nickname, u.avatar, u.sex, u.online FROM `grouping` AS g LEFT JOIN friend AS f ON f.grouping_id = g.id LEFT JOIN user AS u ON u.id = f.friend_id WHERE g.deleted = 0 AND g.user_id = ? ORDER BY g.fixed DESC, u.nickname ASC, f.created_at DESC
2024-05-24 16:49:10.565 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.g.mapper.GroupingMapper.queryList  : ==> Parameters: 1(Long)
2024-05-24 16:49:10.578 DEBUG 8144 --- [http-nio-8820-exec-2] c.s.m.g.mapper.GroupingMapper.queryList  : <==      Total: 1
2024-05-24 16:51:42.288 ERROR 8144 --- [Druid-ConnectionPool-Destroy-1483155688] c.alibaba.druid.filter.stat.StatFilter   : slow sql 184 millis. SELECT 1[]
2024-05-24 17:07:05.350 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:07:05.350 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:07:05.404 DEBUG 8144 --- [http-nio-8820-exec-3] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:07:05.927 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:07:05.927 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:07:05.944 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:07:05.982 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 17:07:05.983 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 17:07:06.127 ERROR 8144 --- [http-nio-8820-exec-4] c.alibaba.druid.filter.stat.StatFilter   : slow sql 143 millis. SELECT c.id, c.room_id, c.user_id,
               m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage,
               m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt,
               mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex,
               rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar,
               f.id AS friendId, f.remark,
               u.id AS userId, u.nickname, u.avatar, u.sex, u.online
        FROM conversation AS c
                 LEFT JOIN room AS r ON r.id = c.room_id
                 LEFT JOIN message AS m ON m.id = r.last_message_id
                 LEFT JOIN user AS mu ON mu.id = m.user_id
                 LEFT JOIN room_group AS rg ON rg.room_id = c.room_id
                 LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id
                 LEFT JOIN user AS u
                           ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id)
                               OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id)
                 LEFT JOIN friend AS f
                           ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id
        WHERE c.deleted = 0
     
            AND c.user_id = ?
        ORDER BY m.created_at DESC[1]
2024-05-24 17:07:06.128 DEBUG 8144 --- [http-nio-8820-exec-4] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 17:07:07.167 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:07:07.169 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:07:07.183 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:07:07.185 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 17:07:07.185 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 17:07:07.202 DEBUG 8144 --- [http-nio-8820-exec-5] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 17:10:16.691 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:10:16.691 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:10:16.711 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:10:16.712 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 17:10:16.712 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 13(Long), 10(Long)
2024-05-24 17:10:16.723 DEBUG 8144 --- [http-nio-8820-exec-6] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 17:19:59.865 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:19:59.866 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:19:59.874 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:19:59.876 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? AND m.id < ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 17:19:59.876 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 3(Long), 10(Long)
2024-05-24 17:19:59.884 DEBUG 8144 --- [http-nio-8820-exec-7] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 2
2024-05-24 17:28:07.277 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:28:07.278 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:28:07.291 DEBUG 8144 --- [http-nio-8820-exec-8] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:28:07.660 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:28:07.662 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:28:07.677 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:28:07.698 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 17:28:07.699 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 17:28:07.712 DEBUG 8144 --- [http-nio-8820-exec-9] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 17:28:09.451 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:28:09.452 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:28:09.461 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:28:09.464 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 17:28:09.465 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 17:28:09.475 DEBUG 8144 --- [http-nio-8820-exec-10] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 17:29:51.973 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:29:51.974 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:29:51.984 DEBUG 8144 --- [http-nio-8820-exec-11] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:29:52.330 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:29:52.331 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:29:52.341 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:29:52.360 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 17:29:52.360 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 17:29:52.375 DEBUG 8144 --- [http-nio-8820-exec-12] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 17:29:53.098 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:29:53.099 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:29:53.110 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:29:53.111 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 17:29:53.111 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 17:29:53.123 DEBUG 8144 --- [http-nio-8820-exec-13] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 17:31:11.453 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:31:11.454 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:31:11.466 DEBUG 8144 --- [http-nio-8820-exec-14] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:31:11.915 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:31:11.916 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:31:11.925 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:31:11.943 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 17:31:11.943 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 17:31:11.955 DEBUG 8144 --- [http-nio-8820-exec-15] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 17:31:13.094 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:31:13.095 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:31:13.106 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:31:13.109 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 17:31:13.110 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 17:31:13.120 DEBUG 8144 --- [http-nio-8820-exec-16] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
2024-05-24 17:31:35.593 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:31:35.593 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:31:35.602 DEBUG 8144 --- [http-nio-8820-exec-17] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:31:35.977 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:31:35.977 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:31:35.991 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:31:36.013 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==>  Preparing: SELECT c.id, c.room_id, c.user_id, m.id AS messageId, m.type AS messageType, m.text AS messageText, m.image AS messageImage, m.voice AS messageVoice, m.file AS messageFile, m.status AS messageStatus, m.created_at AS messageCreatedAt, mu.id AS messageUserId, mu.nickname AS messageNickname, mu.avatar AS messageAvatar, mu.sex AS messageSex, rg.id AS groupId, rg.name AS groupName, rg.avatar AS groupAvatar, f.id AS friendId, f.remark, u.id AS userId, u.nickname, u.avatar, u.sex, u.online FROM conversation AS c LEFT JOIN room AS r ON r.id = c.room_id LEFT JOIN message AS m ON m.id = r.last_message_id LEFT JOIN user AS mu ON mu.id = m.user_id LEFT JOIN room_group AS rg ON rg.room_id = c.room_id LEFT JOIN room_friend AS rf ON rf.room_id = c.room_id LEFT JOIN user AS u ON (rf.source_user_id = c.user_id AND u.id = rf.target_user_id) OR (rf.target_user_id = c.user_id AND u.id = rf.source_user_id) LEFT JOIN friend AS f ON f.deleted = 0 AND f.user_id = c.user_id AND f.friend_id = u.id WHERE c.deleted = 0 AND c.user_id = ? ORDER BY m.created_at DESC
2024-05-24 17:31:36.016 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : ==> Parameters: 1(Long)
2024-05-24 17:31:36.027 DEBUG 8144 --- [http-nio-8820-exec-18] c.s.m.c.m.ConversationMapper.queryList   : <==      Total: 1
2024-05-24 17:31:37.296 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==>  Preparing: SELECT id,nickname,avatar,sex,email,open_id,online,last_at,status,created_at,updated_at,deleted FROM user WHERE id=? AND deleted=0
2024-05-24 17:31:37.297 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : ==> Parameters: 1(Long)
2024-05-24 17:31:37.306 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.user.mapper.UserMapper.selectById  : <==      Total: 1
2024-05-24 17:31:37.309 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==>  Preparing: SELECT m.id, m.type, m.text, m.image, m.voice, m.file, m.status, m.created_at, u.id AS userId, u.nickname, u.avatar, u.sex FROM message AS m LEFT JOIN user AS u ON u.id = m.user_id WHERE m.deleted = 0 AND m.room_id = ? ORDER BY m.created_at DESC LIMIT ?
2024-05-24 17:31:37.309 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : ==> Parameters: 1(Long), 10(Long)
2024-05-24 17:31:37.318 DEBUG 8144 --- [http-nio-8820-exec-19] c.s.m.m.m.M.queryPageByLastId            : <==      Total: 10
